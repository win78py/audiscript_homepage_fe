/*!
 * @license Tosspayments standard javascript SDK - v2
 * Copyright ⓒ Toss Payments. All Rights Reserved
 * Documentation: https://docs.tosspayments.com/sdk/v2/js
 * Version: 23e335600543dc7e4954d8027a90077acec38fef
 */
null==window.__SDK_LOAD_START_TIME__&&(window.__SDK_LOAD_START_TIME__=new Date),function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,r){return h=f()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&d(i,r.prototype),i},h.apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},p(e)}function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function g(e){var t=f();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y(this,r)}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function C(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var I=function(e){return e&&e.Math==Math&&e},A=I("object"==typeof globalThis&&globalThis)||I("object"==typeof window&&window)||I("object"==typeof self&&self)||I("object"==typeof R&&R)||function(){return this}()||Function("return this")(),T={},x=function(e){try{return!!e()}catch(e){return!0}},_=!x((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),N=!x((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),O=N,M=Function.prototype.call,L=O?M.bind(M):function(){return M.apply(M,arguments)},U={},B={}.propertyIsEnumerable,D=Object.getOwnPropertyDescriptor,K=D&&!B.call({1:2},1);U.f=K?function(e){var t=D(this,e);return!!t&&t.enumerable}:B;var F,j,q=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},G=N,W=Function.prototype,H=W.bind,Y=W.call,V=G&&H.bind(Y,Y),z=G?function(e){return e&&V(e)}:function(e){return e&&function(){return Y.apply(e,arguments)}},Z=z,Q=Z({}.toString),J=Z("".slice),$=function(e){return J(Q(e),8,-1)},X=z,ee=x,te=$,re=A.Object,ne=X("".split),ie=ee((function(){return!re("z").propertyIsEnumerable(0)}))?function(e){return"String"==te(e)?ne(e,""):re(e)}:re,oe=A.TypeError,ae=function(e){if(null==e)throw oe("Can't call method on "+e);return e},se=ie,ue=ae,ce=function(e){return se(ue(e))},le=function(e){return"function"==typeof e},de=le,fe=function(e){return"object"==typeof e?null!==e:de(e)},he=A,pe=le,ve=function(e){return pe(e)?e:void 0},me=function(e,t){return arguments.length<2?ve(he[e]):he[e]&&he[e][t]},ye=z({}.isPrototypeOf),ge=me("navigator","userAgent")||"",we=A,ke=ge,be=we.process,Se=we.Deno,Ee=be&&be.versions||Se&&Se.version,Pe=Ee&&Ee.v8;Pe&&(j=(F=Pe.split("."))[0]>0&&F[0]<4?1:+(F[0]+F[1])),!j&&ke&&(!(F=ke.match(/Edge\/(\d+)/))||F[1]>=74)&&(F=ke.match(/Chrome\/(\d+)/))&&(j=+F[1]);var Re=j,Ce=Re,Ie=x,Ae=!!Object.getOwnPropertySymbols&&!Ie((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ce&&Ce<41})),Te=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xe=me,_e=le,Ne=ye,Oe=Te,Me=A.Object,Le=Oe?function(e){return"symbol"==typeof e}:function(e){var t=xe("Symbol");return _e(t)&&Ne(t.prototype,Me(e))},Ue=A.String,Be=function(e){try{return Ue(e)}catch(e){return"Object"}},De=le,Ke=Be,Fe=A.TypeError,je=function(e){if(De(e))return e;throw Fe(Ke(e)+" is not a function")},qe=je,Ge=function(e,t){var r=e[t];return null==r?void 0:qe(r)},We=L,He=le,Ye=fe,Ve=A.TypeError,ze={exports:{}},Ze=A,Qe=Object.defineProperty,Je=function(e,t){try{Qe(Ze,e,{value:t,configurable:!0,writable:!0})}catch(r){Ze[e]=t}return t},$e=Je,Xe="__core-js_shared__",et=A[Xe]||$e(Xe,{}),tt=et;(ze.exports=function(e,t){return tt[e]||(tt[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.4",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.4/LICENSE",source:"https://github.com/zloirock/core-js"});var rt=ae,nt=A.Object,it=function(e){return nt(rt(e))},ot=it,at=z({}.hasOwnProperty),st=Object.hasOwn||function(e,t){return at(ot(e),t)},ut=z,ct=0,lt=Math.random(),dt=ut(1..toString),ft=function(e){return"Symbol("+(void 0===e?"":e)+")_"+dt(++ct+lt,36)},ht=A,pt=ze.exports,vt=st,mt=ft,yt=Ae,gt=Te,wt=pt("wks"),kt=ht.Symbol,bt=kt&&kt.for,St=gt?kt:kt&&kt.withoutSetter||mt,Et=function(e){if(!vt(wt,e)||!yt&&"string"!=typeof wt[e]){var t="Symbol."+e;yt&&vt(kt,e)?wt[e]=kt[e]:wt[e]=gt&&bt?bt(t):St(t)}return wt[e]},Pt=L,Rt=fe,Ct=Le,It=Ge,At=function(e,t){var r,n;if("string"===t&&He(r=e.toString)&&!Ye(n=We(r,e)))return n;if(He(r=e.valueOf)&&!Ye(n=We(r,e)))return n;if("string"!==t&&He(r=e.toString)&&!Ye(n=We(r,e)))return n;throw Ve("Can't convert object to primitive value")},Tt=Et,xt=A.TypeError,_t=Tt("toPrimitive"),Nt=function(e,t){if(!Rt(e)||Ct(e))return e;var r,n=It(e,_t);if(n){if(void 0===t&&(t="default"),r=Pt(n,e,t),!Rt(r)||Ct(r))return r;throw xt("Can't convert object to primitive value")}return void 0===t&&(t="number"),At(e,t)},Ot=Nt,Mt=Le,Lt=function(e){var t=Ot(e,"string");return Mt(t)?t:t+""},Ut=fe,Bt=A.document,Dt=Ut(Bt)&&Ut(Bt.createElement),Kt=function(e){return Dt?Bt.createElement(e):{}},Ft=Kt,jt=!_&&!x((function(){return 7!=Object.defineProperty(Ft("div"),"a",{get:function(){return 7}}).a})),qt=_,Gt=L,Wt=U,Ht=q,Yt=ce,Vt=Lt,zt=st,Zt=jt,Qt=Object.getOwnPropertyDescriptor;T.f=qt?Qt:function(e,t){if(e=Yt(e),t=Vt(t),Zt)try{return Qt(e,t)}catch(e){}if(zt(e,t))return Ht(!Gt(Wt.f,e,t),e[t])};var Jt={},$t=_&&x((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Xt=A,er=fe,tr=Xt.String,rr=Xt.TypeError,nr=function(e){if(er(e))return e;throw rr(tr(e)+" is not an object")},ir=_,or=jt,ar=$t,sr=nr,ur=Lt,cr=A.TypeError,lr=Object.defineProperty,dr=Object.getOwnPropertyDescriptor,fr="enumerable",hr="configurable",pr="writable";Jt.f=ir?ar?function(e,t,r){if(sr(e),t=ur(t),sr(r),"function"==typeof e&&"prototype"===t&&"value"in r&&pr in r&&!r.writable){var n=dr(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:hr in r?r.configurable:n.configurable,enumerable:fr in r?r.enumerable:n.enumerable,writable:!1})}return lr(e,t,r)}:lr:function(e,t,r){if(sr(e),t=ur(t),sr(r),or)try{return lr(e,t,r)}catch(e){}if("get"in r||"set"in r)throw cr("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var vr=Jt,mr=q,yr=_?function(e,t,r){return vr.f(e,t,mr(1,r))}:function(e,t,r){return e[t]=r,e},gr={exports:{}},wr=_,kr=st,br=Function.prototype,Sr=wr&&Object.getOwnPropertyDescriptor,Er=kr(br,"name"),Pr={EXISTS:Er,PROPER:Er&&"something"===function(){}.name,CONFIGURABLE:Er&&(!wr||wr&&Sr(br,"name").configurable)},Rr=le,Cr=et,Ir=z(Function.toString);Rr(Cr.inspectSource)||(Cr.inspectSource=function(e){return Ir(e)});var Ar,Tr,xr,_r=Cr.inspectSource,Nr=le,Or=_r,Mr=A.WeakMap,Lr=Nr(Mr)&&/native code/.test(Or(Mr)),Ur=ze.exports,Br=ft,Dr=Ur("keys"),Kr=function(e){return Dr[e]||(Dr[e]=Br(e))},Fr={},jr=Lr,qr=A,Gr=z,Wr=fe,Hr=yr,Yr=st,Vr=et,zr=Kr,Zr=Fr,Qr="Object already initialized",Jr=qr.TypeError,$r=qr.WeakMap;if(jr||Vr.state){var Xr=Vr.state||(Vr.state=new $r),en=Gr(Xr.get),tn=Gr(Xr.has),rn=Gr(Xr.set);Ar=function(e,t){if(tn(Xr,e))throw new Jr(Qr);return t.facade=e,rn(Xr,e,t),t},Tr=function(e){return en(Xr,e)||{}},xr=function(e){return tn(Xr,e)}}else{var nn=zr("state");Zr[nn]=!0,Ar=function(e,t){if(Yr(e,nn))throw new Jr(Qr);return t.facade=e,Hr(e,nn,t),t},Tr=function(e){return Yr(e,nn)?e[nn]:{}},xr=function(e){return Yr(e,nn)}}var on={set:Ar,get:Tr,has:xr,enforce:function(e){return xr(e)?Tr(e):Ar(e,{})},getterFor:function(e){return function(t){var r;if(!Wr(t)||(r=Tr(t)).type!==e)throw Jr("Incompatible receiver, "+e+" required");return r}}},an=x,sn=le,un=st,cn=Jt.f,ln=Pr.CONFIGURABLE,dn=_r,fn=on.enforce,hn=on.get,pn=!an((function(){return 8!==cn((function(){}),"length",{value:8}).length})),vn=String(String).split("String"),mn=gr.exports=function(e,t,r){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!un(e,"name")||ln&&e.name!==t)&&cn(e,"name",{value:t,configurable:!0}),pn&&r&&un(r,"arity")&&e.length!==r.arity&&cn(e,"length",{value:r.arity});var n=fn(e);return un(n,"source")||(n.source=vn.join("string"==typeof t?t:"")),e};Function.prototype.toString=mn((function(){return sn(this)&&hn(this).source||dn(this)}),"toString");var yn=A,gn=le,wn=yr,kn=gr.exports,bn=Je,Sn=function(e,t,r,n){var i=!!n&&!!n.unsafe,o=!!n&&!!n.enumerable,a=!!n&&!!n.noTargetGet,s=n&&void 0!==n.name?n.name:t;return gn(r)&&kn(r,s,n),e===yn?(o?e[t]=r:bn(t,r),e):(i?!a&&e[t]&&(o=!0):delete e[t],o?e[t]=r:wn(e,t,r),e)},En={},Pn=Math.ceil,Rn=Math.floor,Cn=function(e){var t=+e;return t!=t||0===t?0:(t>0?Rn:Pn)(t)},In=Cn,An=Math.max,Tn=Math.min,xn=function(e,t){var r=In(e);return r<0?An(r+t,0):Tn(r,t)},_n=Cn,Nn=Math.min,On=function(e){return e>0?Nn(_n(e),9007199254740991):0},Mn=On,Ln=function(e){return Mn(e.length)},Un=ce,Bn=xn,Dn=Ln,Kn=function(e){return function(t,r,n){var i,o=Un(t),a=Dn(o),s=Bn(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},Fn={includes:Kn(!0),indexOf:Kn(!1)},jn=st,qn=ce,Gn=Fn.indexOf,Wn=Fr,Hn=z([].push),Yn=function(e,t){var r,n=qn(e),i=0,o=[];for(r in n)!jn(Wn,r)&&jn(n,r)&&Hn(o,r);for(;t.length>i;)jn(n,r=t[i++])&&(~Gn(o,r)||Hn(o,r));return o},Vn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zn=Yn,Zn=Vn.concat("length","prototype");En.f=Object.getOwnPropertyNames||function(e){return zn(e,Zn)};var Qn={};Qn.f=Object.getOwnPropertySymbols;var Jn=me,$n=En,Xn=Qn,ei=nr,ti=z([].concat),ri=Jn("Reflect","ownKeys")||function(e){var t=$n.f(ei(e)),r=Xn.f;return r?ti(t,r(e)):t},ni=st,ii=ri,oi=T,ai=Jt,si=function(e,t,r){for(var n=ii(t),i=ai.f,o=oi.f,a=0;a<n.length;a++){var s=n[a];ni(e,s)||r&&ni(r,s)||i(e,s,o(t,s))}},ui=x,ci=le,li=/#|\.prototype\./,di=function(e,t){var r=hi[fi(e)];return r==vi||r!=pi&&(ci(t)?ui(t):!!t)},fi=di.normalize=function(e){return String(e).replace(li,".").toLowerCase()},hi=di.data={},pi=di.NATIVE="N",vi=di.POLYFILL="P",mi=di,yi=A,gi=T.f,wi=yr,ki=Sn,bi=Je,Si=si,Ei=mi,Pi=function(e,t){var r,n,i,o,a,s=e.target,u=e.global,c=e.stat;if(r=u?yi:c?yi[s]||bi(s,{}):(yi[s]||{}).prototype)for(n in t){if(o=t[n],i=e.noTargetGet?(a=gi(r,n))&&a.value:r[n],!Ei(u?n:s+(c?".":"#")+n,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Si(o,i)}(e.sham||i&&i.sham)&&wi(o,"sham",!0),ki(r,n,o,e)}},Ri=$,Ci=Array.isArray||function(e){return"Array"==Ri(e)},Ii={};Ii[Et("toStringTag")]="z";var Ai="[object z]"===String(Ii),Ti=A,xi=Ai,_i=le,Ni=$,Oi=Et("toStringTag"),Mi=Ti.Object,Li="Arguments"==Ni(function(){return arguments}()),Ui=xi?Ni:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Mi(e),Oi))?r:Li?Ni(t):"Object"==(n=Ni(t))&&_i(t.callee)?"Arguments":n},Bi=z,Di=x,Ki=le,Fi=Ui,ji=_r,qi=function(){},Gi=[],Wi=me("Reflect","construct"),Hi=/^\s*(?:class|function)\b/,Yi=Bi(Hi.exec),Vi=!Hi.exec(qi),zi=function(e){if(!Ki(e))return!1;try{return Wi(qi,Gi,e),!0}catch(e){return!1}},Zi=function(e){if(!Ki(e))return!1;switch(Fi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Vi||!!Yi(Hi,ji(e))}catch(e){return!0}};Zi.sham=!0;var Qi=!Wi||Di((function(){var e;return zi(zi.call)||!zi(Object)||!zi((function(){e=!0}))||e}))?Zi:zi,Ji=Lt,$i=Jt,Xi=q,eo=function(e,t,r){var n=Ji(t);n in e?$i.f(e,n,Xi(0,r)):e[n]=r},to=x,ro=Re,no=Et("species"),io=function(e){return ro>=51||!to((function(){var t=[];return(t.constructor={})[no]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},oo=z([].slice),ao=Pi,so=A,uo=Ci,co=Qi,lo=fe,fo=xn,ho=Ln,po=ce,vo=eo,mo=Et,yo=oo,go=io("slice"),wo=mo("species"),ko=so.Array,bo=Math.max;ao({target:"Array",proto:!0,forced:!go},{slice:function(e,t){var r,n,i,o=po(this),a=ho(o),s=fo(e,a),u=fo(void 0===t?a:t,a);if(uo(o)&&(r=o.constructor,(co(r)&&(r===ko||uo(r.prototype))||lo(r)&&null===(r=r[wo]))&&(r=void 0),r===ko||void 0===r))return yo(o,s,u);for(n=new(void 0===r?ko:r)(bo(u-s,0)),i=0;s<u;s++,i++)s in o&&vo(n,i,o[s]);return n.length=i,n}});var So=_,Eo=Pr.EXISTS,Po=z,Ro=Jt.f,Co=Function.prototype,Io=Po(Co.toString),Ao=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,To=Po(Ao.exec);So&&!Eo&&Ro(Co,"name",{configurable:!0,get:function(){try{return To(Ao,Io(this))[1]}catch(e){return""}}});var xo=Pi,_o=x,No=ce,Oo=T.f,Mo=_,Lo=_o((function(){Oo(1)}));xo({target:"Object",stat:!0,forced:!Mo||Lo,sham:!Mo},{getOwnPropertyDescriptor:function(e,t){return Oo(No(e),t)}});var Uo=Ui,Bo=A.String,Do=function(e){if("Symbol"===Uo(e))throw TypeError("Cannot convert a Symbol value to a string");return Bo(e)},Ko={},Fo=Yn,jo=Vn,qo=Object.keys||function(e){return Fo(e,jo)},Go=_,Wo=$t,Ho=Jt,Yo=nr,Vo=ce,zo=qo;Ko.f=Go&&!Wo?Object.defineProperties:function(e,t){Yo(e);for(var r,n=Vo(t),i=zo(t),o=i.length,a=0;o>a;)Ho.f(e,r=i[a++],n[r]);return e};var Zo,Qo=me("document","documentElement"),Jo=nr,$o=Ko,Xo=Vn,ea=Fr,ta=Qo,ra=Kt,na=Kr("IE_PROTO"),ia=function(){},oa=function(e){return"<script>"+e+"</"+"script>"},aa=function(e){e.write(oa("")),e.close();var t=e.parentWindow.Object;return e=null,t},sa=function(){try{Zo=new ActiveXObject("htmlfile")}catch(e){}var e,t;sa="undefined"!=typeof document?document.domain&&Zo?aa(Zo):((t=ra("iframe")).style.display="none",ta.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(oa("document.F=Object")),e.close(),e.F):aa(Zo);for(var r=Xo.length;r--;)delete sa.prototype[Xo[r]];return sa()};ea[na]=!0;var ua=Object.create||function(e,t){var r;return null!==e?(ia.prototype=Jo(e),r=new ia,ia.prototype=null,r[na]=e):r=sa(),void 0===t?r:$o.f(r,t)},ca={},la=xn,da=Ln,fa=eo,ha=A.Array,pa=Math.max,va=function(e,t,r){for(var n=da(e),i=la(t,n),o=la(void 0===r?n:r,n),a=ha(pa(o-i,0)),s=0;i<o;i++,s++)fa(a,s,e[i]);return a.length=s,a},ma=$,ya=ce,ga=En.f,wa=va,ka="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ca.f=function(e){return ka&&"Window"==ma(e)?function(e){try{return ga(e)}catch(e){return wa(ka)}}(e):ga(ya(e))};var ba={},Sa=Et;ba.f=Sa;var Ea=A,Pa=st,Ra=ba,Ca=Jt.f,Ia=function(e){var t=Ea.Symbol||(Ea.Symbol={});Pa(t,e)||Ca(t,e,{value:Ra.f(e)})},Aa=L,Ta=me,xa=Et,_a=Sn,Na=Jt.f,Oa=st,Ma=Et("toStringTag"),La=function(e,t,r){e&&!r&&(e=e.prototype),e&&!Oa(e,Ma)&&Na(e,Ma,{configurable:!0,value:t})},Ua=je,Ba=N,Da=z(z.bind),Ka=function(e,t){return Ua(e),void 0===t?e:Ba?Da(e,t):function(){return e.apply(t,arguments)}},Fa=A,ja=Ci,qa=Qi,Ga=fe,Wa=Et("species"),Ha=Fa.Array,Ya=function(e){var t;return ja(e)&&(t=e.constructor,(qa(t)&&(t===Ha||ja(t.prototype))||Ga(t)&&null===(t=t[Wa]))&&(t=void 0)),void 0===t?Ha:t},Va=function(e,t){return new(Ya(e))(0===t?0:t)},za=Ka,Za=ie,Qa=it,Ja=Ln,$a=Va,Xa=z([].push),es=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(u,c,l,d){for(var f,h,p=Qa(u),v=Za(p),m=za(c,l),y=Ja(v),g=0,w=d||$a,k=t?w(u,y):r||a?w(u,0):void 0;y>g;g++)if((s||g in v)&&(h=m(f=v[g],g,p),e))if(t)k[g]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:Xa(k,f)}else switch(e){case 4:return!1;case 7:Xa(k,f)}return o?-1:n||i?i:k}},ts={forEach:es(0),map:es(1),filter:es(2),some:es(3),every:es(4),find:es(5),findIndex:es(6),filterReject:es(7)},rs=Pi,ns=A,is=L,os=z,as=_,ss=Ae,us=x,cs=st,ls=ye,ds=nr,fs=ce,hs=Lt,ps=Do,vs=q,ms=ua,ys=qo,gs=En,ws=ca,ks=Qn,bs=T,Ss=Jt,Es=Ko,Ps=U,Rs=Sn,Cs=ze.exports,Is=Fr,As=ft,Ts=Et,xs=ba,_s=Ia,Ns=function(){var e=Ta("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=xa("toPrimitive");t&&!t[n]&&_a(t,n,(function(e){return Aa(r,this)}),{arity:1})},Os=La,Ms=on,Ls=ts.forEach,Us=Kr("hidden"),Bs="Symbol",Ds=Ms.set,Ks=Ms.getterFor(Bs),Fs=Object.prototype,js=ns.Symbol,qs=js&&js.prototype,Gs=ns.TypeError,Ws=ns.QObject,Hs=bs.f,Ys=Ss.f,Vs=ws.f,zs=Ps.f,Zs=os([].push),Qs=Cs("symbols"),Js=Cs("op-symbols"),$s=Cs("wks"),Xs=!Ws||!Ws.prototype||!Ws.prototype.findChild,eu=as&&us((function(){return 7!=ms(Ys({},"a",{get:function(){return Ys(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=Hs(Fs,t);n&&delete Fs[t],Ys(e,t,r),n&&e!==Fs&&Ys(Fs,t,n)}:Ys,tu=function(e,t){var r=Qs[e]=ms(qs);return Ds(r,{type:Bs,tag:e,description:t}),as||(r.description=t),r},ru=function(e,t,r){e===Fs&&ru(Js,t,r),ds(e);var n=hs(t);return ds(r),cs(Qs,n)?(r.enumerable?(cs(e,Us)&&e[Us][n]&&(e[Us][n]=!1),r=ms(r,{enumerable:vs(0,!1)})):(cs(e,Us)||Ys(e,Us,vs(1,{})),e[Us][n]=!0),eu(e,n,r)):Ys(e,n,r)},nu=function(e,t){ds(e);var r=fs(t),n=ys(r).concat(su(r));return Ls(n,(function(t){as&&!is(iu,r,t)||ru(e,t,r[t])})),e},iu=function(e){var t=hs(e),r=is(zs,this,t);return!(this===Fs&&cs(Qs,t)&&!cs(Js,t))&&(!(r||!cs(this,t)||!cs(Qs,t)||cs(this,Us)&&this[Us][t])||r)},ou=function(e,t){var r=fs(e),n=hs(t);if(r!==Fs||!cs(Qs,n)||cs(Js,n)){var i=Hs(r,n);return!i||!cs(Qs,n)||cs(r,Us)&&r[Us][n]||(i.enumerable=!0),i}},au=function(e){var t=Vs(fs(e)),r=[];return Ls(t,(function(e){cs(Qs,e)||cs(Is,e)||Zs(r,e)})),r},su=function(e){var t=e===Fs,r=Vs(t?Js:fs(e)),n=[];return Ls(r,(function(e){!cs(Qs,e)||t&&!cs(Fs,e)||Zs(n,Qs[e])})),n};ss||(js=function(){if(ls(qs,this))throw Gs("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?ps(arguments[0]):void 0,t=As(e),r=function(e){this===Fs&&is(r,Js,e),cs(this,Us)&&cs(this[Us],t)&&(this[Us][t]=!1),eu(this,t,vs(1,e))};return as&&Xs&&eu(Fs,t,{configurable:!0,set:r}),tu(t,e)},Rs(qs=js.prototype,"toString",(function(){return Ks(this).tag})),Rs(js,"withoutSetter",(function(e){return tu(As(e),e)})),Ps.f=iu,Ss.f=ru,Es.f=nu,bs.f=ou,gs.f=ws.f=au,ks.f=su,xs.f=function(e){return tu(Ts(e),e)},as&&(Ys(qs,"description",{configurable:!0,get:function(){return Ks(this).description}}),Rs(Fs,"propertyIsEnumerable",iu,{unsafe:!0}))),rs({global:!0,wrap:!0,forced:!ss,sham:!ss},{Symbol:js}),Ls(ys($s),(function(e){_s(e)})),rs({target:Bs,stat:!0,forced:!ss},{useSetter:function(){Xs=!0},useSimple:function(){Xs=!1}}),rs({target:"Object",stat:!0,forced:!ss,sham:!as},{create:function(e,t){return void 0===t?ms(e):nu(ms(e),t)},defineProperty:ru,defineProperties:nu,getOwnPropertyDescriptor:ou}),rs({target:"Object",stat:!0,forced:!ss},{getOwnPropertyNames:au}),Ns(),Os(js,Bs),Is[Us]=!0;var uu=Ae&&!!Symbol.for&&!!Symbol.keyFor,cu=Pi,lu=me,du=st,fu=Do,hu=ze.exports,pu=uu,vu=hu("string-to-symbol-registry"),mu=hu("symbol-to-string-registry");cu({target:"Symbol",stat:!0,forced:!pu},{for:function(e){var t=fu(e);if(du(vu,t))return vu[t];var r=lu("Symbol")(t);return vu[t]=r,mu[r]=t,r}});var yu=Pi,gu=st,wu=Le,ku=Be,bu=uu,Su=(0,ze.exports)("symbol-to-string-registry");yu({target:"Symbol",stat:!0,forced:!bu},{keyFor:function(e){if(!wu(e))throw TypeError(ku(e)+" is not a symbol");if(gu(Su,e))return Su[e]}});var Eu=N,Pu=Function.prototype,Ru=Pu.apply,Cu=Pu.call,Iu="object"==typeof Reflect&&Reflect.apply||(Eu?Cu.bind(Ru):function(){return Cu.apply(Ru,arguments)}),Au=Pi,Tu=me,xu=Iu,_u=L,Nu=z,Ou=x,Mu=Ci,Lu=le,Uu=fe,Bu=Le,Du=oo,Ku=Ae,Fu=Tu("JSON","stringify"),ju=Nu(/./.exec),qu=Nu("".charAt),Gu=Nu("".charCodeAt),Wu=Nu("".replace),Hu=Nu(1..toString),Yu=/[\uD800-\uDFFF]/g,Vu=/^[\uD800-\uDBFF]$/,zu=/^[\uDC00-\uDFFF]$/,Zu=!Ku||Ou((function(){var e=Tu("Symbol")();return"[null]"!=Fu([e])||"{}"!=Fu({a:e})||"{}"!=Fu(Object(e))})),Qu=Ou((function(){return'"\\udf06\\ud834"'!==Fu("\udf06\ud834")||'"\\udead"'!==Fu("\udead")})),Ju=function(e,t){var r=Du(arguments),n=t;if((Uu(t)||void 0!==e)&&!Bu(e))return Mu(t)||(t=function(e,t){if(Lu(n)&&(t=_u(n,this,e,t)),!Bu(t))return t}),r[1]=t,xu(Fu,null,r)},$u=function(e,t,r){var n=qu(r,t-1),i=qu(r,t+1);return ju(Vu,e)&&!ju(zu,i)||ju(zu,e)&&!ju(Vu,n)?"\\u"+Hu(Gu(e,0),16):e};Fu&&Au({target:"JSON",stat:!0,arity:3,forced:Zu||Qu},{stringify:function(e,t,r){var n=Du(arguments),i=xu(Zu?Ju:Fu,null,n);return Qu&&"string"==typeof i?Wu(i,Yu,$u):i}});var Xu=Qn,ec=it;Pi({target:"Object",stat:!0,forced:!Ae||x((function(){Xu.f(1)}))},{getOwnPropertySymbols:function(e){var t=Xu.f;return t?t(ec(e)):[]}});var tc=Pi,rc=_,nc=A,ic=z,oc=st,ac=le,sc=ye,uc=Do,cc=Jt.f,lc=si,dc=nc.Symbol,fc=dc&&dc.prototype;if(rc&&ac(dc)&&(!("description"in fc)||void 0!==dc().description)){var hc={},pc=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:uc(arguments[0]),t=sc(fc,this)?new dc(e):void 0===e?dc():dc(e);return""===e&&(hc[t]=!0),t};lc(pc,dc),pc.prototype=fc,fc.constructor=pc;var vc="Symbol(test)"==String(dc("test")),mc=ic(fc.toString),yc=ic(fc.valueOf),gc=/^Symbol\((.*)\)[^)]+$/,wc=ic("".replace),kc=ic("".slice);cc(fc,"description",{configurable:!0,get:function(){var e=yc(this),t=mc(e);if(oc(hc,e))return"";var r=vc?kc(t,7,-1):wc(t,gc,"$1");return""===r?void 0:r}}),tc({global:!0,forced:!0},{Symbol:pc})}var bc=Ui,Sc=Ai?{}.toString:function(){return"[object "+bc(this)+"]"};Ai||Sn(Object.prototype,"toString",Sc,{unsafe:!0}),Ia("iterator");var Ec=ua,Pc=Jt,Rc=Et("unscopables"),Cc=Array.prototype;null==Cc[Rc]&&Pc.f(Cc,Rc,{configurable:!0,value:Ec(null)});var Ic,Ac,Tc,xc=function(e){Cc[Rc][e]=!0},_c={},Nc=!x((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Oc=A,Mc=st,Lc=le,Uc=it,Bc=Nc,Dc=Kr("IE_PROTO"),Kc=Oc.Object,Fc=Kc.prototype,jc=Bc?Kc.getPrototypeOf:function(e){var t=Uc(e);if(Mc(t,Dc))return t[Dc];var r=t.constructor;return Lc(r)&&t instanceof r?r.prototype:t instanceof Kc?Fc:null},qc=x,Gc=le,Wc=jc,Hc=Sn,Yc=Et("iterator"),Vc=!1;[].keys&&("next"in(Tc=[].keys())?(Ac=Wc(Wc(Tc)))!==Object.prototype&&(Ic=Ac):Vc=!0);var zc=null==Ic||qc((function(){var e={};return Ic[Yc].call(e)!==e}));zc&&(Ic={}),Gc(Ic[Yc])||Hc(Ic,Yc,(function(){return this}));var Zc={IteratorPrototype:Ic,BUGGY_SAFARI_ITERATORS:Vc},Qc=Zc.IteratorPrototype,Jc=ua,$c=q,Xc=La,el=_c,tl=function(){return this},rl=function(e,t,r,n){var i=t+" Iterator";return e.prototype=Jc(Qc,{next:$c(+!n,r)}),Xc(e,i,!1),el[i]=tl,e},nl=A,il=le,ol=nl.String,al=nl.TypeError,sl=z,ul=nr,cl=function(e){if("object"==typeof e||il(e))return e;throw al("Can't set "+ol(e)+" as a prototype")},ll=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=sl(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return ul(r),cl(n),t?e(r,n):r.__proto__=n,r}}():void 0),dl=Pi,fl=L,hl=le,pl=rl,vl=jc,ml=ll,yl=La,gl=yr,wl=Sn,kl=_c,bl=Pr.PROPER,Sl=Pr.CONFIGURABLE,El=Zc.IteratorPrototype,Pl=Zc.BUGGY_SAFARI_ITERATORS,Rl=Et("iterator"),Cl="keys",Il="values",Al="entries",Tl=function(){return this},xl=function(e,t,r,n,i,o,a){pl(r,t,n);var s,u,c,l=function(e){if(e===i&&v)return v;if(!Pl&&e in h)return h[e];switch(e){case Cl:case Il:case Al:return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",f=!1,h=e.prototype,p=h[Rl]||h["@@iterator"]||i&&h[i],v=!Pl&&p||l(i),m="Array"==t&&h.entries||p;if(m&&(s=vl(m.call(new e)))!==Object.prototype&&s.next&&(vl(s)!==El&&(ml?ml(s,El):hl(s[Rl])||wl(s,Rl,Tl)),yl(s,d,!0)),bl&&i==Il&&p&&p.name!==Il&&(Sl?gl(h,"name",Il):(f=!0,v=function(){return fl(p,this)})),i)if(u={values:l(Il),keys:o?v:l(Cl),entries:l(Al)},a)for(c in u)(Pl||f||!(c in h))&&wl(h,c,u[c]);else dl({target:t,proto:!0,forced:Pl||f},u);return h[Rl]!==v&&wl(h,Rl,v,{name:i}),kl[t]=v,u},_l=ce,Nl=xc,Ol=_c,Ml=on,Ll=Jt.f,Ul=xl,Bl=_,Dl="Array Iterator",Kl=Ml.set,Fl=Ml.getterFor(Dl),jl=Ul(Array,"Array",(function(e,t){Kl(this,{type:Dl,target:_l(e),index:0,kind:t})}),(function(){var e=Fl(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),ql=Ol.Arguments=Ol.Array;if(Nl("keys"),Nl("values"),Nl("entries"),Bl&&"values"!==ql.name)try{Ll(ql,"name",{value:"values"})}catch(e){}var Gl=z,Wl=Cn,Hl=Do,Yl=ae,Vl=Gl("".charAt),zl=Gl("".charCodeAt),Zl=Gl("".slice),Ql=function(e){return function(t,r){var n,i,o=Hl(Yl(t)),a=Wl(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=zl(o,a))<55296||n>56319||a+1===s||(i=zl(o,a+1))<56320||i>57343?e?Vl(o,a):n:e?Zl(o,a,a+2):i-56320+(n-55296<<10)+65536}},Jl={codeAt:Ql(!1),charAt:Ql(!0)},$l=Jl.charAt,Xl=Do,ed=on,td=xl,rd="String Iterator",nd=ed.set,id=ed.getterFor(rd);td(String,"String",(function(e){nd(this,{type:rd,string:Xl(e),index:0})}),(function(){var e,t=id(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=$l(r,n),t.index+=e.length,{value:e,done:!1})}));var od={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ad=Kt("span").classList,sd=ad&&ad.constructor&&ad.constructor.prototype,ud=sd===Object.prototype?void 0:sd,cd=A,ld=od,dd=ud,fd=jl,hd=yr,pd=Et,vd=pd("iterator"),md=pd("toStringTag"),yd=fd.values,gd=function(e,t){if(e){if(e[vd]!==yd)try{hd(e,vd,yd)}catch(t){e[vd]=yd}if(e[md]||hd(e,md,t),ld[t])for(var r in fd)if(e[r]!==fd[r])try{hd(e,r,fd[r])}catch(t){e[r]=fd[r]}}};for(var wd in ld)gd(cd[wd]&&cd[wd].prototype,wd);gd(dd,"DOMTokenList"),Ia("asyncIterator");var kd=me,bd=La;Ia("toStringTag"),bd(kd("Symbol"),"Symbol"),La(A.JSON,"JSON",!0),La(Math,"Math",!0);var Sd=it,Ed=jc,Pd=Nc;Pi({target:"Object",stat:!0,forced:x((function(){Ed(1)})),sham:!Pd},{getPrototypeOf:function(e){return Ed(Sd(e))}});var Rd,Cd,Id,Ad,Td="process"==$(A.process),xd=me,_d=Jt,Nd=_,Od=Et("species"),Md=function(e){var t=xd(e),r=_d.f;Nd&&t&&!t[Od]&&r(t,Od,{configurable:!0,get:function(){return this}})},Ld=ye,Ud=A.TypeError,Bd=function(e,t){if(Ld(t,e))return e;throw Ud("Incorrect invocation")},Dd=Qi,Kd=Be,Fd=A.TypeError,jd=function(e){if(Dd(e))return e;throw Fd(Kd(e)+" is not a constructor")},qd=nr,Gd=jd,Wd=Et("species"),Hd=function(e,t){var r,n=qd(e).constructor;return void 0===n||null==(r=qd(n)[Wd])?t:Gd(r)},Yd=A.TypeError,Vd=function(e,t){if(e<t)throw Yd("Not enough arguments");return e},zd=/(?:ipad|iphone|ipod).*applewebkit/i.test(ge),Zd=A,Qd=Iu,Jd=Ka,$d=le,Xd=st,ef=x,tf=Qo,rf=oo,nf=Kt,of=Vd,af=zd,sf=Td,uf=Zd.setImmediate,cf=Zd.clearImmediate,lf=Zd.process,df=Zd.Dispatch,ff=Zd.Function,hf=Zd.MessageChannel,pf=Zd.String,vf=0,mf={},yf="onreadystatechange";try{Rd=Zd.location}catch(e){}var gf=function(e){if(Xd(mf,e)){var t=mf[e];delete mf[e],t()}},wf=function(e){return function(){gf(e)}},kf=function(e){gf(e.data)},bf=function(e){Zd.postMessage(pf(e),Rd.protocol+"//"+Rd.host)};uf&&cf||(uf=function(e){of(arguments.length,1);var t=$d(e)?e:ff(e),r=rf(arguments,1);return mf[++vf]=function(){Qd(t,void 0,r)},Cd(vf),vf},cf=function(e){delete mf[e]},sf?Cd=function(e){lf.nextTick(wf(e))}:df&&df.now?Cd=function(e){df.now(wf(e))}:hf&&!af?(Ad=(Id=new hf).port2,Id.port1.onmessage=kf,Cd=Jd(Ad.postMessage,Ad)):Zd.addEventListener&&$d(Zd.postMessage)&&!Zd.importScripts&&Rd&&"file:"!==Rd.protocol&&!ef(bf)?(Cd=bf,Zd.addEventListener("message",kf,!1)):Cd=yf in nf("script")?function(e){tf.appendChild(nf("script")).onreadystatechange=function(){tf.removeChild(this),gf(e)}}:function(e){setTimeout(wf(e),0)});var Sf,Ef,Pf,Rf,Cf,If,Af,Tf,xf={set:uf,clear:cf},_f=A,Nf=/ipad|iphone|ipod/i.test(ge)&&void 0!==_f.Pebble,Of=/web0s(?!.*chrome)/i.test(ge),Mf=A,Lf=Ka,Uf=T.f,Bf=xf.set,Df=zd,Kf=Nf,Ff=Of,jf=Td,qf=Mf.MutationObserver||Mf.WebKitMutationObserver,Gf=Mf.document,Wf=Mf.process,Hf=Mf.Promise,Yf=Uf(Mf,"queueMicrotask"),Vf=Yf&&Yf.value;Vf||(Sf=function(){var e,t;for(jf&&(e=Wf.domain)&&e.exit();Ef;){t=Ef.fn,Ef=Ef.next;try{t()}catch(e){throw Ef?Rf():Pf=void 0,e}}Pf=void 0,e&&e.enter()},Df||jf||Ff||!qf||!Gf?!Kf&&Hf&&Hf.resolve?((Af=Hf.resolve(void 0)).constructor=Hf,Tf=Lf(Af.then,Af),Rf=function(){Tf(Sf)}):jf?Rf=function(){Wf.nextTick(Sf)}:(Bf=Lf(Bf,Mf),Rf=function(){Bf(Sf)}):(Cf=!0,If=Gf.createTextNode(""),new qf(Sf).observe(If,{characterData:!0}),Rf=function(){If.data=Cf=!Cf}));var zf=Vf||function(e){var t={fn:e,next:void 0};Pf&&(Pf.next=t),Ef||(Ef=t,Rf()),Pf=t},Zf=A,Qf=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Jf=function(){this.head=null,this.tail=null};Jf.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var $f=Jf,Xf=A.Promise,eh="object"==typeof window&&"object"!=typeof Deno,th=A,rh=Xf,nh=le,ih=mi,oh=_r,ah=Et,sh=eh,uh=Re;rh&&rh.prototype;var ch=ah("species"),lh=!1,dh=nh(th.PromiseRejectionEvent),fh=ih("Promise",(function(){var e=oh(rh),t=e!==String(rh);if(!t&&66===uh)return!0;if(uh>=51&&/native code/.test(e))return!1;var r=new rh((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[ch]=n,!(lh=r.then((function(){}))instanceof n)||!t&&sh&&!dh})),hh={CONSTRUCTOR:fh,REJECTION_EVENT:dh,SUBCLASSING:lh},ph={},vh=je,mh=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=vh(t),this.reject=vh(r)};ph.f=function(e){return new mh(e)};var yh,gh,wh,kh=Pi,bh=Td,Sh=A,Eh=L,Ph=Sn,Rh=ll,Ch=La,Ih=Md,Ah=je,Th=le,xh=fe,_h=Bd,Nh=Hd,Oh=xf.set,Mh=zf,Lh=function(e,t){var r=Zf.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))},Uh=Qf,Bh=$f,Dh=on,Kh=Xf,Fh=ph,jh="Promise",qh=hh.CONSTRUCTOR,Gh=hh.REJECTION_EVENT,Wh=hh.SUBCLASSING,Hh=Dh.getterFor(jh),Yh=Dh.set,Vh=Kh&&Kh.prototype,zh=Kh,Zh=Vh,Qh=Sh.TypeError,Jh=Sh.document,$h=Sh.process,Xh=Fh.f,ep=Xh,tp=!!(Jh&&Jh.createEvent&&Sh.dispatchEvent),rp="unhandledrejection",np=function(e){var t;return!(!xh(e)||!Th(t=e.then))&&t},ip=function(e,t){var r,n,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&cp(t),t.rejection=1),!0===s?r=o:(l&&l.enter(),r=s(o),l&&(l.exit(),i=!0)),r===e.promise?c(Qh("Promise-chain cycle")):(n=np(r))?Eh(n,r,u,c):u(r)):c(o)}catch(e){l&&!i&&l.exit(),c(e)}},op=function(e,t){e.notified||(e.notified=!0,Mh((function(){for(var r,n=e.reactions;r=n.get();)ip(r,e);e.notified=!1,t&&!e.rejection&&sp(e)})))},ap=function(e,t,r){var n,i;tp?((n=Jh.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Sh.dispatchEvent(n)):n={promise:t,reason:r},!Gh&&(i=Sh["on"+e])?i(n):e===rp&&Lh("Unhandled promise rejection",r)},sp=function(e){Eh(Oh,Sh,(function(){var t,r=e.facade,n=e.value;if(up(e)&&(t=Uh((function(){bh?$h.emit("unhandledRejection",n,r):ap(rp,r,n)})),e.rejection=bh||up(e)?2:1,t.error))throw t.value}))},up=function(e){return 1!==e.rejection&&!e.parent},cp=function(e){Eh(Oh,Sh,(function(){var t=e.facade;bh?$h.emit("rejectionHandled",t):ap("rejectionhandled",t,e.value)}))},lp=function(e,t,r){return function(n){e(t,n,r)}},dp=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,op(e,!0))},fp=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw Qh("Promise can't be resolved itself");var n=np(t);n?Mh((function(){var r={done:!1};try{Eh(n,t,lp(fp,r,e),lp(dp,r,e))}catch(t){dp(r,t,e)}})):(e.value=t,e.state=1,op(e,!1))}catch(t){dp({done:!1},t,e)}}};if(qh&&(Zh=(zh=function(e){_h(this,Zh),Ah(e),Eh(yh,this);var t=Hh(this);try{e(lp(fp,t),lp(dp,t))}catch(e){dp(t,e)}}).prototype,(yh=function(e){Yh(this,{type:jh,done:!1,notified:!1,parent:!1,reactions:new Bh,rejection:!1,state:0,value:void 0})}).prototype=Ph(Zh,"then",(function(e,t){var r=Hh(this),n=Xh(Nh(this,zh));return r.parent=!0,n.ok=!Th(e)||e,n.fail=Th(t)&&t,n.domain=bh?$h.domain:void 0,0==r.state?r.reactions.add(n):Mh((function(){ip(n,r)})),n.promise})),gh=function(){var e=new yh,t=Hh(e);this.promise=e,this.resolve=lp(fp,t),this.reject=lp(dp,t)},Fh.f=Xh=function(e){return e===zh||undefined===e?new gh(e):ep(e)},Th(Kh)&&Vh!==Object.prototype)){wh=Vh.then,Wh||Ph(Vh,"then",(function(e,t){var r=this;return new zh((function(e,t){Eh(wh,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete Vh.constructor}catch(e){}Rh&&Rh(Vh,Zh)}kh({global:!0,wrap:!0,forced:qh},{Promise:zh}),Ch(zh,jh,!1),Ih(jh);var hp=_c,pp=Et("iterator"),vp=Array.prototype,mp=function(e){return void 0!==e&&(hp.Array===e||vp[pp]===e)},yp=Ui,gp=Ge,wp=_c,kp=Et("iterator"),bp=function(e){if(null!=e)return gp(e,kp)||gp(e,"@@iterator")||wp[yp(e)]},Sp=L,Ep=je,Pp=nr,Rp=Be,Cp=bp,Ip=A.TypeError,Ap=function(e,t){var r=arguments.length<2?Cp(e):t;if(Ep(r))return Pp(Sp(r,e));throw Ip(Rp(e)+" is not iterable")},Tp=L,xp=nr,_p=Ge,Np=function(e,t,r){var n,i;xp(e);try{if(!(n=_p(e,"return"))){if("throw"===t)throw r;return r}n=Tp(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return xp(n),r},Op=Ka,Mp=L,Lp=nr,Up=Be,Bp=mp,Dp=Ln,Kp=ye,Fp=Ap,jp=bp,qp=Np,Gp=A.TypeError,Wp=function(e,t){this.stopped=e,this.result=t},Hp=Wp.prototype,Yp=function(e,t,r){var n,i,o,a,s,u,c,l=r&&r.that,d=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),p=Op(t,l),v=function(e){return n&&qp(n,"normal",e),new Wp(!0,e)},m=function(e){return d?(Lp(e),h?p(e[0],e[1],v):p(e[0],e[1])):h?p(e,v):p(e)};if(f)n=e;else{if(!(i=jp(e)))throw Gp(Up(e)+" is not iterable");if(Bp(i)){for(o=0,a=Dp(e);a>o;o++)if((s=m(e[o]))&&Kp(Hp,s))return s;return new Wp(!1)}n=Fp(e,i)}for(u=n.next;!(c=Mp(u,n)).done;){try{s=m(c.value)}catch(e){qp(n,"throw",e)}if("object"==typeof s&&s&&Kp(Hp,s))return s}return new Wp(!1)},Vp=Et("iterator"),zp=!1;try{var Zp=0,Qp={next:function(){return{done:!!Zp++}},return:function(){zp=!0}};Qp[Vp]=function(){return this},Array.from(Qp,(function(){throw 2}))}catch(e){}var Jp=function(e,t){if(!t&&!zp)return!1;var r=!1;try{var n={};n[Vp]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},$p=Xf,Xp=hh.CONSTRUCTOR||!Jp((function(e){$p.all(e).then(void 0,(function(){}))})),ev=L,tv=je,rv=ph,nv=Qf,iv=Yp;Pi({target:"Promise",stat:!0,forced:Xp},{all:function(e){var t=this,r=rv.f(t),n=r.resolve,i=r.reject,o=nv((function(){var r=tv(t.resolve),o=[],a=0,s=1;iv(e,(function(e){var u=a++,c=!1;s++,ev(r,t,e).then((function(e){c||(c=!0,o[u]=e,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise}});var ov=Pi,av=hh.CONSTRUCTOR,sv=Xf,uv=me,cv=le,lv=Sn,dv=sv&&sv.prototype;if(ov({target:"Promise",proto:!0,forced:av,real:!0},{catch:function(e){return this.then(void 0,e)}}),cv(sv)){var fv=uv("Promise").prototype.catch;dv.catch!==fv&&lv(dv,"catch",fv,{unsafe:!0})}var hv=L,pv=je,vv=ph,mv=Qf,yv=Yp;Pi({target:"Promise",stat:!0,forced:Xp},{race:function(e){var t=this,r=vv.f(t),n=r.reject,i=mv((function(){var i=pv(t.resolve);yv(e,(function(e){hv(i,t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var gv=L,wv=ph;Pi({target:"Promise",stat:!0,forced:hh.CONSTRUCTOR},{reject:function(e){var t=wv.f(this);return gv(t.reject,void 0,e),t.promise}});var kv=nr,bv=fe,Sv=ph,Ev=function(e,t){if(kv(e),bv(t)&&t.constructor===e)return t;var r=Sv.f(e);return(0,r.resolve)(t),r.promise},Pv=Pi,Rv=hh.CONSTRUCTOR,Cv=Ev;me("Promise"),Pv({target:"Promise",stat:!0,forced:Rv},{resolve:function(e){return Cv(this,e)}});var Iv=x,Av=function(e,t){var r=[][e];return!!r&&Iv((function(){r.call(null,t||function(){return 1},1)}))},Tv=ts.forEach,xv=Av("forEach")?[].forEach:function(e){return Tv(this,e,arguments.length>1?arguments[1]:void 0)},_v=A,Nv=od,Ov=ud,Mv=xv,Lv=yr,Uv=function(e){if(e&&e.forEach!==Mv)try{Lv(e,"forEach",Mv)}catch(t){e.forEach=Mv}};for(var Bv in Nv)Nv[Bv]&&Uv(_v[Bv]&&_v[Bv].prototype);Uv(Ov),Pi({global:!0},{globalThis:A});!function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var h="suspendedStart",p="executing",v="completed",m={};function y(){}function g(){}function w(){}var k={};l(k,s,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(_([])));S&&S!==n&&i.call(S,s)&&(k=S);var E=w.prototype=y.prototype=Object.create(k);function P(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,a,s,u){var c=f(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(e,t,r){var n=h;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=I(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?v:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}function I(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function _(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return g.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},P(R.prototype),l(R.prototype,u,(function(){return this})),e.AsyncIterator=R,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new R(d(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(E),l(E,c,"Generator"),l(E,s,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=_,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}});var Dv=ri,Kv=ce,Fv=T,jv=eo;Pi({target:"Object",stat:!0,sham:!_},{getOwnPropertyDescriptors:function(e){for(var t,r,n=Kv(e),i=Fv.f,o=Dv(n),a={},s=0;o.length>s;)void 0!==(r=i(n,t=o[s++]))&&jv(a,t,r);return a}}),Pi({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var qv=le,Gv=fe,Wv=ll,Hv=function(e,t,r){var n,i;return Wv&&qv(n=t.constructor)&&n!==r&&Gv(i=n.prototype)&&i!==r.prototype&&Wv(e,i),e},Yv=z(1..valueOf),Vv="\t\n\v\f\r                　\u2028\u2029\ufeff",zv=ae,Zv=Do,Qv=z("".replace),Jv="[\t\n\v\f\r                　\u2028\u2029\ufeff]",$v=RegExp("^"+Jv+Jv+"*"),Xv=RegExp(Jv+Jv+"*$"),em=function(e){return function(t){var r=Zv(zv(t));return 1&e&&(r=Qv(r,$v,"")),2&e&&(r=Qv(r,Xv,"")),r}},tm={start:em(1),end:em(2),trim:em(3)},rm=_,nm=A,im=z,om=mi,am=Sn,sm=st,um=Hv,cm=ye,lm=Le,dm=Nt,fm=x,hm=En.f,pm=T.f,vm=Jt.f,mm=Yv,ym=tm.trim,gm="Number",wm=nm.Number,km=wm.prototype,bm=nm.TypeError,Sm=im("".slice),Em=im("".charCodeAt),Pm=function(e){var t=dm(e,"number");return"bigint"==typeof t?t:Rm(t)},Rm=function(e){var t,r,n,i,o,a,s,u,c=dm(e,"number");if(lm(c))throw bm("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=ym(c),43===(t=Em(c,0))||45===t){if(88===(r=Em(c,2))||120===r)return NaN}else if(48===t){switch(Em(c,1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(a=(o=Sm(c,2)).length,s=0;s<a;s++)if((u=Em(o,s))<48||u>i)return NaN;return parseInt(o,n)}return+c};if(om(gm,!wm(" 0o1")||!wm("0b1")||wm("+0x1"))){for(var Cm,Im=function(e){var t=arguments.length<1?0:wm(Pm(e)),r=this;return cm(km,r)&&fm((function(){mm(r)}))?um(Object(t),r,Im):t},Am=rm?hm(wm):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Tm=0;Am.length>Tm;Tm++)sm(wm,Cm=Am[Tm])&&!sm(Im,Cm)&&vm(Im,Cm,pm(wm,Cm));Im.prototype=km,km.constructor=Im,am(nm,gm,Im)}var xm=Pi,_m=A,Nm=x,Om=Ci,Mm=fe,Lm=it,Um=Ln,Bm=eo,Dm=Va,Km=io,Fm=Re,jm=Et("isConcatSpreadable"),qm=9007199254740991,Gm="Maximum allowed index exceeded",Wm=_m.TypeError,Hm=Fm>=51||!Nm((function(){var e=[];return e[jm]=!1,e.concat()[0]!==e})),Ym=Km("concat"),Vm=function(e){if(!Mm(e))return!1;var t=e[jm];return void 0!==t?!!t:Om(e)};xm({target:"Array",proto:!0,arity:1,forced:!Hm||!Ym},{concat:function(e){var t,r,n,i,o,a=Lm(this),s=Dm(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(Vm(o=-1===t?a:arguments[t])){if(u+(i=Um(o))>qm)throw Wm(Gm);for(r=0;r<i;r++,u++)r in o&&Bm(s,u,o[r])}else{if(u>=qm)throw Wm(Gm);Bm(s,u++,o)}return s.length=u,s}});var zm=Pi,Zm=Math.ceil,Qm=Math.floor;zm({target:"Math",stat:!0},{trunc:function(e){return(e>0?Qm:Zm)(e)}});var Jm=Pi,$m=ie,Xm=ce,ey=Av,ty=z([].join),ry=$m!=Object,ny=ey("join",",");Jm({target:"Array",proto:!0,forced:ry||!ny},{join:function(e){return ty(Xm(this),void 0===e?",":e)}});var iy=Cn,oy=Do,ay=ae,sy=A.RangeError,uy=function(e){var t=oy(ay(this)),r="",n=iy(e);if(n<0||n==1/0)throw sy("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},cy=z,ly=On,dy=Do,fy=ae,hy=cy(uy),py=cy("".slice),vy=Math.ceil,my=function(e){return function(t,r,n){var i,o,a=dy(fy(t)),s=ly(r),u=a.length,c=void 0===n?" ":dy(n);return s<=u||""==c?a:((o=hy(c,vy((i=s-u)/c.length))).length>i&&(o=py(o,0,i)),e?a+o:o+a)}},yy={start:my(!1),end:my(!0)},gy=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(ge),wy=yy.start;Pi({target:"String",proto:!0,forced:gy},{padStart:function(e){return wy(this,e,arguments.length>1?arguments[1]:void 0)}});var ky=nr,by=function(){var e=ky(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Sy=L,Ey=st,Py=ye,Ry=by,Cy=RegExp.prototype,Iy=function(e){var t=e.flags;return void 0!==t||"flags"in Cy||Ey(e,"flags")||!Py(Cy,e)?t:Sy(Ry,e)},Ay=Pr.PROPER,Ty=Sn,xy=nr,_y=Do,Ny=x,Oy=Iy,My="toString",Ly=RegExp.prototype.toString,Uy=Ny((function(){return"/a/b"!=Ly.call({source:"a",flags:"b"})})),By=Ay&&Ly.name!=My;(Uy||By)&&Ty(RegExp.prototype,My,(function(){var e=xy(this);return"/"+_y(e.source)+"/"+_y(Oy(e))}),{unsafe:!0});var Dy=x,Ky=A.RegExp,Fy=Dy((function(){var e=Ky("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),jy=Fy||Dy((function(){return!Ky("a","y").sticky})),qy={BROKEN_CARET:Fy||Dy((function(){var e=Ky("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:jy,UNSUPPORTED_Y:Fy},Gy=x,Wy=A.RegExp,Hy=Gy((function(){var e=Wy(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Yy=x,Vy=A.RegExp,zy=Yy((function(){var e=Vy("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Zy=L,Qy=z,Jy=Do,$y=by,Xy=qy,eg=ze.exports,tg=ua,rg=on.get,ng=Hy,ig=zy,og=eg("native-string-replace",String.prototype.replace),ag=RegExp.prototype.exec,sg=ag,ug=Qy("".charAt),cg=Qy("".indexOf),lg=Qy("".replace),dg=Qy("".slice),fg=function(){var e=/a/,t=/b*/g;return Zy(ag,e,"a"),Zy(ag,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),hg=Xy.BROKEN_CARET,pg=void 0!==/()??/.exec("")[1];(fg||pg||hg||ng||ig)&&(sg=function(e){var t,r,n,i,o,a,s,u=this,c=rg(u),l=Jy(e),d=c.raw;if(d)return d.lastIndex=u.lastIndex,t=Zy(sg,d,l),u.lastIndex=d.lastIndex,t;var f=c.groups,h=hg&&u.sticky,p=Zy($y,u),v=u.source,m=0,y=l;if(h&&(p=lg(p,"y",""),-1===cg(p,"g")&&(p+="g"),y=dg(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==ug(l,u.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,m++),r=new RegExp("^(?:"+v+")",p)),pg&&(r=new RegExp("^"+v+"$(?!\\s)",p)),fg&&(n=u.lastIndex),i=Zy(ag,h?r:u,y),h?i?(i.input=dg(i.input,m),i[0]=dg(i[0],m),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:fg&&i&&(u.lastIndex=u.global?i.index+i[0].length:n),pg&&i&&i.length>1&&Zy(og,i[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&f)for(i.groups=a=tg(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=i[s[1]];return i});var vg=sg;Pi({target:"RegExp",proto:!0,forced:/./.exec!==vg},{exec:vg});var mg=z,yg=Sn,gg=vg,wg=x,kg=Et,bg=yr,Sg=kg("species"),Eg=RegExp.prototype,Pg=function(e,t,r,n){var i=kg(e),o=!wg((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!wg((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[Sg]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return t=!0,null},r[i](""),!t}));if(!o||!a||r){var s=mg(/./[i]),u=t(i,""[e],(function(e,t,r,n,i){var a=mg(e),u=t.exec;return u===gg||u===Eg.exec?o&&!i?{done:!0,value:s(t,r,n)}:{done:!0,value:a(r,t,n)}:{done:!1}}));yg(String.prototype,e,u[0]),yg(Eg,i,u[1])}n&&bg(Eg[i],"sham",!0)},Rg=fe,Cg=$,Ig=Et("match"),Ag=function(e){var t;return Rg(e)&&(void 0!==(t=e[Ig])?!!t:"RegExp"==Cg(e))},Tg=Jl.charAt,xg=function(e,t,r){return t+(r?Tg(e,t).length:1)},_g=L,Ng=nr,Og=le,Mg=$,Lg=vg,Ug=A.TypeError,Bg=function(e,t){var r=e.exec;if(Og(r)){var n=_g(r,e,t);return null!==n&&Ng(n),n}if("RegExp"===Mg(e))return _g(Lg,e,t);throw Ug("RegExp#exec called on incompatible receiver")},Dg=Iu,Kg=L,Fg=z,jg=Pg,qg=Ag,Gg=nr,Wg=ae,Hg=Hd,Yg=xg,Vg=On,zg=Do,Zg=Ge,Qg=va,Jg=Bg,$g=vg,Xg=x,ew=qy.UNSUPPORTED_Y,tw=4294967295,rw=Math.min,nw=[].push,iw=Fg(/./.exec),ow=Fg(nw),aw=Fg("".slice),sw=!Xg((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));jg("split",(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=zg(Wg(this)),i=void 0===r?tw:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!qg(e))return Kg(t,n,e,i);for(var o,a,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,c+"g");(o=Kg($g,d,n))&&!((a=d.lastIndex)>l&&(ow(u,aw(n,l,o.index)),o.length>1&&o.index<n.length&&Dg(nw,u,Qg(o,1)),s=o[0].length,l=a,u.length>=i));)d.lastIndex===o.index&&d.lastIndex++;return l===n.length?!s&&iw(d,"")||ow(u,""):ow(u,aw(n,l)),u.length>i?Qg(u,0,i):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:Kg(t,this,e,r)}:t,[function(t,r){var i=Wg(this),o=null==t?void 0:Zg(t,e);return o?Kg(o,t,i,r):Kg(n,zg(i),t,r)},function(e,i){var o=Gg(this),a=zg(e),s=r(n,o,a,i,n!==t);if(s.done)return s.value;var u=Hg(o,RegExp),c=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(ew?"g":"y"),d=new u(ew?"^(?:"+o.source+")":o,l),f=void 0===i?tw:i>>>0;if(0===f)return[];if(0===a.length)return null===Jg(d,a)?[a]:[];for(var h=0,p=0,v=[];p<a.length;){d.lastIndex=ew?0:p;var m,y=Jg(d,ew?aw(a,p):a);if(null===y||(m=rw(Vg(d.lastIndex+(ew?p:0)),a.length))===h)p=Yg(a,p,c);else{if(ow(v,aw(a,h,p)),v.length===f)return v;for(var g=1;g<=y.length-1;g++)if(ow(v,y[g]),v.length===f)return v;p=h=m}}return ow(v,aw(a,h)),v}]}),!sw,ew);var uw=ts.map;Pi({target:"Array",proto:!0,forced:!io("map")},{map:function(e){return uw(this,e,arguments.length>1?arguments[1]:void 0)}});var cw=it,lw=qo;Pi({target:"Object",stat:!0,forced:x((function(){lw(1)}))},{keys:function(e){return lw(cw(e))}});var dw=Iu,fw=je,hw=nr;Pi({target:"Reflect",stat:!0,forced:!x((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,r){return dw(fw(e),t,hw(r))}});var pw=Pi,vw=Xf,mw=x,yw=me,gw=le,ww=Hd,kw=Ev,bw=Sn,Sw=vw&&vw.prototype;if(pw({target:"Promise",proto:!0,real:!0,forced:!!vw&&mw((function(){Sw.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=ww(this,yw("Promise")),r=gw(e);return this.then(r?function(r){return kw(t,e()).then((function(){return r}))}:e,r?function(r){return kw(t,e()).then((function(){throw r}))}:e)}}),gw(vw)){var Ew=yw("Promise").prototype.finally;Sw.finally!==Ew&&bw(Sw,"finally",Ew,{unsafe:!0})}var Pw=L;Pi({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Pw(URL.prototype.toString,this)}});var Rw=Fn.includes,Cw=xc;Pi({target:"Array",proto:!0,forced:x((function(){return!Array(1).includes()}))},{includes:function(e){return Rw(this,e,arguments.length>1?arguments[1]:void 0)}}),Cw("includes");var Iw={exports:{}},Aw=x((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Tw=x,xw=fe,_w=$,Nw=Aw,Ow=Object.isExtensible,Mw=Tw((function(){Ow(1)}))||Nw?function(e){return!!xw(e)&&((!Nw||"ArrayBuffer"!=_w(e))&&(!Ow||Ow(e)))}:Ow,Lw=!x((function(){return Object.isExtensible(Object.preventExtensions({}))})),Uw=Pi,Bw=z,Dw=Fr,Kw=fe,Fw=st,jw=Jt.f,qw=En,Gw=ca,Ww=Mw,Hw=Lw,Yw=!1,Vw=ft("meta"),zw=0,Zw=function(e){jw(e,Vw,{value:{objectID:"O"+zw++,weakData:{}}})},Qw=Iw.exports={enable:function(){Qw.enable=function(){},Yw=!0;var e=qw.f,t=Bw([].splice),r={};r[Vw]=1,e(r).length&&(qw.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===Vw){t(n,i,1);break}return n},Uw({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Gw.f}))},fastKey:function(e,t){if(!Kw(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Fw(e,Vw)){if(!Ww(e))return"F";if(!t)return"E";Zw(e)}return e[Vw].objectID},getWeakData:function(e,t){if(!Fw(e,Vw)){if(!Ww(e))return!0;if(!t)return!1;Zw(e)}return e[Vw].weakData},onFreeze:function(e){return Hw&&Yw&&Ww(e)&&!Fw(e,Vw)&&Zw(e),e}};Dw[Vw]=!0;var Jw=Pi,$w=A,Xw=z,ek=mi,tk=Sn,rk=Iw.exports,nk=Yp,ik=Bd,ok=le,ak=fe,sk=x,uk=Jp,ck=La,lk=Hv,dk=function(e,t,r){var n=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=n?"set":"add",a=$w[e],s=a&&a.prototype,u=a,c={},l=function(e){var t=Xw(s[e]);tk(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ak(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!ak(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ak(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(ek(e,!ok(a)||!(i||s.forEach&&!sk((function(){(new a).entries().next()})))))u=r.getConstructor(t,e,n,o),rk.enable();else if(ek(e,!0)){var d=new u,f=d[o](i?{}:-0,1)!=d,h=sk((function(){d.has(1)})),p=uk((function(e){new a(e)})),v=!i&&sk((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((u=t((function(e,t){ik(e,s);var r=lk(new a,e,u);return null!=t&&nk(t,r[o],{that:r,AS_ENTRIES:n}),r}))).prototype=s,s.constructor=u),(h||v)&&(l("delete"),l("has"),n&&l("get")),(v||f)&&l(o),i&&s.clear&&delete s.clear}return c[e]=u,Jw({global:!0,forced:u!=a},c),ck(u,e),i||r.setStrong(u,e,n),u},fk=Sn,hk=function(e,t,r){for(var n in t)fk(e,n,t[n],r);return e},pk=Jt.f,vk=ua,mk=hk,yk=Ka,gk=Bd,wk=Yp,kk=xl,bk=Md,Sk=_,Ek=Iw.exports.fastKey,Pk=on.set,Rk=on.getterFor,Ck={getConstructor:function(e,t,r,n){var i=e((function(e,i){gk(e,o),Pk(e,{type:t,index:vk(null),first:void 0,last:void 0,size:0}),Sk||(e.size=0),null!=i&&wk(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,a=Rk(t),s=function(e,t,r){var n,i,o=a(e),s=u(e,t);return s?s.value=r:(o.last=s={index:i=Ek(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),Sk?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},u=function(e,t){var r,n=a(e),i=Ek(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return mk(o,{clear:function(){for(var e=a(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,Sk?e.size=0:this.size=0},delete:function(e){var t=this,r=a(t),n=u(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),Sk?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=a(this),n=yk(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),mk(o,r?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Sk&&pk(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=Rk(t),o=Rk(n);kk(e,t,(function(e,t){Pk(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),bk(t)}};dk("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Ck),dk("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Ck);var Ik=nr,Ak=Np,Tk=Ka,xk=L,_k=it,Nk=function(e,t,r,n){try{return n?t(Ik(r)[0],r[1]):t(r)}catch(t){Ak(e,"throw",t)}},Ok=mp,Mk=Qi,Lk=Ln,Uk=eo,Bk=Ap,Dk=bp,Kk=A.Array,Fk=function(e){var t=_k(e),r=Mk(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=void 0!==i;o&&(i=Tk(i,n>2?arguments[2]:void 0));var a,s,u,c,l,d,f=Dk(t),h=0;if(!f||this==Kk&&Ok(f))for(a=Lk(t),s=r?new this(a):Kk(a);a>h;h++)d=o?i(t[h],h):t[h],Uk(s,h,d);else for(l=(c=Bk(t,f)).next,s=r?new this:[];!(u=xk(l,c)).done;h++)d=o?Nk(c,i,[u.value,h],!0):u.value,Uk(s,h,d);return s.length=h,s},jk=Fk;Pi({target:"Array",stat:!0,forced:!Jp((function(e){Array.from(e)}))},{from:jk});var qk=_,Gk=z,Wk=qo,Hk=ce,Yk=Gk(U.f),Vk=Gk([].push),zk=function(e){return function(t){for(var r,n=Hk(t),i=Wk(n),o=i.length,a=0,s=[];o>a;)r=i[a++],qk&&!Yk(n,r)||Vk(s,e?[r,n[r]]:n[r]);return s}},Zk={entries:zk(!0),values:zk(!1)}.entries;Pi({target:"Object",stat:!0},{entries:function(e){return Zk(e)}});var Qk=z,Jk=it,$k=Math.floor,Xk=Qk("".charAt),eb=Qk("".replace),tb=Qk("".slice),rb=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,nb=/\$([$&'`]|\d{1,2})/g,ib=function(e,t,r,n,i,o){var a=r+e.length,s=n.length,u=nb;return void 0!==i&&(i=Jk(i),u=rb),eb(o,u,(function(o,u){var c;switch(Xk(u,0)){case"$":return"$";case"&":return e;case"`":return tb(t,0,r);case"'":return tb(t,a);case"<":c=i[tb(u,1,-1)];break;default:var l=+u;if(0===l)return o;if(l>s){var d=$k(l/10);return 0===d?o:d<=s?void 0===n[d-1]?Xk(u,1):n[d-1]+Xk(u,1):o}c=n[l-1]}return void 0===c?"":c}))},ob=Iu,ab=L,sb=z,ub=Pg,cb=x,lb=nr,db=le,fb=Cn,hb=On,pb=Do,vb=ae,mb=xg,yb=Ge,gb=ib,wb=Bg,kb=Et("replace"),bb=Math.max,Sb=Math.min,Eb=sb([].concat),Pb=sb([].push),Rb=sb("".indexOf),Cb=sb("".slice),Ib="$0"==="a".replace(/./,"$0"),Ab=!!/./[kb]&&""===/./[kb]("a","$0");ub("replace",(function(e,t,r){var n=Ab?"$":"$0";return[function(e,r){var n=vb(this),i=null==e?void 0:yb(e,kb);return i?ab(i,e,n,r):ab(t,pb(n),e,r)},function(e,i){var o=lb(this),a=pb(e);if("string"==typeof i&&-1===Rb(i,n)&&-1===Rb(i,"$<")){var s=r(t,o,a,i);if(s.done)return s.value}var u=db(i);u||(i=pb(i));var c=o.global;if(c){var l=o.unicode;o.lastIndex=0}for(var d=[];;){var f=wb(o,a);if(null===f)break;if(Pb(d,f),!c)break;""===pb(f[0])&&(o.lastIndex=mb(a,hb(o.lastIndex),l))}for(var h,p="",v=0,m=0;m<d.length;m++){for(var y=pb((f=d[m])[0]),g=bb(Sb(fb(f.index),a.length),0),w=[],k=1;k<f.length;k++)Pb(w,void 0===(h=f[k])?h:String(h));var b=f.groups;if(u){var S=Eb([y],w,g,a);void 0!==b&&Pb(S,b);var E=pb(ob(i,void 0,S))}else E=gb(y,a,g,w,b,i);g>=v&&(p+=Cb(a,v,g)+E,v=g+y.length)}return p+Cb(a,v)}]}),!!cb((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Ib||Ab);var Tb=_,xb=z,_b=L,Nb=x,Ob=qo,Mb=Qn,Lb=U,Ub=it,Bb=ie,Db=Object.assign,Kb=Object.defineProperty,Fb=xb([].concat),jb=!Db||Nb((function(){if(Tb&&1!==Db({b:1},Db(Kb({},"a",{enumerable:!0,get:function(){Kb(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=Db({},e)[r]||Ob(Db({},t)).join("")!=n}))?function(e,t){for(var r=Ub(e),n=arguments.length,i=1,o=Mb.f,a=Lb.f;n>i;)for(var s,u=Bb(arguments[i++]),c=o?Fb(Ob(u),o(u)):Ob(u),l=c.length,d=0;l>d;)s=c[d++],Tb&&!_b(a,u,s)||(r[s]=u[s]);return r}:Db,qb=jb;Pi({target:"Object",stat:!0,arity:2,forced:Object.assign!==qb},{assign:qb});var Gb,Wb=Ag,Hb=A.TypeError,Yb=function(e){if(Wb(e))throw Hb("The method doesn't accept regular expressions");return e},Vb=Et("match"),zb=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Vb]=!1,"/./"[e](t)}catch(e){}}return!1},Zb=Pi,Qb=z,Jb=T.f,$b=On,Xb=Do,eS=Yb,tS=ae,rS=zb,nS=Qb("".startsWith),iS=Qb("".slice),oS=Math.min,aS=rS("startsWith");Zb({target:"String",proto:!0,forced:!!(aS||(Gb=Jb(String.prototype,"startsWith"),!Gb||Gb.writable))&&!aS},{startsWith:function(e){var t=Xb(tS(this));eS(e);var r=$b(oS(arguments.length>1?arguments[1]:void 0,t.length)),n=Xb(e);return nS?nS(t,n,r):iS(t,r,r+n.length)===n}});var sS=Pi,uS=Yb,cS=ae,lS=Do,dS=zb,fS=z("".indexOf);sS({target:"String",proto:!0,forced:!dS("includes")},{includes:function(e){return!!~fS(lS(cS(this)),lS(uS(e)),arguments.length>1?arguments[1]:void 0)}});var hS=x,pS=Et("iterator"),vS=!hS((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[pS]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),mS=gr.exports,yS=Jt,gS=z,wS=2147483647,kS=/[^\0-\u007E]/,bS=/[.\u3002\uFF0E\uFF61]/g,SS="Overflow: input needs wider integers to process",ES=A.RangeError,PS=gS(bS.exec),RS=Math.floor,CS=String.fromCharCode,IS=gS("".charCodeAt),AS=gS([].join),TS=gS([].push),xS=gS("".replace),_S=gS("".split),NS=gS("".toLowerCase),OS=function(e){return e+22+75*(e<26)},MS=function(e,t,r){var n=0;for(e=r?RS(e/700):e>>1,e+=RS(e/t);e>455;)e=RS(e/35),n+=36;return RS(n+36*e/(e+38))},LS=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=IS(e,r++);if(i>=55296&&i<=56319&&r<n){var o=IS(e,r++);56320==(64512&o)?TS(t,((1023&i)<<10)+(1023&o)+65536):(TS(t,i),r--)}else TS(t,i)}return t}(e);var r,n,i=e.length,o=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&TS(t,CS(n));var u=t.length,c=u;for(u&&TS(t,"-");c<i;){var l=wS;for(r=0;r<e.length;r++)(n=e[r])>=o&&n<l&&(l=n);var d=c+1;if(l-o>RS((wS-a)/d))throw ES(SS);for(a+=(l-o)*d,o=l,r=0;r<e.length;r++){if((n=e[r])<o&&++a>wS)throw ES(SS);if(n==o){for(var f=a,h=36;;){var p=h<=s?1:h>=s+26?26:h-s;if(f<p)break;var v=f-p,m=36-p;TS(t,CS(OS(p+v%m))),f=RS(v/m),h+=36}TS(t,CS(OS(f))),s=MS(a,d,c==u),a=0,c++}}a++,o++}return AS(t,"")},US=va,BS=Math.floor,DS=function(e,t){var r=e.length,n=BS(r/2);return r<8?KS(e,t):FS(e,DS(US(e,0,n),t),DS(US(e,n),t),t)},KS=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},FS=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e},jS=DS,qS=Pi,GS=A,WS=L,HS=z,YS=_,VS=vS,zS=Sn,ZS=hk,QS=La,JS=rl,$S=on,XS=Bd,eE=le,tE=st,rE=Ka,nE=Ui,iE=nr,oE=fe,aE=Do,sE=ua,uE=q,cE=Ap,lE=bp,dE=Vd,fE=jS,hE=Et("iterator"),pE="URLSearchParams",vE="URLSearchParamsIterator",mE=$S.set,yE=$S.getterFor(pE),gE=$S.getterFor(vE),wE=Object.getOwnPropertyDescriptor,kE=function(e){if(!YS)return GS[e];var t=wE(GS,e);return t&&t.value},bE=kE("fetch"),SE=kE("Request"),EE=kE("Headers"),PE=SE&&SE.prototype,RE=EE&&EE.prototype,CE=GS.RegExp,IE=GS.TypeError,AE=GS.decodeURIComponent,TE=GS.encodeURIComponent,xE=HS("".charAt),_E=HS([].join),NE=HS([].push),OE=HS("".replace),ME=HS([].shift),LE=HS([].splice),UE=HS("".split),BE=HS("".slice),DE=/\+/g,KE=Array(4),FE=function(e){return KE[e-1]||(KE[e-1]=CE("((?:%[\\da-f]{2}){"+e+"})","gi"))},jE=function(e){try{return AE(e)}catch(t){return e}},qE=function(e){var t=OE(e,DE," "),r=4;try{return AE(t)}catch(e){for(;r;)t=OE(t,FE(r--),jE);return t}},GE=/[!'()~]|%20/g,WE={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},HE=function(e){return WE[e]},YE=function(e){return OE(TE(e),GE,HE)},VE=JS((function(e,t){mE(this,{type:vE,iterator:cE(yE(e).entries),kind:t})}),"Iterator",(function(){var e=gE(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),!0),zE=function(e){this.entries=[],this.url=null,void 0!==e&&(oE(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===xE(e,0)?BE(e,1):e:aE(e)))};zE.prototype={type:pE,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,a,s,u=lE(e);if(u)for(r=(t=cE(e,u)).next;!(n=WS(r,t)).done;){if(o=(i=cE(iE(n.value))).next,(a=WS(o,i)).done||(s=WS(o,i)).done||!WS(o,i).done)throw IE("Expected sequence with length 2");NE(this.entries,{key:aE(a.value),value:aE(s.value)})}else for(var c in e)tE(e,c)&&NE(this.entries,{key:c,value:aE(e[c])})},parseQuery:function(e){if(e)for(var t,r,n=UE(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=UE(t,"="),NE(this.entries,{key:qE(ME(r)),value:qE(_E(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],NE(r,YE(e.key)+"="+YE(e.value));return _E(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ZE=function(){XS(this,QE);var e=arguments.length>0?arguments[0]:void 0;mE(this,new zE(e))},QE=ZE.prototype;if(ZS(QE,{append:function(e,t){dE(arguments.length,2);var r=yE(this);NE(r.entries,{key:aE(e),value:aE(t)}),r.updateURL()},delete:function(e){dE(arguments.length,1);for(var t=yE(this),r=t.entries,n=aE(e),i=0;i<r.length;)r[i].key===n?LE(r,i,1):i++;t.updateURL()},get:function(e){dE(arguments.length,1);for(var t=yE(this).entries,r=aE(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){dE(arguments.length,1);for(var t=yE(this).entries,r=aE(e),n=[],i=0;i<t.length;i++)t[i].key===r&&NE(n,t[i].value);return n},has:function(e){dE(arguments.length,1);for(var t=yE(this).entries,r=aE(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){dE(arguments.length,1);for(var r,n=yE(this),i=n.entries,o=!1,a=aE(e),s=aE(t),u=0;u<i.length;u++)(r=i[u]).key===a&&(o?LE(i,u--,1):(o=!0,r.value=s));o||NE(i,{key:a,value:s}),n.updateURL()},sort:function(){var e=yE(this);fE(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=yE(this).entries,n=rE(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new VE(this,"keys")},values:function(){return new VE(this,"values")},entries:function(){return new VE(this,"entries")}},{enumerable:!0}),zS(QE,hE,QE.entries,{name:"entries"}),zS(QE,"toString",(function(){return yE(this).serialize()}),{enumerable:!0}),QS(ZE,pE),qS({global:!0,forced:!VS},{URLSearchParams:ZE}),!VS&&eE(EE)){var JE=HS(RE.has),$E=HS(RE.set),XE=function(e){if(oE(e)){var t,r=e.body;if(nE(r)===pE)return t=e.headers?new EE(e.headers):new EE,JE(t,"content-type")||$E(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),sE(e,{body:uE(0,aE(r)),headers:uE(0,t)})}return e};if(eE(bE)&&qS({global:!0,enumerable:!0,noTargetGet:!0,forced:!0},{fetch:function(e){return bE(e,arguments.length>1?XE(arguments[1]):{})}}),eE(SE)){var eP=function(e){return XS(this,PE),new SE(e,arguments.length>1?XE(arguments[1]):{})};PE.constructor=eP,eP.prototype=PE,qS({global:!0,forced:!0,noTargetGet:!0},{Request:eP})}}var tP,rP=Pi,nP=_,iP=vS,oP=A,aP=Ka,sP=z,uP=Sn,cP=function(e,t,r){return r.get&&mS(r.get,t,{getter:!0}),r.set&&mS(r.set,t,{setter:!0}),yS.f(e,t,r)},lP=Bd,dP=st,fP=jb,hP=Fk,pP=va,vP=Jl.codeAt,mP=function(e){var t,r,n=[],i=_S(xS(NS(e),bS,"."),".");for(t=0;t<i.length;t++)r=i[t],TS(n,PS(kS,r)?"xn--"+LS(r):r);return AS(n,".")},yP=Do,gP=La,wP=Vd,kP={URLSearchParams:ZE,getState:yE},bP=on,SP=bP.set,EP=bP.getterFor("URL"),PP=kP.URLSearchParams,RP=kP.getState,CP=oP.URL,IP=oP.TypeError,AP=oP.parseInt,TP=Math.floor,xP=Math.pow,_P=sP("".charAt),NP=sP(/./.exec),OP=sP([].join),MP=sP(1..toString),LP=sP([].pop),UP=sP([].push),BP=sP("".replace),DP=sP([].shift),KP=sP("".split),FP=sP("".slice),jP=sP("".toLowerCase),qP=sP([].unshift),GP="Invalid scheme",WP="Invalid host",HP="Invalid port",YP=/[a-z]/i,VP=/[\d+-.a-z]/i,zP=/\d/,ZP=/^0x/i,QP=/^[0-7]+$/,JP=/^\d+$/,$P=/^[\da-f]+$/i,XP=/[\0\t\n\r #%/:<>?@[\\\]^|]/,eR=/[\0\t\n\r #/:<>?@[\\\]^|]/,tR=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,rR=/[\t\n\r]/g,nR=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)qP(t,e%256),e=TP(e/256);return OP(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=MP(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},iR={},oR=fP({},iR,{" ":1,'"':1,"<":1,">":1,"`":1}),aR=fP({},oR,{"#":1,"?":1,"{":1,"}":1}),sR=fP({},aR,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),uR=function(e,t){var r=vP(e,0);return r>32&&r<127&&!dP(t,e)?e:encodeURIComponent(e)},cR={ftp:21,file:null,http:80,https:443,ws:80,wss:443},lR=function(e,t){var r;return 2==e.length&&NP(YP,_P(e,0))&&(":"==(r=_P(e,1))||!t&&"|"==r)},dR=function(e){var t;return e.length>1&&lR(FP(e,0,2))&&(2==e.length||"/"===(t=_P(e,2))||"\\"===t||"?"===t||"#"===t)},fR=function(e){return"."===e||"%2e"===jP(e)},hR={},pR={},vR={},mR={},yR={},gR={},wR={},kR={},bR={},SR={},ER={},PR={},RR={},CR={},IR={},AR={},TR={},xR={},_R={},NR={},OR={},MR=function(e,t,r){var n,i,o,a=yP(e);if(t){if(i=this.parse(a))throw IP(i);this.searchParams=null}else{if(void 0!==r&&(n=new MR(r,!0)),i=this.parse(a,null,n))throw IP(i);(o=RP(new PP)).bindURL(this),this.searchParams=o}};MR.prototype={type:"URL",parse:function(e,t,r){var n,i,o,a,s,u=this,c=t||hR,l=0,d="",f=!1,h=!1,p=!1;for(e=yP(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=BP(e,tR,"")),e=BP(e,rR,""),n=hP(e);l<=n.length;){switch(i=n[l],c){case hR:if(!i||!NP(YP,i)){if(t)return GP;c=vR;continue}d+=jP(i),c=pR;break;case pR:if(i&&(NP(VP,i)||"+"==i||"-"==i||"."==i))d+=jP(i);else{if(":"!=i){if(t)return GP;d="",c=vR,l=0;continue}if(t&&(u.isSpecial()!=dP(cR,d)||"file"==d&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=d,t)return void(u.isSpecial()&&cR[u.scheme]==u.port&&(u.port=null));d="","file"==u.scheme?c=CR:u.isSpecial()&&r&&r.scheme==u.scheme?c=mR:u.isSpecial()?c=kR:"/"==n[l+1]?(c=yR,l++):(u.cannotBeABaseURL=!0,UP(u.path,""),c=_R)}break;case vR:if(!r||r.cannotBeABaseURL&&"#"!=i)return GP;if(r.cannotBeABaseURL&&"#"==i){u.scheme=r.scheme,u.path=pP(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,c=OR;break}c="file"==r.scheme?CR:gR;continue;case mR:if("/"!=i||"/"!=n[l+1]){c=gR;continue}c=bR,l++;break;case yR:if("/"==i){c=SR;break}c=xR;continue;case gR:if(u.scheme=r.scheme,i==tP)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=pP(r.path),u.query=r.query;else if("/"==i||"\\"==i&&u.isSpecial())c=wR;else if("?"==i)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=pP(r.path),u.query="",c=NR;else{if("#"!=i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=pP(r.path),u.path.length--,c=xR;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=pP(r.path),u.query=r.query,u.fragment="",c=OR}break;case wR:if(!u.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,c=xR;continue}c=SR}else c=bR;break;case kR:if(c=bR,"/"!=i||"/"!=_P(d,l+1))continue;l++;break;case bR:if("/"!=i&&"\\"!=i){c=SR;continue}break;case SR:if("@"==i){f&&(d="%40"+d),f=!0,o=hP(d);for(var v=0;v<o.length;v++){var m=o[v];if(":"!=m||p){var y=uR(m,sR);p?u.password+=y:u.username+=y}else p=!0}d=""}else if(i==tP||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(f&&""==d)return"Invalid authority";l-=hP(d).length+1,d="",c=ER}else d+=i;break;case ER:case PR:if(t&&"file"==u.scheme){c=AR;continue}if(":"!=i||h){if(i==tP||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(u.isSpecial()&&""==d)return WP;if(t&&""==d&&(u.includesCredentials()||null!==u.port))return;if(a=u.parseHost(d))return a;if(d="",c=TR,t)return;continue}"["==i?h=!0:"]"==i&&(h=!1),d+=i}else{if(""==d)return WP;if(a=u.parseHost(d))return a;if(d="",c=RR,t==PR)return}break;case RR:if(!NP(zP,i)){if(i==tP||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()||t){if(""!=d){var g=AP(d,10);if(g>65535)return HP;u.port=u.isSpecial()&&g===cR[u.scheme]?null:g,d=""}if(t)return;c=TR;continue}return HP}d+=i;break;case CR:if(u.scheme="file","/"==i||"\\"==i)c=IR;else{if(!r||"file"!=r.scheme){c=xR;continue}if(i==tP)u.host=r.host,u.path=pP(r.path),u.query=r.query;else if("?"==i)u.host=r.host,u.path=pP(r.path),u.query="",c=NR;else{if("#"!=i){dR(OP(pP(n,l),""))||(u.host=r.host,u.path=pP(r.path),u.shortenPath()),c=xR;continue}u.host=r.host,u.path=pP(r.path),u.query=r.query,u.fragment="",c=OR}}break;case IR:if("/"==i||"\\"==i){c=AR;break}r&&"file"==r.scheme&&!dR(OP(pP(n,l),""))&&(lR(r.path[0],!0)?UP(u.path,r.path[0]):u.host=r.host),c=xR;continue;case AR:if(i==tP||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&lR(d))c=xR;else if(""==d){if(u.host="",t)return;c=TR}else{if(a=u.parseHost(d))return a;if("localhost"==u.host&&(u.host=""),t)return;d="",c=TR}continue}d+=i;break;case TR:if(u.isSpecial()){if(c=xR,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=tP&&(c=xR,"/"!=i))continue}else u.fragment="",c=OR;else u.query="",c=NR;break;case xR:if(i==tP||"/"==i||"\\"==i&&u.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=jP(s=d))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(u.shortenPath(),"/"==i||"\\"==i&&u.isSpecial()||UP(u.path,"")):fR(d)?"/"==i||"\\"==i&&u.isSpecial()||UP(u.path,""):("file"==u.scheme&&!u.path.length&&lR(d)&&(u.host&&(u.host=""),d=_P(d,0)+":"),UP(u.path,d)),d="","file"==u.scheme&&(i==tP||"?"==i||"#"==i))for(;u.path.length>1&&""===u.path[0];)DP(u.path);"?"==i?(u.query="",c=NR):"#"==i&&(u.fragment="",c=OR)}else d+=uR(i,aR);break;case _R:"?"==i?(u.query="",c=NR):"#"==i?(u.fragment="",c=OR):i!=tP&&(u.path[0]+=uR(i,iR));break;case NR:t||"#"!=i?i!=tP&&("'"==i&&u.isSpecial()?u.query+="%27":u.query+="#"==i?"%23":uR(i,iR)):(u.fragment="",c=OR);break;case OR:i!=tP&&(u.fragment+=uR(i,oR))}l++}},parseHost:function(e){var t,r,n;if("["==_P(e,0)){if("]"!=_P(e,e.length-1))return WP;if(t=function(e){var t,r,n,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,f=function(){return _P(e,d)};if(":"==f()){if(":"!=_P(e,1))return;d+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=r=0;r<4&&NP($P,f());)t=16*t+AP(f(),16),d++,r++;if("."==f()){if(0==r)return;if(d-=r,c>6)return;for(n=0;f();){if(i=null,n>0){if(!("."==f()&&n<4))return;d++}if(!NP(zP,f()))return;for(;NP(zP,f());){if(o=AP(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}u[c]=256*u[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u}(FP(e,1,-1)),!t)return WP;this.host=t}else if(this.isSpecial()){if(e=mP(e),NP(XP,e))return WP;if(t=function(e){var t,r,n,i,o,a,s,u=KP(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=u[n]))return e;if(o=10,i.length>1&&"0"==_P(i,0)&&(o=NP(ZP,i)?16:8,i=FP(i,8==o?1:2)),""===i)a=0;else{if(!NP(10==o?JP:8==o?QP:$P,i))return e;a=AP(i,o)}UP(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=xP(256,5-t))return null}else if(a>255)return null;for(s=LP(r),n=0;n<r.length;n++)s+=r[n]*xP(256,3-n);return s}(e),null===t)return WP;this.host=t}else{if(NP(eR,e))return WP;for(t="",r=hP(e),n=0;n<r.length;n++)t+=uR(r[n],iR);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return dP(cR,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&lR(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=nR(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+OP(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},setHref:function(e){var t=this.parse(e);if(t)throw IP(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new LR(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+nR(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(yP(e)+":",hR)},getUsername:function(){return this.username},setUsername:function(e){var t=hP(yP(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=uR(t[r],sR)}},getPassword:function(){return this.password},setPassword:function(e){var t=hP(yP(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=uR(t[r],sR)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?nR(e):nR(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,ER)},getHostname:function(){var e=this.host;return null===e?"":nR(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,PR)},getPort:function(){var e=this.port;return null===e?"":yP(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=yP(e))?this.port=null:this.parse(e,RR))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+OP(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,TR))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=yP(e))?this.query=null:("?"==_P(e,0)&&(e=FP(e,1)),this.query="",this.parse(e,NR)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=yP(e))?("#"==_P(e,0)&&(e=FP(e,1)),this.fragment="",this.parse(e,OR)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var LR=function(e){var t=lP(this,UR),r=wP(arguments.length,1)>1?arguments[1]:void 0,n=SP(t,new MR(e,!1,r));nP||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},UR=LR.prototype,BR=function(e,t){return{get:function(){return EP(this)[e]()},set:t&&function(e){return EP(this)[t](e)},configurable:!0,enumerable:!0}};if(nP&&(cP(UR,"href",BR("serialize","setHref")),cP(UR,"origin",BR("getOrigin")),cP(UR,"protocol",BR("getProtocol","setProtocol")),cP(UR,"username",BR("getUsername","setUsername")),cP(UR,"password",BR("getPassword","setPassword")),cP(UR,"host",BR("getHost","setHost")),cP(UR,"hostname",BR("getHostname","setHostname")),cP(UR,"port",BR("getPort","setPort")),cP(UR,"pathname",BR("getPathname","setPathname")),cP(UR,"search",BR("getSearch","setSearch")),cP(UR,"searchParams",BR("getSearchParams")),cP(UR,"hash",BR("getHash","setHash"))),uP(UR,"toJSON",(function(){return EP(this).serialize()}),{enumerable:!0}),uP(UR,"toString",(function(){return EP(this).serialize()}),{enumerable:!0}),CP){var DR=CP.createObjectURL,KR=CP.revokeObjectURL;DR&&uP(LR,"createObjectURL",aP(DR,CP)),KR&&uP(LR,"revokeObjectURL",aP(KR,CP))}gP(LR,"URL"),rP({global:!0,forced:!iP,sham:!nP},{URL:LR});var FR=ts.filter;Pi({target:"Array",proto:!0,forced:!io("filter")},{filter:function(e){return FR(this,e,arguments.length>1?arguments[1]:void 0)}});var jR={};function qR(){}function GR(){GR.init.call(this)}function WR(e){return void 0===e._maxListeners?GR.defaultMaxListeners:e._maxListeners}function HR(e,t,r){if(t)e.call(r);else for(var n=e.length,i=XR(e,n),o=0;o<n;++o)i[o].call(r)}function YR(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=XR(e,i),a=0;a<i;++a)o[a].call(r,n)}function VR(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,a=XR(e,o),s=0;s<o;++s)a[s].call(r,n,i)}function zR(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var a=e.length,s=XR(e,a),u=0;u<a;++u)s[u].call(r,n,i,o)}function ZR(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=XR(e,i),a=0;a<i;++a)o[a].apply(r,n)}function QR(e,t,r,n){var i,o,a,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]):(o=e._events=new qR,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(i=WR(e))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[t]=r,++e._eventsCount;return e}function JR(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function $R(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function XR(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}qR.prototype=Object.create(null),GR.EventEmitter=GR,GR.usingDomains=!1,GR.prototype.domain=void 0,GR.prototype._events=void 0,GR.prototype._maxListeners=void 0,GR.defaultMaxListeners=10,GR.init=function(){this.domain=null,GR.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new qR,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},GR.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},GR.prototype.getMaxListeners=function(){return WR(this)},GR.prototype.emit=function(e){var t,r,n,i,o,a,s,u="error"===e;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=a[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:HR(r,l,this);break;case 2:YR(r,l,this,arguments[1]);break;case 3:VR(r,l,this,arguments[1],arguments[2]);break;case 4:zR(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];ZR(r,l,this,i)}return!0},GR.prototype.addListener=function(e,t){return QR(this,e,t,!1)},GR.prototype.on=GR.prototype.addListener,GR.prototype.prependListener=function(e,t){return QR(this,e,t,!0)},GR.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,JR(this,e,t)),this},GR.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,JR(this,e,t)),this},GR.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new qR:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new qR,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,a||t)}return this},GR.prototype.off=function(e,t){return this.removeListener(e,t)},GR.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new qR,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new qR:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new qR,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},GR.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},GR.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):$R.call(e,t)},GR.prototype.listenerCount=$R,GR.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var eC=C(Object.freeze({__proto__:null,default:GR,EventEmitter:GR})),tC=R&&R.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jR,"__esModule",{value:!0}),jR.RateLimit=cC=jR.Sema=void 0;var rC=tC(eC);function nC(e){return t=Math.min(Math.max(16,e),1073741824),t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16);var t}var iC=function(){function e(t){o(this,e),this._capacity=nC(t),this._length=0,this._front=0,this.arr=[]}return s(e,[{key:"push",value:function(e){var t=this._length;this.checkCapacity(t+1);var r=this._front+t&this._capacity-1;return this.arr[r]=e,this._length=t+1,t+1}},{key:"pop",value:function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1,r=this.arr[t];return this.arr[t]=void 0,this._length=e-1,r}}},{key:"shift",value:function(){var e=this._length;if(0!==e){var t=this._front,r=this.arr[t];return this.arr[t]=void 0,this._front=t+1&this._capacity-1,this._length=e-1,r}}},{key:"length",get:function(){return this._length}},{key:"checkCapacity",value:function(e){this._capacity<e&&this.resizeTo(nC(1.5*this._capacity+16))}},{key:"resizeTo",value:function(e){var t=this._capacity;this._capacity=e;var r=this._front,n=this._length;if(r+n>t){var i=r+n&t-1;!function(e,t,r,n,i){for(var o=0;o<i;++o)r[o+n]=e[o+t],e[o+t]=void 0}(this.arr,0,this.arr,t,i)}}}]),e}(),oC=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r)}(rC.default);function aC(e){return"function"==typeof e}function sC(){return"1"}var uC=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initFn,a=void 0===i?sC:i,s=n.pauseFn,u=n.resumeFn,c=n.capacity,l=void 0===c?10:c;if(o(this,e),aC(s)!==aC(u))throw new Error("pauseFn and resumeFn must be both set for pausing");this.nrTokens=t,this.free=new iC(t),this.waiting=new iC(l),this.releaseEmitter=new oC,this.noTokens=a===sC,this.pauseFn=s,this.resumeFn=u,this.paused=!1,this.releaseEmitter.on("release",(function(e){var t=r.waiting.shift();t?t.resolve(e):(r.resumeFn&&r.paused&&(r.paused=!1,r.resumeFn()),r.free.push(e))}));for(var d=0;d<t;d++)this.free.push(a())}var t;return s(e,[{key:"tryAcquire",value:function(){return this.free.pop()}},{key:"acquire",value:(t=i(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=this.tryAcquire())){e.next=3;break}return e.abrupt("return",t);case 3:return e.abrupt("return",new Promise((function(e,t){r.pauseFn&&!r.paused&&(r.paused=!0,r.pauseFn()),r.waiting.push({resolve:e,reject:t})})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"release",value:function(e){this.releaseEmitter.emit("release",this.noTokens?"1":e)}},{key:"drain",value:function(){for(var e=new Array(this.nrTokens),t=0;t<this.nrTokens;t++)e[t]=this.acquire();return Promise.all(e)}},{key:"nrWaiting",value:function(){return this.waiting.length}}]),e}(),cC=jR.Sema=uC;jR.RateLimit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.timeUnit,n=void 0===r?1e3:r,o=t.uniformDistribution,a=void 0!==o&&o,s=new uC(a?1:e),u=a?n/e:n;return function(){var e=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.acquire();case 2:setTimeout((function(){return s.release()}),u);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};var lC=it,dC=xn,fC=Ln,hC=function(e){for(var t=lC(this),r=fC(t),n=arguments.length,i=dC(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:dC(o,r);a>i;)t[i++]=e;return t},pC=xc;Pi({target:"Array",proto:!0},{fill:hC}),pC("fill");var vC=z,mC=je,yC=fe,gC=st,wC=oo,kC=N,bC=A.Function,SC=vC([].concat),EC=vC([].join),PC={},RC=function(e,t,r){if(!gC(PC,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";PC[t]=bC("C,a","return new C("+EC(n,",")+")")}return PC[t](e,r)},CC=kC?bC.bind:function(e){var t=mC(this),r=t.prototype,n=wC(arguments,1),i=function(){var r=SC(n,wC(arguments));return this instanceof i?RC(t,r.length,r):t.apply(e,r)};return yC(r)&&(i.prototype=r),i},IC=Pi,AC=Iu,TC=CC,xC=jd,_C=nr,NC=fe,OC=ua,MC=x,LC=me("Reflect","construct"),UC=Object.prototype,BC=[].push,DC=MC((function(){function e(){}return!(LC((function(){}),[],e)instanceof e)})),KC=!MC((function(){LC((function(){}))})),FC=DC||KC;function jC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GC(e,t,r){return t&&qC(e.prototype,t),r&&qC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}IC({target:"Reflect",stat:!0,forced:FC,sham:FC},{construct:function(e,t){xC(e),_C(t);var r=arguments.length<3?e:xC(arguments[2]);if(KC&&!DC)return LC(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return AC(BC,n,t),new(AC(TC,e,n))}var i=r.prototype,o=OC(NC(i)?i:UC),a=AC(e,o,t);return NC(a)?a:o}});var WC=function(){function e(){jC(this,e),this.storage=new Map}return GC(e,[{key:"get",value:function(e){return this.storage.get(e)||null}},{key:"set",value:function(e,t){this.storage.set(e,t)}},{key:"remove",value:function(e){this.storage.delete(e)}},{key:"clear",value:function(){this.storage.clear()}}]),e}(),HC=function(){function e(){jC(this,e)}return GC(e,[{key:"get",value:function(e){return localStorage.getItem(e)}},{key:"set",value:function(e,t){localStorage.setItem(e,t)}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}],[{key:"canUse",value:function(){var e=VC();try{return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return!1}}}]),e}(),YC=function(){function e(){jC(this,e)}return GC(e,[{key:"get",value:function(e){return sessionStorage.getItem(e)}},{key:"set",value:function(e,t){sessionStorage.setItem(e,t)}},{key:"remove",value:function(e){sessionStorage.removeItem(e)}},{key:"clear",value:function(){sessionStorage.clear()}}],[{key:"canUse",value:function(){var e=VC();try{return sessionStorage.setItem(e,"test"),sessionStorage.removeItem(e),!0}catch(e){return!1}}}]),e}();function VC(){return new Array(4).fill(null).map((function(){return Math.random().toString(36).slice(2)})).join("")}var zC=HC.canUse()?new HC:new WC,ZC=YC.canUse()?new YC:new WC,QC=ge.match(/firefox\/(\d+)/i),JC=!!QC&&+QC[1],$C=/MSIE|Trident/.test(ge),XC=ge.match(/AppleWebKit\/(\d+)\./),eI=!!XC&&+XC[1],tI=Pi,rI=z,nI=je,iI=it,oI=Ln,aI=Do,sI=x,uI=jS,cI=Av,lI=JC,dI=$C,fI=Re,hI=eI,pI=[],vI=rI(pI.sort),mI=rI(pI.push),yI=sI((function(){pI.sort(void 0)})),gI=sI((function(){pI.sort(null)})),wI=cI("sort"),kI=!sI((function(){if(fI)return fI<70;if(!(lI&&lI>3)){if(dI)return!0;if(hI)return hI<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)pI.push({k:t+n,v:r})}for(pI.sort((function(e,t){return t.v-e.v})),n=0;n<pI.length;n++)t=pI[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));tI({target:"Array",proto:!0,forced:yI||!gI||!wI||!kI},{sort:function(e){void 0!==e&&nI(e);var t=iI(this);if(kI)return void 0===e?vI(t):vI(t,e);var r,n,i=[],o=oI(t);for(n=0;n<o;n++)n in t&&mI(i,t[n]);for(uI(i,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:aI(t)>aI(r)?1:-1}}(e)),r=i.length,n=0;n<r;)t[n]=i[n++];for(;n<o;)delete t[n++];return t}});var bI=Pr.PROPER,SI=x,EI=Vv,PI=tm.trim;Pi({target:"String",proto:!0,forced:function(e){return SI((function(){return!!EI[e]()||"​᠎"!=="​᠎"[e]()||bI&&EI[e].name!==e}))}("trim")},{trim:function(){return PI(this)}});var RI={},CI=Pi,II=x,AI=ca.f;CI({target:"Object",stat:!0,forced:II((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:AI});var TI=Object.getOwnPropertySymbols,xI=Object.prototype.hasOwnProperty,_I=Object.prototype.propertyIsEnumerable;function NI(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var OI=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,i=NI(e),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))xI.call(r,a)&&(i[a]=r[a]);if(TI){n=TI(r);for(var s=0;s<n.length;s++)_I.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i},MI=Jt.f,LI=_,UI=A,BI=z,DI=mi,KI=Hv,FI=yr,jI=En.f,qI=ye,GI=Ag,WI=Do,HI=Iy,YI=qy,VI=function(e,t,r){r in e||MI(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})},zI=Sn,ZI=x,QI=st,JI=on.enforce,$I=Md,XI=Hy,eA=zy,tA=Et("match"),rA=UI.RegExp,nA=rA.prototype,iA=UI.SyntaxError,oA=BI(nA.exec),aA=BI("".charAt),sA=BI("".replace),uA=BI("".indexOf),cA=BI("".slice),lA=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,dA=/a/g,fA=/a/g,hA=new rA(dA)!==dA,pA=YI.MISSED_STICKY,vA=YI.UNSUPPORTED_Y,mA=LI&&(!hA||pA||XI||eA||ZI((function(){return fA[tA]=!1,rA(dA)!=dA||rA(fA)==fA||"/a/i"!=rA(dA,"i")})));if(DI("RegExp",mA)){for(var yA=function(e,t){var r,n,i,o,a,s,u=qI(nA,this),c=GI(e),l=void 0===t,d=[],f=e;if(!u&&c&&l&&e.constructor===yA)return e;if((c||qI(nA,e))&&(e=e.source,l&&(t=HI(f))),e=void 0===e?"":WI(e),t=void 0===t?"":WI(t),f=e,XI&&"dotAll"in dA&&(n=!!t&&uA(t,"s")>-1)&&(t=sA(t,/s/g,"")),r=t,pA&&"sticky"in dA&&(i=!!t&&uA(t,"y")>-1)&&vA&&(t=sA(t,/y/g,"")),eA&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],a={},s=!1,u=!1,c=0,l="";n<=r;n++){if("\\"===(t=aA(e,n)))t+=aA(e,++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:oA(lA,cA(e,n+1))&&(n+=2,u=!0),i+=t,c++;continue;case">"===t&&u:if(""===l||QI(a,l))throw new iA("Invalid capture group name");a[l]=!0,o[o.length]=[l,c],u=!1,l="";continue}u?l+=t:i+=t}return[i,o]}(e),e=o[0],d=o[1]),a=KI(rA(e,t),u?this:nA,yA),(n||i||d.length)&&(s=JI(a),n&&(s.dotAll=!0,s.raw=yA(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=aA(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+aA(e,++n);return i}(e),r)),i&&(s.sticky=!0),d.length&&(s.groups=d)),e!==f)try{FI(a,"source",""===f?"(?:)":f)}catch(e){}return a},gA=jI(rA),wA=0;gA.length>wA;)VI(yA,rA,gA[wA++]);nA.constructor=yA,yA.prototype=nA,zI(UI,"RegExp",yA)}$I("RegExp");var kA=L,bA=nr,SA=On,EA=Do,PA=ae,RA=Ge,CA=xg,IA=Bg;Pg("match",(function(e,t,r){return[function(t){var r=PA(this),n=null==t?void 0:RA(t,e);return n?kA(n,t,r):new RegExp(t)[e](EA(r))},function(e){var n=bA(this),i=EA(e),o=r(t,n,i);if(o.done)return o.value;if(!n.global)return IA(n,i);var a=n.unicode;n.lastIndex=0;for(var s,u=[],c=0;null!==(s=IA(n,i));){var l=EA(s[0]);u[c]=l,""===l&&(n.lastIndex=CA(i,SA(n.lastIndex),a)),c++}return 0===c?null:u}]}));var AA="%[a-f0-9]{2}",TA=new RegExp(AA,"gi"),xA=new RegExp("("+AA+")+","gi");function _A(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],_A(r),_A(n))}function NA(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(TA),r=1;r<t.length;r++)t=(e=_A(t,r).join("")).match(TA);return e}}var OA=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},MA=OI,LA=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+r(e)+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=xA.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=NA(r[0]);n!==r[0]&&(t[r[0]]=n)}r=xA.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var a=i[o];e=e.replace(new RegExp(a,"g"),t[a])}return e}(e)}};function UA(e,t){return t.encode?t.strict?OA(e):encodeURIComponent(e):e}function BA(e){return Array.isArray(e)?e.sort():"object"===r(e)?BA(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function DA(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function KA(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=MA({arrayFormat:"none"},t)),i=Object.create(null);return"string"!=typeof e?i:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:LA(o),n(LA(r),o,i)})),Object.keys(i).sort().reduce((function(e,t){var n=i[t];return Boolean(n)&&"object"===r(n)&&!Array.isArray(n)?e[t]=BA(n):e[t]=n,e}),Object.create(null))):i}RI.extract=DA,RI.parse=KA,RI.stringify=function(e,t){!1===(t=MA({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[UA(t,e),"[",n,"]"].join(""):[UA(t,e),"[",UA(n,e),"]=",UA(r,e)].join("")};case"bracket":return function(t,r){return null===r?UA(t,e):[UA(t,e),"[]=",UA(r,e)].join("")};default:return function(t,r){return null===r?UA(t,e):[UA(t,e),"=",UA(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var i=e[n];if(void 0===i)return"";if(null===i)return UA(n,t);if(Array.isArray(i)){var o=[];return i.slice().forEach((function(e){void 0!==e&&o.push(r(n,e,o.length))})),o.join("&")}return UA(n,t)+"="+UA(i,t)})).filter((function(e){return e.length>0})).join("&"):""},RI.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:KA(DA(e),t)}};var FA=function(e,t,r){return new Promise((function(n,i){var o=function(e){try{s(r.next(e))}catch(e){i(e)}},a=function(e){try{s(r.throw(e))}catch(e){i(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(o,a)};s((r=r.apply(e,t)).next())}))},jA="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";function qA(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",r=e;r--;)t+=jA[64*Math.random()|0];return t}var GA=function(){function e(){o(this,e),this.isPaused=!1,this.subscriber=null,this.buffer=[]}return s(e,[{key:"publish",value:function(e){this.buffer.push(e),this.handleLoop()}},{key:"subscribe",value:function(e){var t=this;if(null!=this.subscriber)throw new WA;this.subscriber=e,this.handleLoop();var r=!1;return{unsubscribe:function(){if(r)throw new HA;t.subscriber=null,r=!0}}}},{key:"handleLoop",value:function(){var e=this;if(this.buffer.length>0&&null!=this.subscriber&&!this.isPaused){this.isPaused=!0;try{var t=this.buffer.shift(),r=this.subscriber.next(t);r instanceof Promise?r.then((function(){e.isPaused=!1,e.handleLoop()})).catch((function(){e.isPaused=!1})):(this.isPaused=!1,this.handleLoop())}catch(e){this.isPaused=!1}}}}]),e}(),WA=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[HappyMQ] Already Subscribed")}return s(r)}(p(Error)),HA=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[HappyMQ] Already Unsubscribed")}return s(r)}(p(Error)),YA=function(){function e(){o(this,e),this.taskMap=new Map,this.rejectByTimeoutTaskMap=new Map}return s(e,[{key:"start",value:function(e){var t=this;return new Promise((function(r,n){var i=null;null!=e.timeout&&(i=setTimeout((function(){t.rejectByTimeoutTaskMap.set(e.id,e),t.taskMap.delete(e.id),n(new zA(e))}),e.timeout)),t.taskMap.set(e.id,{task:e,executor:{resolve:function(n){null!=i&&clearTimeout(i),t.taskMap.delete(e.id),r(n)},reject:function(r){null!=i&&clearTimeout(i),t.taskMap.delete(e.id),n(r)}}})}))}},{key:"resolve",value:function(e,t){if(this.rejectByTimeoutTaskMap.has(e))throw new ZA(this.rejectByTimeoutTaskMap.get(e));var r=this.taskMap.get(e);if(null==r)throw new VA;r.executor.resolve(t)}},{key:"reject",value:function(e,t){if(this.rejectByTimeoutTaskMap.has(e))throw new ZA(this.rejectByTimeoutTaskMap.get(e));var r=this.taskMap.get(e);if(null==r)throw new VA;r.executor.reject(t)}}]),e}(),VA=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[TaskHolder] Unknown Task")}return s(r)}(p(Error)),zA=function(e){c(r,e);var t=g(r);function r(e){return o(this,r),t.call(this,"[TaskHolder] TimeoutError task: ".concat(JSON.stringify(e)))}return s(r)}(p(Error)),ZA=function(e){c(r,e);var t=g(r);function r(e){return o(this,r),t.call(this,"[TaskHolder] Already Reject Task By Timeout: ".concat(JSON.stringify(e)))}return s(r)}(p(Error)),QA=function(){function e(){o(this,e),this.topics=new Map}return s(e,[{key:"getQueue",value:function(e){var t,r=null!=(t=this.topics.get(e))?t:new GA;return this.topics.set(e,r),r}},{key:"publish",value:function(e,t){return this.getQueue(e).publish(t)}},{key:"subscribe",value:function(e,t){return this.getQueue(e).subscribe(t)}}]),e}(),JA=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Unknown response received. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error)),$A=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Handle request failed. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error)),XA=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r)}(p(Error)),eT=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Reconnect failed. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error)),tT=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Unknown Ack Received. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error)),rT=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Request Timeout. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error)),nT=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Receive Delayed Response. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error)),iT=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.id,a=e.type,s=e.body;return o(this,r),(n=t.call(this,"[BRIDGE] Receive Delayed Ack. id: ".concat(i,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=i,n.type=a,n.body=s,n}return s(r)}(p(Error));function oT(e){return e instanceof Error?JSON.stringify(e.message):JSON.stringify(e)}var aT=function(){function e(t,r,n,i,a,s,u){var c=this;o(this,e),this.messagePort=t,this.inConnectMessageProcessor=r,this.windowId=n,this.runtimeWindow=i,this.oppositeWindow=a,this.debuggerQueue=s,this.errorHandlers=new Set,this.guaranteeDeliveryMessageQueue=new GA,this.eventSubscriberMap=new Map,this.receivedRequestBroker=new QA,this.waitHandleRequestTaskHolder=new YA,this.waitAckTaskHolder=new YA,this.reconnectTimeout=null!=u?u:5e3,this.context={sendMessage:function(e){return c.sendMessage(e)},sendGuaranteeDeliveryMessage:function(e){return c.sendGuaranteeDeliveryMessage(e)},publishError:function(e){return c.publishError(e)},publishDebugInfo:function(e){return c.publishDebugInfo(e)},triggerEventSubscribers:function(e,t){return c.triggerEventSubscribers(e,t)},triggerRequestHandler:function(e,t,r,n){return c.triggerRequestSubscribers(e,t,r,n)},startHandleRequestTask:function(e){return c.startHandleRequestTask(e)},resolveHandleRequestTask:function(e){return c.resolveHandleRequestTask(e)},rejectHandleRequestTask:function(e){return c.rejectHandleRequestTask(e)},startAckTask:function(e){return c.startAckTask(e)},resolveAckTask:function(e){return c.resolveAckTask(e)}},this.subscribeReconnect(),this.subscribeMessageEvent(),this.guaranteeDeliveryMessageQueue.subscribe({next:function(e){return FA(c,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.startAckTask({id:e.id,body:e,timeout:100}),this.sendMessage(e),t.prev=2,t.next=5,r;case 5:t.next=22;break;case 7:if(t.prev=7,t.t0=t.catch(2),t.t0 instanceof zA){t.next=11;break}throw t.t0;case 11:return t.next=13,this.reconnect();case 13:if(t.sent){t.next=21;break}return t.next=17,this.reconnect();case 17:if(t.sent){t.next=21;break}return this.publishError(new eT(e)),t.abrupt("return");case 21:this.sendMessage(e);case 22:case"end":return t.stop()}}),t,this,[[2,7]])})))}})}return s(e,[{key:"publish",value:function(e,t){this.inConnectMessageProcessor.sendBroadcast({eventName:e,payload:t,context:this.context})}},{key:"subscribe",value:function(e,t){var r,n=this;return this.eventSubscriberMap.set(e,[].concat(k(null!=(r=this.eventSubscriberMap.get(e))?r:[]),[t])),{unsubscribe:function(){var r,i;n.eventSubscriberMap.set(e,null!=(i=null==(r=n.eventSubscriberMap.get(e))?void 0:r.filter((function(e){return e!==t})))?i:[])}}}},{key:"request",value:function(e,t,r){return this.inConnectMessageProcessor.sendRequest({requestName:e,payload:t,context:this.context,timeout:null==r?void 0:r.timeout})}},{key:"handleRequest",value:function(e,t){var r=this;try{var n=this.receivedRequestBroker.subscribe(e,{next:function(e){return FA(r,[e],regeneratorRuntime.mark((function e(r){var n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.payload,i=r.onHandleSuccess,o=r.onHandleFail,e.prev=1,e.next=4,t(n);case 4:a=e.sent,i(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),this.publishError(e.t0),o(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})))}});return{unhandle:function(){try{n.unsubscribe()}catch(e){if(!(e instanceof HA))throw e}}}}catch(e){if(e instanceof WA)throw new XA;throw e}}},{key:"subscribeError",value:function(e){this.errorHandlers.add((function(t){return FA(this,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e(t);case 3:r.next=7;break;case 5:r.prev=5,r.t0=r.catch(0);case 7:case"end":return r.stop()}}),r,null,[[0,5]])})))}))}},{key:"subscribeDebugger",value:function(e){this.debuggerQueue.subscribe({next:function(t){e(t)}})}},{key:"subscribeReconnect",value:function(){var e=this;this.runtimeWindow.addEventListener("message",(function(t){uT.hasBridgeReconnectMessage(t)&&uT.ofMessage(t.data).isRequestReconnectFrom(e.windowId)&&(e.messagePort=t.data.body.messagePort,e.subscribeMessageEvent(),t.source.postMessage(uT.REQUEST_RECONNECT_ACK(e.windowId)))}))}},{key:"reconnect",value:function(){return FA(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=setTimeout((function(){e(!1)}),t.reconnectTimeout),n=new MessageChannel;t.runtimeWindow.addEventListener("message",(function(i){uT.hasBridgeReconnectMessage(i)&&uT.ofMessage(i.data).isRequestReconnectAckFrom(t.windowId)&&(clearTimeout(r),t.messagePort=n.port1,t.subscribeMessageEvent(),e(!0))}),{once:!0}),t.oppositeWindow.postMessage(uT.REQUEST_RECONNECT(t.windowId,n.port2))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"subscribeMessageEvent",value:function(){var e=this;this.messagePort.addEventListener("message",(function(t){return FA(e,null,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.inConnectMessageProcessor.ofMessageEvent(t),this.publishDebugInfo({step:"receive",body:r,timestamp:new Date}),r.handleReceive(this.context);case 3:case"end":return e.stop()}}),e,this)})))})),this.messagePort.start()}},{key:"sendMessage",value:function(e){this.publishDebugInfo({step:"send",body:e,timestamp:new Date}),this.messagePort.postMessage(e)}},{key:"publishError",value:function(e){this.errorHandlers.forEach((function(t){return t(e)}))}},{key:"sendGuaranteeDeliveryMessage",value:function(e){this.guaranteeDeliveryMessageQueue.publish(e)}},{key:"publishDebugInfo",value:function(e){this.debuggerQueue.publish(e)}},{key:"triggerEventSubscribers",value:function(e,t){var r=this.eventSubscriberMap.get(e);null==r||r.forEach((function(e){return e(t)}))}},{key:"triggerRequestSubscribers",value:function(e,t,r,n){this.receivedRequestBroker.publish(e,{payload:t,onHandleSuccess:r,onHandleFail:n})}},{key:"startHandleRequestTask",value:function(e){return this.waitHandleRequestTaskHolder.start(e)}},{key:"resolveHandleRequestTask",value:function(e){var t=e.taskId,r=e.result;return this.waitHandleRequestTaskHolder.resolve(t,r)}},{key:"rejectHandleRequestTask",value:function(e){var t=e.taskId,r=e.error;return this.waitHandleRequestTaskHolder.reject(t,r)}},{key:"startAckTask",value:function(e){return this.waitAckTaskHolder.start(e)}},{key:"resolveAckTask",value:function(e){var t=e.taskId;return this.waitAckTaskHolder.resolve(t)}}],[{key:"of",value:function(t){var r=new GA,n=new e(t.messagePort,t.inConnectMessageProcessor,t.windowId,t.runtimeWindow,t.oppositeWindow,r,t.reconnectTimeout);return new Proxy(n,{get:function(e,t){var n,i=e[t];return"function"==typeof i?(n=i,new Proxy(n,{apply:function(e,t,i){r.publish({type:"start: ".concat(n.name),body:oT(k(i)),timestamp:new Date});var o=Reflect.apply(e,t,i);return r.publish({type:"end: ".concat(n.name),body:oT(k(i)),timestamp:new Date}),o}})):i}})}}]),e}(),sT=function(){function e(t,r,n){o(this,e),this.type="TOSSPAYMENTS__RECONNECT",this.id=t,this.type=r,this.body=n}return s(e,[{key:"isRequestReconnectFrom",value:function(e){return"TOSSPAYMENTS__REQUEST_RECONNECT"===this.body.step&&this.body.windowId===e&&null!=this.body.messagePort}},{key:"isRequestReconnectAckFrom",value:function(e){return"TOSSPAYMENTS__REQUEST_RECONNECT_ACK"===this.body.step&&this.body.windowId===e}}],[{key:"of",value:function(t){var r=t.step,n=t.windowId,i=t.messagePort;return new e(qA(),"TOSSPAYMENTS__RECONNECT",{step:r,windowId:n,messagePort:i})}},{key:"REQUEST_RECONNECT",value:function(t,r){return e.of({step:"TOSSPAYMENTS__REQUEST_RECONNECT",windowId:t,messagePort:r})}},{key:"REQUEST_RECONNECT_ACK",value:function(t){return e.of({step:"TOSSPAYMENTS__REQUEST_RECONNECT_ACK",windowId:t})}},{key:"ofMessage",value:function(t){return new e(t.id,t.type,t.body)}},{key:"hasBridgeReconnectMessage",value:function(t){var r=t.data;return"TOSSPAYMENTS__RECONNECT"===r.type&&e.STEPS.some((function(e){return e===r.body.step}))}}]),e}();sT.STEPS=["TOSSPAYMENTS__REQUEST_RECONNECT","TOSSPAYMENTS__REQUEST_RECONNECT_ACK"];var uT=sT,cT=function(){function e(t,r,n){o(this,e),this.id=t,this.type=r,this.body=n}return s(e,null,[{key:"ofWindowId",value:function(t){return new e(qA(),"TOSSPAYMENTS__HANDSHAKE",{step:"TOSSPAYMENTS__SYN",windowId:t})}},{key:"is",value:function(e){var t;return"TOSSPAYMENTS__HANDSHAKE"===(null==e?void 0:e.type)&&"TOSSPAYMENTS__SYN"===(null==(t=null==e?void 0:e.body)?void 0:t.step)}}]),e}(),lT=function(){function e(t,r,n){o(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"from",value:function(e){return this.body.windowId===e}}],[{key:"of",value:function(t){return new e(t.id,t.type,t.body)}},{key:"ofWindowId",value:function(t){return new e(qA(),"TOSSPAYMENTS__HANDSHAKE",{step:"TOSSPAYMENTS__SYN_ACK",windowId:t})}},{key:"is",value:function(e){var t;return"TOSSPAYMENTS__HANDSHAKE"===(null==e?void 0:e.type)&&"TOSSPAYMENTS__SYN_ACK"===(null==(t=null==e?void 0:e.body)?void 0:t.step)}}]),e}(),dT=function(){function e(t,r,n){o(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"from",value:function(e){return this.body.windowId===e}}],[{key:"of",value:function(t){return new e(t.id,t.type,t.body)}},{key:"ofWindowIdAndMessagePort",value:function(t){var r=t.windowId;return new e(qA(),"TOSSPAYMENTS__HANDSHAKE",{step:"TOSSPAYMENTS__REQUEST_CONNECT",windowId:r})}},{key:"is",value:function(e){var t;return"TOSSPAYMENTS__HANDSHAKE"===(null==e?void 0:e.type)&&"TOSSPAYMENTS__REQUEST_CONNECT"===(null==(t=null==e?void 0:e.body)?void 0:t.step)}}]),e}(),fT=function(){function e(t,r,n){o(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"send",value:function(e){return FA(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.sendMessage(this);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"handleReceive",value:function(e){e.triggerEventSubscribers(this.body.eventName,this.body.payload)}}],[{key:"of",value:function(t){var r=t.eventName,n=t.payload;return new e(qA(),"TOSSPAYMENTS__BROADCAST",{eventName:r,payload:n})}}]),e}(),hT=function(){function e(t,r,n){o(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"send",value:function(e){return FA(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.sendMessage(this);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"handleReceive",value:function(e){try{e.resolveAckTask({taskId:this.body.source.id})}catch(t){switch(!0){case t instanceof VA:e.publishError(new tT(this));break;case t instanceof ZA:e.publishError(new iT(this));break;default:throw t}}}}],[{key:"of",value:function(t){var r=t.source;return new e(qA(),"TOSSPAYMENTS__ACK",{source:r})}}]),e}(),pT=function(){function e(t,r,n){o(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"isRequest",value:function(){return"TOSSPAYMENTS__REQUEST"===this.body.step}},{key:"isHandleSuccessResponse",value:function(){return"TOSSPAYMENTS__HANDLE_SUCCESS_RESPONSE"===this.body.step}},{key:"isHandleFailResponse",value:function(){return"TOSSPAYMENTS__HANDLE_FAIL_RESPONSE"===this.body.step}},{key:"send",value:function(e,t){var r=this,n=e.startHandleRequestTask({id:this.id,body:this,timeout:null==t?void 0:t.timeout});return e.sendGuaranteeDeliveryMessage(this),n.catch((function(t){if(!0==t instanceof zA)throw e.publishError(new rT(r)),new rT(r);throw t}))}},{key:"handleReceive",value:function(t){var r=this;if(t.sendMessage(hT.of({source:this})),this.isRequest())t.triggerRequestHandler(this.body.requestName,this.body.payload,(function(n){e.HANDLE_SUCCESS_RESPONSE(r.body.requestName,n,r).send(t)}),(function(n){e.HANDLE_FAIL_RESPONSE(r.body.requestName,n,r).send(t)}));else{if(!this.isHandleSuccessResponse()&&!this.isHandleFailResponse())throw new Error("[BRIDGE]: invalid request/response message step");try{this.isHandleSuccessResponse()?t.resolveHandleRequestTask({taskId:this.body.source.id,result:this.body.payload}):this.isHandleFailResponse()&&t.rejectHandleRequestTask({taskId:this.body.source.id,error:new $A(this)})}catch(e){switch(!0){case e instanceof VA:t.publishError(new JA(this));break;case e instanceof ZA:t.publishError(new nT(this));break;default:throw e}}}}}],[{key:"of",value:function(t){var r=t.step,n=t.requestName,i=t.payload,o=t.source;return new e(qA(),"TOSSPAYMENTS__REQUEST_RESPONSE",{step:r,requestName:n,payload:i,source:o})}},{key:"REQUEST",value:function(t,r){return e.of({step:"TOSSPAYMENTS__REQUEST",requestName:t,payload:r})}},{key:"HANDLE_SUCCESS_RESPONSE",value:function(t,r,n){return e.of({step:"TOSSPAYMENTS__HANDLE_SUCCESS_RESPONSE",requestName:t,payload:r,source:n})}},{key:"HANDLE_FAIL_RESPONSE",value:function(t,r,n){return e.of({step:"TOSSPAYMENTS__HANDLE_FAIL_RESPONSE",requestName:t,payload:(i=r,a=function(){function e(t){o(this,e),this.error=t}return s(e,[{key:"toJSON",value:function(){var e=[];e.push("message: ".concat(this.error.message));for(var t=0,r=Object.entries(i);t<r.length;t++){var n=w(r[t],2),o=n[0],a=n[1];e.push("".concat(o,": ").concat(JSON.stringify(a)))}return e.push("stack: ".concat(JSON.stringify(this.error.stack))),e.join(", ")}}]),e}(),JSON.stringify(new a(i))),source:n});var i,a}}]),e}();pT.STEPS=["TOSSPAYMENTS__REQUEST","TOSSPAYMENTS__HANDLE_SUCCESS_RESPONSE","TOSSPAYMENTS__HANDLE_FAIL_RESPONSE"];var vT=pT,mT=function(){function e(){o(this,e)}return s(e,[{key:"ofMessageEvent",value:function(e){var t=e.data;switch(t.type){case"TOSSPAYMENTS__BROADCAST":return new fT(t.id,"TOSSPAYMENTS__BROADCAST",t.body);case"TOSSPAYMENTS__REQUEST_RESPONSE":return new vT(t.id,"TOSSPAYMENTS__REQUEST_RESPONSE",t.body);case"TOSSPAYMENTS__ACK":return new hT(t.id,"TOSSPAYMENTS__ACK",t.body)}}},{key:"sendBroadcast",value:function(e){var t=e.eventName,r=e.payload,n=e.context;fT.of({eventName:t,payload:r}).send(n)}},{key:"sendRequest",value:function(e){var t=e.requestName,r=e.payload,n=e.context,i=e.timeout;return vT.REQUEST(t,r).send(n,{timeout:i})}}]),e}();function yT(e){return FA(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetWindow,n=t.runtimeWindow,i=void 0===n?window:n,o=t.reconnectTimeout,e.abrupt("return",new Promise((function(e){var t=qA(),n=setInterval((function(){r.postMessage(cT.ofWindowId(t),"*")}),100);i.addEventListener("message",(function a(s){var u=s.data;if(lT.is(u)&&lT.of(u).from(t)){clearInterval(n),i.removeEventListener("message",a);var c=new MessageChannel,l=c.port1,d=c.port2;r.postMessage(dT.ofWindowIdAndMessagePort({windowId:t}),"*",[d]),e(aT.of({messagePort:l,inConnectMessageProcessor:new mT,windowId:t,runtimeWindow:i,oppositeWindow:r,reconnectTimeout:o}))}}))})));case 2:case"end":return e.stop()}}),e)})))}var gT=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.id=t,this.kftcId=r,this.name=n,this.label=i,this.engLabel=a,this.iconName=s,this.fillIconName=u,this.contact=c}return s(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}}],[{key:"of",value:function(t){return new e(t.id,t.kftcId,t.name,t.label,t.engLabel,t.iconName,t.fillIconName,t.contact)}}]),e}();new gT("39","039","경남은행","경남","KYONGNAMBANK","icn-bank-bnk-2","icn-bank-fill-bnk","1600-8585"),new gT("34","034","광주은행","광주","GWANGJUBANK","icn-bank-gwangju","icn-bank-fill-gwangju","1588-3388"),new gT("S8","261","교보증권","교보증권","KYOBO_SECURITIES","icn-bank-kyobo","icn-bank-fill-kyobo","1544-0900"),new gT("12","012","단위농협","단위농협","LOCALNONGHYEOP","icn-bank-nh","icn-bank-fill-nh","1661-2100"),new gT("SE","267","대신증권","대신증권","DAISHIN_SECURITIES","icn-bank-ds","icn-bank-fill-ds","1588-4488"),new gT("SK","268","메리츠증권","메리츠증권","MERITZ_SECURITIES","icn-bank-meritz","icn-bank-fill-meritz","1588-3400"),new gT("S1","238","미래에셋증권","미래에셋증권","MIRAEASSET_SECURITIES","icn-bank-miraeasset","icn-bank-fill-miraeasset","1588-6800"),new gT("S5","238","미래에셋증권","미래에셋증권","MIRAE_ASSET_SECURITIES","icn-bank-miraeasset","icn-bank-fill-miraeasset","1588-6800"),new gT("SM","290","부국증권","부국","BOOKOOK_SECURITIES","icn-bank-bookook","icn-bank-fill-bookook","1588-7744"),new gT("32","032","부산은행","부산","BUSANBANK","icn-bank-bnk","icn-bank-fill-bnk","1588-6200"),new gT("S3","240","삼성증권","삼성증권","SAMSUNG_SECURITIES","icn-bank-samsung","icn-bank-fill-samsungcard","1588-2323"),new gT("45","045","새마을금고","새마을","SAEMAUL","icn-bank-mg","icn-bank-fill-mg","1599-9000"),new gT("64","064","산림조합","산림","SANLIM","icn-bank-sj","icn-bank-fill-sj","1544-4200"),new gT("SN","291","신영증권","신영증권","SHINYOUNG_SECURITIES","icn-bank-shinyoung","icn-bank-fill-shinyoung","1588-8588"),new gT("S2","278","신한금융투자","신한금융투자","SHINHAN_INVESTMENT","icn-bank-shinhan","icn-bank-fill-shinyoung","1588-0365"),new gT("88","088","신한은행","신한","SHINHAN","icn-bank-shinhan","icn-bank-fill-shinhan","1599-8000"),new gT("48","048","신협","신협","SHINHYEOP","icn-bank-cu","icn-bank-fill-cu","1566-6000"),new gT("27","027","씨티은행","씨티","CITI","icn-bank-citi","icn-bank-fill-citi","1588-7000"),new gT("20","020","우리은행","우리","WOORI","icn-bank-woori","icn-bank-fill-woori","1588-5000"),new gT("71","071","우체국예금보험","우체국","POST","icn-bank-postoffice","icn-bank-fill-postoffice","1599-1900"),new gT("S0","209","유안타증권","유안타증권","YUANTA_SECURITES","icn-bank-yuanta","icn-bank-fill-yuanta","1588-2600"),new gT("SJ","280","유진투자증권","유진투자증권","EUGENE_INVESTMENT_AND_SECURITIES","icn-bank-eugene","icn-bank-fill-eugene","1588-6300"),new gT("50","050","저축은행중앙회","저축","SAVINGBANK","icn-bank-sb","icn-bank-fill-sb","02-3978-600"),new gT("37","037","전북은행","전북","JEONBUKBANK","icn-bank-jb","icn-bank-fill-jb","1588-4477"),new gT("35","035","제주은행","제주","JEJUBANK","icn-bank-jeju","icn-bank-fill-jeju","1588-0079"),new gT("90","090","카카오뱅크","카카오","KAKAOBANK","icn-bank-kakao","icn-bank-fill-kakao","1599-3333"),new gT("SQ","288","카카오페이증권","카카오페이증권","KAKAOPAY_SECURITIES","icn-bank-kakaopay","icn-bank-fill-kakaopay","1600-8515"),new gT("89","089","케이뱅크","케이","KBANK","icn-bank-kbank","icn-bank-fill-kbank","1522-1000"),new gT("92","092","토스뱅크","토스","TOSSBANK","icn-bank-toss","icn-bank-fill-toss","1661-7654"),new gT("ST","271","토스증권","토스증권","TOSS_SECURITIES","icn-bank-toss","icn-bank-fill-toss","1599-7987"),new gT("SR","294","펀드온라인코리아","펀드온라인코리아","KOREA_FOSS_SECURITIES","icn-bank-fokorea","icn-bank-fill-fokorea","1644-1744"),new gT("SH","270","하나금융투자","하나금융투자","HANA_INVESTMENT_AND_SECURITIES","icn-bank-hanasavings","icn-bank-fill-hana","1588-3111"),new gT("81","081","하나은행","하나","HANA","icn-bank-hana","icn-bank-fill-hana","1588-1111"),new gT("S9","262","하이투자증권","하이투자증권","HI_INVESTMENT_AND_SECURITIES","icn-bank-hi","icn-bank-fill-hi","1588-7171"),new gT("S6","243","한국투자증권","한국투자증권","KOREA_INVESTMENT_AND_SECURITIES","icn-bank-koreainvestment","icn-bank-fill-koreainvestment","1544-5000"),new gT("SG","269","한화투자증권","한화투자증권","HANHWA_INVESTMENT_AND_SECURITIES","icn-bank-hanhwa","icn-bank-fill-hanhwa","080-851-8282"),new gT("SA","263","현대차증권","현대차증권","HYUNDAI_MOTOR_SECURITIES","icn-bank-hyundaicar","icn-bank-fill-hyundaicard","1588-6655"),new gT("54","054","홍콩상하이은행","-","HSBC","icn-bank-hsbc","icn-bank-fill-hsbc","1544-3311"),new gT("SI","279","DB금융투자","DB금융투자","DB_INVESTMENT_AND_SECURITIES","icn-bank-db","icn-bank-fill-db","1588-4200"),new gT("31","031","DGB대구은행","대구","DAEGUBANK","icn-bank-dgb","icn-bank-fill-dgbcapital","1566-5050"),new gT("03","003","IBK기업은행","기업","IBK","icn-bank-ibk","icn-bank-fill-ibkcapital","1588-2588"),new gT("06","004","KB국민은행","국민","KOOKMIN","icn-bank-kb","icn-bank-fill-kb","1588-9999"),new gT("S4","218","KB증권","KB증권","KB_SECURITIES","icn-bank-kb","icn-bank-fill-kb","1588-6611"),new gT("02","002","KDB산업은행","산업","KDBBANK","icn-bank-kdb","icn-bank-fill-kdb","1588-1500"),new gT("SP","227","KTB투자증권","KTB투자증권","DAOL_INVESTMENT_AND_SECURITIES","icn-bank-ktb","icn-bank-fill-ktb","1588-3100"),new gT("SO","292","LIG투자증권","LIG투자","LIG_INVESTMENT_AND_SECURITIES","icn-bank-LIGinvest","icn-bank-LIGinvest-fill","1544-7600"),new gT("11","011","NH농협은행","농협","NONGHYEOP","icn-bank-nh","icn-bank-fill-nh","1661-3000"),new gT("SL","247","NH투자증권","NH투자증권","NH_INVESTMENT_AND_SECURITIES","icn-bank-nh","icn-bank-fill-nh","1544-0000"),new gT("103","103","SBI저축은행","SBI","SBI","icn-bank-sbi","icn-bank-fill-sbi","1566-2210"),new gT("23","023","SC제일은행","SC제일","SC","icn-bank-sc","icn-bank-fill-sc","1588-1599"),new gT("07","007","Sh수협은행","수협","SUHYEOP","icn-bank-sh","icn-bank-fill-sh","1588-1515"),new gT("SD","266","SK증권","SK증권","SK_SECURITIES","icn-bank-sk","icn-bank-fill-sk","1588-8245"),new gT("SB","264","키움증권","키움증권","KIWOOM","icn-bank-kium","icn-bank-fill-kium","1544-9000");var wT=function(){function e(t,r,n,i,a){o(this,e),this.id=t,this.name=r,this.label=n,this.engLabel=i,this.iconName=a}return s(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}}],[{key:"of",value:function(t){return new e(t.id,t.name,t.label,t.engLabel,t.iconName)}}]),e}(),kT=new wT("TOSSPAY","토스페이","토스페이","TOSSPAY","icon-bank-horizontal-tosspay"),bT=new wT("NAVERPAY","네이버페이","네이버페이","NAVERPAY","icon-bank-payments-horizontal-naverpay"),ST=new wT("SAMSUNGPAY","삼성페이","삼성페이","SAMSUNGPAY","icon-bank-payments-horizontal-samsungpay"),ET=new wT("LPAY","엘페이","엘페이","LPAY","icon-bank-payments-horizontal-lpay"),PT=new wT("KAKAOPAY","카카오페이","카카오페이","KAKAOPAY","icon-bank-payments-horizontal-kakaopay"),RT=new wT("PAYCO","페이코","페이코","PAYCO","icon-bank-payments-horizontal-payco"),CT=new wT("SSG","SSG페이","SSG페이","SSG","icon-bank-payments-horizontal-ssgpay"),IT=new wT("APPLEPAY","애플페이","Apple Pay","APPLEPAY","icon-bank-payments-horizontal-applepay"),AT=new wT("PAYPAL","PayPal","PayPal","PAYPAL","icon-bank-payments-horizontal-paypal"),TT=new wT("PINPAY","PIN Pay","현대 PIN Pay","PINPAY","icon-bank-payments-horizontal-pinpay2");var xT=function(){function e(t,r,n,i,a){o(this,e),this.id=t,this.name=r,this.label=n,this.engLabel=i,this.iconName=a}return s(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}},{key:"getEngLabel",value:function(){return this.engLabel}}],[{key:"of",value:function(t){return new e(t.id,t.name,t.label,t.engLabel,t.iconName)}}]),e}();new xT("46","광주은행","광주","GWANGJUBANK","icon-bank-horizontal-gjb"),new xT("71","롯데카드","롯데","LOTTE","icon-bank-horizontal-lottecard"),new xT("30","KDB산업은행","산업","KDBBANK","icon-bank-horizontal-kdbcapital"),new xT("31","비씨카드","비씨","BC","icon-bank-horizontal-bccard"),new xT("51","삼성카드","삼성","SAMSUNG","icon-bank-horizontal-samsungcard"),new xT("38","새마을금고","새마을","SAEMAUL","icon-bank-horizontal-mgbank"),new xT("41","신한카드","신한","SHINHAN","icon-bank-horizontal-shinhancard"),new xT("62","신협","신협","SHINHYEOP","icon-bank-horizontal-cu"),new xT("36","씨티카드","씨티","CITI","icon-bank-horizontal-citibank"),new xT("33","우리카드","우리","WOORI","icon-bank-horizontal-wooricard"),new xT("W1","우리카드","우리","WOORI","icon-bank-horizontal-wooricard"),new xT("37","우체국예금보험","우체국","POST","icon-bank-horizontal-postoffice"),new xT("39","저축은행중앙회","저축","SAVINGBANK","icon-bank-horizontal-sb"),new xT("35","전북은행","전북","JEONBUKBANK","icon-bank-horizontal-jbb"),new xT("42","제주은행","제주","JEJUBANK","icon-bank-horizontal-jejubank"),new xT("15","카카오뱅크","카카오뱅크","KAKAOBANK","icon-bank-horizontal-kakaobank"),new xT("3A","케이뱅크","케이뱅크","KBANK","icon-bank-horizontal-kbank"),new xT("24","토스뱅크","토스뱅크","TOSSBANK","icon-bank-horizontal-tossbank"),new xT("21","하나카드","하나","HANA","icon-bank-horizontal-hanacard"),new xT("61","현대카드","현대","HYUNDAI","icon-bank-horizontal-hyundaicard"),new xT("11","KB국민카드","국민","KOOKMIN","icon-bank-horizontal-kb"),new xT("91","NH농협카드","농협","NONGHYEOP","icon-bank-horizontal-nhbank"),new xT("34","Sh수협은행","수협","SUHYEOP","icon-bank-horizontal-sh"),new xT("6D","다이너스 클럽","다이너스","DINERS","icon-bank-horizontal-diners"),new xT("6I","디스커버","디스커버","DISCOVER","icon-bank-horizontal-discover"),new xT("4M","마스터카드","마스터","MASTER","icon-bank-horizontal-master"),new xT("3C","유니온페이","유니온페이","UNIONPAY","icon-bank-horizontal-unionpay"),new xT("4J","JCB","JCB","JCB","icon-bank-horizontal-jcb"),new xT("4V","VISA","비자","VISA","icon-bank-horizontal-visa"),new xT("3K","기업비씨","기업","IBK_BC","icon-bank-horizontal-ibk"),new xT("7A","아메리칸 익스프레스F","AMEX","AMEX","icn-bank-amex"),new xT("KBS","KB증권","KB증권","KBSEC","icon-bank-horizontal-kbsec"),new xT("PCP","페이코포인트","페이코포인트","PAYCOPOINT","icon-bank-horizontal-payco"),new xT("NIC","나이스페이먼츠","나이스","NICE","icon-bank-horizontal-NICE"),new xT("KON","코나","코나","KONA","icon-bank-horizontal-kona");var _T=Object.defineProperty,NT=Object.defineProperties,OT=Object.getOwnPropertyDescriptors,MT=Object.getOwnPropertySymbols,LT=Object.prototype.hasOwnProperty,UT=Object.prototype.propertyIsEnumerable,BT=function(e,t,r){return t in e?_T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},DT=function(e,t){for(var r in t||(t={}))LT.call(t,r)&&BT(e,r,t[r]);if(MT){var n,i=E(MT(t));try{for(i.s();!(n=i.n()).done;){r=n.value;UT.call(t,r)&&BT(e,r,t[r])}}catch(e){i.e(e)}finally{i.f()}}return e},KT=function(e,t){return NT(e,OT(t))},FT=function(e,t){var r={};for(var n in e)LT.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&MT){var i,o=E(MT(e));try{for(o.s();!(i=o.n()).done;){n=i.value;t.indexOf(n)<0&&UT.call(e,n)&&(r[n]=e[n])}}catch(e){o.e(e)}finally{o.f()}}return r},jT=function(e,t){for(var r in t)_T(e,r,{get:t[r],enumerable:!0})},qT=function(e,t,r){return new Promise((function(n,i){var o=function(e){try{s(r.next(e))}catch(e){i(e)}},a=function(e){try{s(r.throw(e))}catch(e){i(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(o,a)};s((r=r.apply(e,t)).next())}))};function GT(e,t){if(!e)throw"string"==typeof t?new Error(t):t}function WT(e){return function(e){if(Number.isNaN(e.getTime()))throw new RangeError("Invalid time value");var t="",r="",n=HT(e.getDate(),2),i=HT(e.getMonth()+1,2),o=HT(e.getFullYear(),4);t="".concat(o,"-").concat(i,"-").concat(n);var a=e.getTimezoneOffset();if(0!==a){var s=Math.abs(a),u=HT(Math.trunc(s/60),2),c=HT(s%60,2);r="".concat(a<0?"+":"-").concat(u,":").concat(c)}else r="Z";var l=HT(e.getHours(),2),d=HT(e.getMinutes(),2),f=HT(e.getSeconds(),2),h=[l,d,f].join(":");return t="".concat(t,"T").concat(h).concat(r)}(e).substring(0,19)}function HT(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}function YT(e){return new Promise((function(t){setTimeout(t,e)}))}function VT(e){return"?"+Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function zT(e,t){var r=function(e){var t=w(e.split("?"),2),r=t[0],n=t[1];return null==n?{baseUrl:r,query:{}}:{baseUrl:r,query:n.split("&").reduce((function(e,t){var r=w(t.split("="),2),n=r[0],i=r[1];return KT(DT({},e),u({},decodeURIComponent(n),decodeURIComponent(i)))}),{})}}(e),n=null!=r.query?VT(DT(DT({},r.query),t)):"";return n.length>0?"".concat(r.baseUrl).concat(n):r.baseUrl}function ZT(e){return null==e||"string"==typeof e&&0===e.length}function QT(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=e;n--;)r+=t[Math.random()*t.length|0];return r}function JT(e,t){return new Proxy(e,{get:function(e,n){var i=e[n];return"function"==typeof i?function(e,t,n){return new Proxy(t,{apply:function(t,i,o){var a=QT(),s=!1,u=void 0;XT((function(){n.onStart({callId:a,functionName:e,request:k(o)})}));try{return"object"===r(u=Reflect.apply(t,i,o))&&u instanceof Promise?(s=!0,u.then((function(t){return XT((function(){n.onSuccess({callId:a,functionName:e,response:t})})),t})).catch((function(t){throw XT((function(){n.onFail({callId:a,functionName:e,error:$T(t)})})),t})).finally((function(){XT((function(){n.onEnd({callId:a,functionName:e})}))}))):(XT((function(){n.onSuccess({callId:a,functionName:e,response:u})})),u)}catch(t){throw XT((function(){n.onFail({callId:a,functionName:e,error:$T(t)})})),t}finally{s||XT((function(){n.onEnd({callId:a,functionName:e})}))}}})}(String(n),i,t):i}})}function $T(e){if(e instanceof Error)return e;if(e&&"object"===r(e)&&"toJSON"in e&&"function"==typeof e.toJSON)return new Error(e.toJSON());try{return new Error(JSON.stringify(e))}catch(e){return new Error("Fail to Serialized")}}function XT(e){try{e()}catch(e){}}jT({},{createDebugLogger:function(){return nx},getDebugLogger:function(){return ix}});var ex=function(){function e(t){o(this,e),this.transport=t}return s(e,[{key:"info",value:function(e,t){this.transport.info(e,t)}},{key:"error",value:function(e,t){this.transport.error(e,t)}},{key:"start",value:function(e,t,r){this.transport.info("".concat(e,":").concat(t,":start"),r)}},{key:"success",value:function(e,t,r){this.transport.info("".concat(e,":").concat(t,":success"),r)}},{key:"fail",value:function(e,t,r){this.transport.error("".concat(e,":").concat(t,":fail"),r)}},{key:"end",value:function(e,t,r){this.transport.info("".concat(e,":").concat(t,":end"),r)}},{key:"wrapDomainModels",value:function(e,t){var r=this;return JT(t,{onStart:function(t){r.start(e,t.functionName,{request:tx(t.request)})},onSuccess:function(t){r.success(e,t.functionName,{response:tx(t.response)})},onFail:function(t){var n,i;r.fail(e,t.functionName,{error:tx(t.error),exception:null!=(i=null==(n=t.error)?void 0:n.stack)?i:""})},onEnd:function(t){r.end(e,t.functionName)}})}},{key:"startTransaction",value:function(e,t,r,n){this.transport.startTransaction(r,"".concat(e,":").concat(t,":start"),n)}},{key:"successTransaction",value:function(e,t,r,n){this.transport.successTransaction(r,"".concat(e,":").concat(t,":success"),n)}},{key:"failTransaction",value:function(e,t,r,n){this.transport.failureTransaction(r,"".concat(e,":").concat(t,":fail"),n)}},{key:"endTransaction",value:function(e,t,r,n){this.transport.endTransaction(r,"".concat(e,":").concat(t,":end"),n)}},{key:"wrapSDKInstance",value:function(e,t){var r=this;return JT(t,{onStart:function(t){r.startTransaction(e,t.functionName,t.callId,{request:tx(t.request)})},onSuccess:function(t){r.successTransaction(e,t.functionName,t.callId,{response:tx(t.response)})},onFail:function(t){var n,i;r.failTransaction(e,t.functionName,t.callId,{error:tx(t.error),exception:null!=(i=null==(n=t.error)?void 0:n.stack)?i:""})},onEnd:function(t){r.endTransaction(e,t.functionName,t.callId)}})}}],[{key:"of",value:function(t){return new e(t.transport)}}]),e}();function tx(e){return e instanceof Error?JSON.stringify(e.message):JSON.stringify(e)}var rx=null;function nx(e){rx=new ex(e)}function ix(){if(null==rx)throw new Error("Logger 가 초기화 되지 않았습니다.");return rx}var ox={};jT(ox,{AlreadyWidgetRenderedError:function(){return i_},AuthenticateRequestDenyError:function(){return sx},AuthenticateTokenAcquireFailError:function(){return ux},BelowZeroAmountError:function(){return kx},BiometricAuthCanceledError:function(){return fx},BiometricAuthFailedError:function(){return hx},BrandpayAuthenticatedAPIService:function(){return s_},ClientKey:function(){return $_},CollectionManager:function(){return E_},CustomPaymentMethodUnableToPayError:function(){return e_},CustomerKey:function(){return eN},CustomerSessionFactory:function(){return tN},DomesticAmount:function(){return o_},ExceedDepositAmountLimitError:function(){return Jx},ExceedMaxDueDateError:function(){return Xx},ExclusiveServiceTask:function(){return k_},IncorrectFailUrlFormatError:function(){return Mx},IncorrectPendingUrlFormatError:function(){return Lx},IncorrectSuccessUrlFormatError:function(){return Ox},InsecureKeyUsageError:function(){return Ex},InvalidAmountCurrencyError:function(){return wx},InvalidAmountValueError:function(){return gx},InvalidBillingAuthenticationRequestError:function(){return Kx},InvalidCallbackParameterError:function(){return xx},InvalidClientKeyError:function(){return Sx},InvalidCustomerKeyError:function(){return bx},InvalidEventParameterError:function(){return Tx},InvalidMetadataError:function(){return jx},InvalidMethodTransactionError:function(){return Nx},InvalidPaymentAuthenticationRequestError:function(){return Fx},InvalidRequestError:function(){return Ax},InvalidSelectorError:function(){return Vx},InvalidVariantKeyError:function(){return r_},InvalidWindowTargetParameterError:function(){return _x},LockedUserError:function(){return vx},Mid:function(){return rN},MissingRequiredPendingUrlParameterError:function(){return Ux},NeedAgreementWithRequiredTermsError:function(){return zx},NeedAgreementWithTermsError:function(){return ax},NeedAllowPopupError:function(){return lx},NeedCardPaymentDetailError:function(){return Zx},NeedMerchantOneTouchSettingError:function(){return cx},NeedRefundAccountDetailError:function(){return Qx},NonRegisteredUserError:function(){return px},NotFoundCustomerSessionError:function(){return Cx},NotFoundMidError:function(){return Px},NotRegisteredRedirectUrlError:function(){return dx},NotSelectedPaymentMethodError:function(){return n_},NotSetupAmountError:function(){return yx},NotSupportedAPIIndividualKeyError:function(){return Wx},NotSupportedEnvironment:function(){return mx},NotSupportedMethodError:function(){return Bx},NotSupportedMidError:function(){return Rx},NotSupportedPromiseError:function(){return Yx},NotSupportedWidgetKeyError:function(){return Gx},OverseasAmount:function(){return a_},PaymentRequestFailError:function(){return Dx},ProductBuilder:function(){return q_},ProviderStatusUnhealthyError:function(){return $x},RenderWidgetServiceTask:function(){return b_},SandboxParameterNotAllowedError:function(){return Hx},ServiceTask:function(){return w_},SetAmountServiceTask:function(){return S_},StandardBrandpayAddPaymentMethodProductBuilder:function(){return P_},StandardBrandpayAddPaymentMethodService:function(){return j_},StandardBrandpayAgreeToTermsManuallyProductBuilder:function(){return C_},StandardBrandpayChangeCashReceiptSettingsService:function(){return H_},StandardBrandpayChangeOneTouchPaySettingsService:function(){return Y_},StandardBrandpayChangePasswordProductBuilder:function(){return A_},StandardBrandpayChangePasswordService:function(){return V_},StandardBrandpayChangeSettingsProductBuilder:function(){return x_},StandardBrandpayChangeSettingsService:function(){return z_},StandardBrandpayCustomerAuthService:function(){return F_},StandardBrandpayGetIsOneTouchPayEnabledService:function(){return Z_},StandardBrandpayRegisterCustomerProductBuilder:function(){return N_},StandardBrandpayRequestPasswordAuthProductBuilder:function(){return M_},StandardBrandpayRequestPaymentAuthProductBuilder:function(){return D_},StandardBrandpayRequestPaymentProductBuilder:function(){return U_},StandardBrandpayRequestPaymentService:function(){return Q_},StandardBrandpayStartCustomerSessionService:function(){return J_},StandardPaymentGatewayRequestBillingAuthMobileCheckoutProductBuilder:function(){return nN},StandardPaymentGatewayRequestBillingAuthPcCheckoutProductBuilder:function(){return oN},StandardPaymentGatewayStartCustomerSessionService:function(){return mN},StandardPaymentWidgetRenderAgreementProductBuilder:function(){return kN},StandardPaymentWidgetRenderAgreementService:function(){return PN},StandardPaymentWidgetRenderPaymentMethodsProductBuilder:function(){return SN},StandardPaymentWidgetRenderPaymentMethodsService:function(){return CN},StandardPaymentWidgetStartCustomerSessionService:function(){return AN},StandardPaymentWidgetUpdateAmountService:function(){return TN},StandardWidgetRequestPaymentService:function(){return xN},Task:function(){return u_},TaskError:function(){return c_},TaskScheduler:function(){return g_},UnknownError:function(){return qx},UnsupportedTestPhasePaymentMethodError:function(){return t_},UserCancelError:function(){return Ix},V1PaymentGatewayRequestBillingAuthenticationService:function(){return vN},V1PaymentGatewayRequestMobileCardPaymentDirectCheckoutProductBuilder:function(){return sN},V1PaymentGatewayRequestMobilePaymentWindowCheckoutProductBuilder:function(){return cN},V1PaymentGatewayRequestPCCardPaymentDirectCheckoutProductBuilder:function(){return dN},V1PaymentGatewayRequestPCPaymentWindowCheckoutProductBuilder:function(){return hN},V1PaymentGatewayRequestPaymentService:function(){return gN},WidgetCheckout:function(){return wN},WidgetMidResolver:function(){return NN},WidgetRequestPaymentUseCaseBuilder:function(){return _N}});var ax=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"약관이 동의되지 않았습니다.")).name="NeedAgreementWithTermsError",e}return s(r)}(p(Error)),sx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"인증요청 최대 횟수가 초과되었습니다.")).name="AuthenticateRequestDenyError",e}return s(r)}(p(Error)),ux=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"인증 토큰을 발급에 실패하였습니다.")).name="AuthenticateTokenAcquireFailError",e}return s(r)}(p(Error)),cx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"원터치 사용이 불가능한 상점입니다.")).name="NeedMerchantOneTouchSettingError",e}return s(r)}(p(Error)),lx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"팝업이 허용되지 않았습니다.")).name="NeedAllowPopupError",e}return s(r)}(p(Error)),dx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"리다이렉트 URL이 등록되지 않았습니다.")).name="NotRegisteredRedirectUrlError",e}return s(r)}(p(Error)),fx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"NativeBridge와 통신 중 에러가 발생했습니다.")).name="BiometricAuthCanceledError",n}return s(r)}(p(Error)),hx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"NativeBridge와 통신 중 에러가 발생했습니다.")).name="BiometricAuthFailedError",n}return s(r)}(p(Error)),px=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"등록되지 않은 회원입니다.")).name="NonRegisteredUserError",n}return s(r)}(p(Error)),vx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"계정이 잠겼습니다.")).name="LockedUserError",n}return s(r)}(p(Error)),mx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"지원하지 않는 환경입니다.")).name="NotSupportedEnvironment",e}return s(r)}(p(Error)),yx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"amount 값이 설정되지 않았습니다.")).name="NotSetupAmountError",e}return s(r)}(p(Error)),gx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"amount의 value가 유효하지 않습니다.")).name="InvalidAmountValueError",e}return s(r)}(p(Error)),wx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"amount의 currency가 유효하지 않습니다.")).name="InvalidAmountCurrencyError",e}return s(r)}(p(Error)),kx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"금액은 0보다 커야 합니다.")).name="BelowZeroAmountError",e}return s(r)}(p(Error)),bx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"customer key가 유효하지 않습니다.")).name="InvalidCustomerKeyError",e}return s(r)}(p(Error)),Sx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"client key가 유효하지 않습니다.")).name="InvalidClientKeyError",e}return s(r)}(p(Error)),Ex=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"customer key에 secret key를 사용할 수 없습니다.")).name="InsecureKeyUsageError",e}return s(r)}(p(Error)),Px=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"mid를 찾을 수 없습니다.")).name="NotFoundMidError",e}return s(r)}(p(Error)),Rx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"mid 를 지원하지 않습니다.")).name="NotSupportedMidError",e}return s(r)}(p(Error)),Cx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"customer session을 찾을 수 없습니다.")).name="NotFoundCustomerSessionError",e}return s(r)}(p(Error)),Ix=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"취소되었습니다.")).name="UserCancelError",e}return s(r)}(p(Error)),Ax=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"잘못된 요청입니다.")).name="InvalidRequestError",n}return s(r)}(p(Error)),Tx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,"'".concat(e,"'은 지원하지 않습니다."))).name="InvalidEventParameterError",n}return s(r)}(p(Error)),xx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,"'".concat(e,"'의 콜백 함수 파라미터가 올바르지 않습니다."))).name="InvalidCallbackParameterError",n}return s(r)}(p(Error)),_x=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,"'".concat(e,"'은 지원하지 않습니다."))).name="InvalidWindowTargetParameterError",n}return s(r)}(p(Error)),Nx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"잘못된 트랜잭션 요청입니다")).name="InvalidMethodTransactionError",n}return s(r)}(p(Error)),Ox=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"잘못된 successUrl 입니다")).name="IncorrectSuccessUrlFormatError",e}return s(r)}(p(Error)),Mx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"잘못된 failUrl 입니다")).name="IncorrectFailUrlFormatError",e}return s(r)}(p(Error)),Lx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"잘못된 pendingUrl 입니다")).name="IncorrectPendingUrlFormatError",e}return s(r)}(p(Error)),Ux=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"pendingUrl 파라미터가 누락되었습니다.")).name="MissingRequiredPendingUrlParameterError",e}return s(r)}(p(Error)),Bx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"지원되지 않는 결제수단입니다.")).name="NotSupportedMethodError",n}return s(r)}(p(Error)),Dx=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.orderId,a=e.code,s=e.message;return o(this,r),(n=t.call(this,s)).name="PaymentRequestFailError",n.orderId=i,n.code=a,n}return s(r)}(p(Error)),Kx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"빌링 인증 요청 파라미터가 유효하지 않습니다.")).name="InvalidBillingAuthenticationRequestError",e}return s(r)}(p(Error)),Fx=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.code,a=e.message;return o(this,r),(n=t.call(this,a)).name="InvalidPaymentAuthenticationRequestError",n.code=i,n}return s(r)}(p(Error)),jx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"metadata가 유효하지 않습니다.")).name="InvalidMetadataError",e}return s(r)}(p(Error)),qx=function(e){c(r,e);var t=g(r);function r(e){var n,i;o(this,r);var a=e instanceof Error?e.message:"알 수 없는 에러가 발생했습니다.";return(n=t.call(this,a)).name="UnknownError",e instanceof Error&&(n.stack=e.stack),n.code=null!=(i=null==e?void 0:e.code)?i:"",n}return s(r)}(p(Error)),Gx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"결제위젯 연동키는 지원하지 않습니다.")).name="NotSupportedWidgetKeyError",e}return s(r)}(p(Error)),Wx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"API 개별 연동키는 지원하지 않습니다.")).name="NotSupportedAPIIndividualKeyError",e}return s(r)}(p(Error)),Hx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"sandbox 파리미터는 테스트 환경에서만 사용할 수 있습니다. 테스트 키를 사용해 주세요.")).name="SandboxParameterNotAllowedError",e}return s(r)}(p(Error)),Yx=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,null!=e?e:"Promise 방식을 지원하지 않습니다. successUrl, failUrl을 사용해주세요.")).name="NotSupportedPromiseError",n}return s(r)}(p(Error)),Vx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"selector가 유효하지 않습니다.")).name="InvalidSelectorError",e}return s(r)}(p(Error)),zx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"약관이 동의되지 않았습니다.")).name="NeedAgreementWithRequiredTermsError",e}return s(r)}(p(Error)),Zx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"카드사 또는 할부기간 정보가 부족합니다.")).name="NeedCardPaymentDetailError",e}return s(r)}(p(Error)),Qx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"가상계좌의 환불 계좌 정보가 부족합니다.")).name="NeedRefundAccountDetailError",e}return s(r)}(p(Error)),Jx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"가상계좌의 입금한도를 초과하였습니다.")).name="ExceedDepositAmountLimitError",e}return s(r)}(p(Error)),$x=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"원천사의 상태가 비정상입니다.")).name="ProviderStatusUnhealthyError",e}return s(r)}(p(Error)),Xx=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"가상계좌 최대유효만료기간이 초과되었습니다.")).name="ExceedMaxDueDateError",e}return s(r)}(p(Error)),e_=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"커스텀 결제수단으로 결제할 수 없습니다.")).name="CustomPaymentMethodUnableToPayError",e}return s(r)}(p(Error)),t_=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"테스트 환경을 지원하지 않는 결제수단입니다.")).name="UnsupportedTestPhasePaymentMethodError",e}return s(r)}(p(Error)),r_=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"variant key 가 유효하지 않습니다")).name="InvalidVariantKeyError",e}return s(r)}(p(Error)),n_=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"결제수단이 아직 선택되지 않았어요. 결제수단을 선택해 주세요.")).name="NotSelectedPaymentMethodError",e}return s(r)}(p(Error)),i_=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.call(this,"이미 위젯이 렌더링되어 있습니다. 다시 렌더링하려면 cleanup 을 먼저 호출해주세요.")).name="AlreadyWidgetRenderedError",e}return s(r)}(p(Error)),o_=function(){function e(t){o(this,e),this._currency="KRW",GT("number"==typeof t&&!Number.isNaN(t),new gx),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"currency",get:function(){return this._currency}},{key:"equals",value:function(e){return this.value===e.value}}],[{key:"of",value:function(t){return new e(t.value)}},{key:"isDomestic",value:function(e){return"KRW"===e.currency}}]),e}(),a_=function(){function e(t,r){o(this,e),GT("number"==typeof t&&!Number.isNaN(t)&&this.소수점_자리수는_최대_두자리인가(t),new gx),GT(["USD","JPY"].includes(r),new wx),this._value=t,this._currency=r}return s(e,[{key:"value",get:function(){return this._value}},{key:"currency",get:function(){return this._currency}},{key:"소수점_자리수는_최대_두자리인가",value:function(e){return/^-?\d+(\.\d{1,2})?$/.test(e.toString())}},{key:"equals",value:function(e){return this.value===e.value&&this.currency===e.currency}},{key:"isUSDCurrency",value:function(){return"USD"===this.currency}},{key:"isJPYCurrency",value:function(){return"JPY"===this.currency}}],[{key:"of",value:function(t){return new e(t.value,t.currency)}}]),e}(),s_=function(){function e(t,r,n){o(this,e),this.externalBrandpayAuthenticatedAPIService=t,this.brandpayCustomerSessionRepository=r,this.mutex=n}return s(e,[{key:"getTemporaryMethods",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getTemporaryMethods(t);case 6:return r=e.sent,n=r.temporaryPaymentMethods,i=r.newCustomerToken,this.brandpayCustomerSessionRepository.saveCurrentToken(i),e.abrupt("return",n);case 11:return e.prev=11,this.mutex.release(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])})))}},{key:"getIdentity",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getIdentity(t);case 6:return r=e.sent,n=r.identity,i=r.newCustomerToken,this.brandpayCustomerSessionRepository.saveCurrentToken(i),e.abrupt("return",n);case 11:return e.prev=11,this.mutex.release(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])})))}},{key:"getRegisteredPaymentMethods",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getRegisteredPaymentMethods(t);case 6:return r=e.sent,n=r.registeredPaymentMethods,i=r.newCustomerToken,this.brandpayCustomerSessionRepository.saveCurrentToken(i),e.abrupt("return",n);case 11:return e.prev=11,this.mutex.release(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])})))}},{key:"getProperties",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getProperties(t);case 6:return r=e.sent,n=r.properties,i=r.newCustomerToken,this.brandpayCustomerSessionRepository.saveCurrentToken(i),e.abrupt("return",n);case 11:return e.prev=11,this.mutex.release(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])})))}},{key:"updateProperties",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.mutex.acquire();case 3:return r=this.brandpayCustomerSessionRepository.findCurrentToken(),t.next=6,this.externalBrandpayAuthenticatedAPIService.updateProperties({customerToken:r,properties:e});case 6:return n=t.sent,i=n.newCustomerToken,this.brandpayCustomerSessionRepository.saveCurrentToken(i),t.abrupt("return");case 10:return t.prev=10,this.mutex.release(),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[0,,10,13]])})))}}]),e}(),u_=function(){function e(t){var r=this;o(this,e),this.timeout=t,this.status="pending",this.cancelListeners=[],this.cancelReason=null,this.id=QT(),this.resolve=function(e){},this.reject=function(){},this.process=new Promise((function(e,t){if(null==r.timeout)return r.resolve=e,void(r.reject=t);var n=setTimeout((function(){r.cancel(new l_(r))}),r.timeout);r.resolve=function(t){clearTimeout(n),e(t)},r.reject=function(e){clearTimeout(n),t(e)}}))}return s(e,[{key:"getId",value:function(){return this.id}},{key:"isPending",value:function(){return"pending"===this.status}},{key:"isProcessing",value:function(){return"processing"===this.status}},{key:"processing",value:function(){this.status="processing"}},{key:"wait",value:function(){return this.process}},{key:"finish",value:function(e){this.status="finished",this.resolve(e)}},{key:"isFinished",value:function(){return"finished"===this.status}},{key:"cancel",value:function(e){this.status="canceled";var t,r=E(this.cancelListeners);try{for(r.s();!(t=r.n()).done;){(0,t.value)(e)}}catch(e){r.e(e)}finally{r.f()}this.cancelReason=e,this.reject(e)}},{key:"onCancel",value:function(e){this.cancelListeners.push(e)}},{key:"isCanceled",value:function(){return"canceled"===this.status}},{key:"getCancelReason",value:function(){return this.cancelReason}}]),e}(),c_=function(e){c(r,e);var t=g(r);function r(e,n){var i;return o(this,r),(i=t.call(this,e)).task=n,i}return s(r)}(p(Error)),l_=function(e){c(r,e);var t=g(r);function r(e){var n;return o(this,r),(n=t.call(this,"Task is Timeout",e)).task=e,n}return s(r)}(c_),d_=function(){function e(){o(this,e),this.tasks=new Set,this.subscriber=null,this.status="pending"}return s(e,[{key:"add",value:function(e){this.tasks.add(e),this.process(e)}},{key:"isProcessing",value:function(){return"processing"===this.status}},{key:"subscribe",value:function(e){var t=this;if(null!=this.subscriber)throw new f_;this.subscriber=e,this.tasks.size>0&&this.tasks.forEach((function(e){return t.process(e)}));var r=!1;return{unsubscribe:function(){if(r)throw new h_;t.subscriber=null,r=!0}}}},{key:"process",value:function(e){var t=this;if(null!=this.subscriber)try{this.status="processing";var r=this.subscriber.next(e);r instanceof Promise?r.then((function(){t.tasks.delete(e),t.checkIfAllTasksDone()})).catch((function(){t.tasks.delete(e),t.checkIfAllTasksDone()})):(this.tasks.delete(e),this.checkIfAllTasksDone())}catch(t){this.tasks.delete(e),this.checkIfAllTasksDone()}}},{key:"checkIfAllTasksDone",value:function(){0===this.tasks.size&&this.subscriber&&(this.status="pending",this.subscriber.done())}}]),e}(),f_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[ParallelTaskScheduler] Already Subscribed")}return s(r)}(p(Error)),h_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[ParallelTaskScheduler] Already Unsubscribed")}return s(r)}(p(Error)),p_=function(){function e(){o(this,e),this.isPaused=!1,this.subscriber=null,this.buffer=[]}return s(e,[{key:"publish",value:function(e){this.buffer.push(e),this.handleLoop()}},{key:"subscribe",value:function(e){var t=this;if(null!=this.subscriber)throw new v_;this.subscriber=e,this.handleLoop();var r=!1;return{unsubscribe:function(){if(r)throw new m_;t.subscriber=null,r=!0}}}},{key:"handleLoop",value:function(){var e=this;if(this.buffer.length>0&&null!=this.subscriber&&!this.isPaused){this.isPaused=!0;try{var t=this.buffer.shift(),r=this.subscriber.next(t);r instanceof Promise?r.then((function(){e.isPaused=!1,e.handleLoop()})).catch((function(){e.isPaused=!1})):(this.isPaused=!1,this.handleLoop())}catch(e){this.isPaused=!1}}}}]),e}(),v_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[HappyMQ] Already Subscribed")}return s(r)}(p(Error)),m_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"[HappyMQ] Already Unsubscribed")}return s(r)}(p(Error)),y_=function(){function e(){o(this,e),this.queue=new p_}return s(e,[{key:"add",value:function(e){this.queue.publish(e)}},{key:"subscribe",value:function(e){this.queue.subscribe(e)}}]),e}();var g_=function(){function e(t){var r=this;o(this,e),this.mutex=t,this.tasks=new Map,this.waitingTasks=function(){var e=[];return{enqueue:function(t){e.push(t)},dequeue:function(){return e.shift()},peek:function(){return e[0]},size:function(){return e.length},getItems:function(){return[].concat(e)}}}(),this.cancelSubscribers=[],this.sequentialTaskScheduler=new y_,this.parallelTaskScheduler=new d_,this.sequentialTaskScheduler.subscribe({next:function(e){return e.wait().catch((function(){r.notifyCancelSubscribers(e)})).finally((function(){r.mutex.release(),r.tasks.delete(e.getId())}))}}),this.parallelTaskScheduler.subscribe({next:function(e){return e.wait().catch((function(){r.notifyCancelSubscribers(e)})).finally((function(){r.tasks.delete(e.getId())}))},done:function(){r.mutex.release()}})}return s(e,[{key:"notifyCancelSubscribers",value:function(e){var t=e.getCancelReason();null!=t&&this.cancelSubscribers.forEach((function(e){e(t)}))}},{key:"start",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isRunnable(new Set(this.tasks.values()))){t.next=2;break}throw new Nx("이미 다른 명령을 수행하고 있어요");case 2:if(this.tasks.set(e.getId(),e),this.waitingTasks.enqueue(e),e.isParallel()){t.next=11;break}return t.next=7,this.mutex.acquire();case 7:this.waitingTasks.dequeue(),this.sequentialTaskScheduler.add(e),t.next=20;break;case 11:if(!this.parallelTaskScheduler.isProcessing()||this.getNextTask()!==e){t.next=16;break}this.waitingTasks.dequeue(),this.parallelTaskScheduler.add(e),t.next=20;break;case 16:return t.next=18,this.mutex.acquire();case 18:this.handleLeadingParallelTasks(),this.parallelTaskScheduler.add(e);case 20:case"end":return t.stop()}}),t,this)})))}},{key:"getNextTask",value:function(){return this.waitingTasks.peek()}},{key:"getNumberOfLeadingParallelTasks",value:function(){var e,t=0,r=E(this.waitingTasks.getItems());try{for(r.s();!(e=r.n()).done;){if(!e.value.isParallel())break;t++}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"handleLeadingParallelTasks",value:function(){var e=this.getNumberOfLeadingParallelTasks();if(e>0){for(var t=0;t<e;t++)this.waitingTasks.dequeue();for(var r=0;r<e-1;r++)this.mutex.release()}}},{key:"cancelPendingTask",value:function(e){var t,r=E(this.tasks.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isPending()&&n.cancel(e.reason)}}catch(e){r.e(e)}finally{r.f()}}},{key:"subscribeCancel",value:function(e){this.cancelSubscribers.push(e)}}]),e}(),w_=function(e){c(r,e);var t=g(r);function r(e){var n;o(this,r);var i="INFINITY"===(null==e?void 0:e.timeout)?null:null!=(n=null==e?void 0:e.timeout)?n:6e4;return t.call(this,i)}return s(r)}(u_),k_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"isRunnable",value:function(e){return 0===e.size||Array.from(e).every((function(e){return e instanceof S_}))}},{key:"isParallel",value:function(){return!1}}]),r}(w_),b_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"isRunnable",value:function(e){return 0===e.size||Array.from(e).every((function(e){return e instanceof S_||e.isParallel()}))}},{key:"isParallel",value:function(){return!0}}]),r}(w_),S_=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"isRunnable",value:function(e){return!0}},{key:"isParallel",value:function(){return!1}}]),r}(w_),E_=function(){function e(){o(this,e),this.collection=new Map}return s(e,[{key:"set",value:function(e,t){GT(null==this.get(e),new Ax("".concat(e,": 이미 사용중인 key 입니다."))),this.collection.set(e,t)}},{key:"get",value:function(e){return this.collection.get(e)}},{key:"remove",value:function(e){null!=this.get(e)&&this.collection.delete(e)}},{key:"entries",value:function(){return this.collection.entries()}}]),e}(),P_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setCustomContextProvider",value:function(e){return this.parameters.set("customContext",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setRegisterablePaymentMethodTargetProvider",value:function(e){return this.parameters.set("registerablePaymentMethodTarget",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"setIsCreditCardScanAvailable",value:function(e){return this.parameters.set("isCreditCardScanAvailable",e),this}},{key:"setScanCreditCardEventProcess",value:function(e){return this.parameters.set("scanCreditCardEventProcess",e),this}},{key:"setWithBillingTerms",value:function(e){return this.parameters.set("withBillingTerms",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onPaymentMethodRegister",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_REGISTER",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"onCreditCardScan",value:function(e){return this.eventListeners.set("CREDIT_CARD_SCAN",e),this}},{key:"build",value:function(){return new R_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),R_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/add-payment-method",staging:"https://connect-staging.tosspayments.com/v2/m/entry/add-payment-method",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/add-payment-method",live:"https://connect.tosspayments.com/v2/m/entry/add-payment-method"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),C_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setAgreementTypesProvider",value:function(e){return this.parameters.set("agreementTypes",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onAgreementAgree",value:function(e){return this.eventListeners.set("AGREEMENT_AGREE",e),this}},{key:"build",value:function(){return new I_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),I_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/manual-agreement",staging:"https://connect-staging.tosspayments.com/v2/m/entry/manual-agreement",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/manual-agreement",live:"https://connect.tosspayments.com/v2/m/entry/manual-agreement"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),A_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onPasswordChange",value:function(e){return this.eventListeners.set("PASSWORD_CHANGE",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"build",value:function(){return new T_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),T_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-password",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-password",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/change-password",live:"https://connect.tosspayments.com/v2/m/entry/change-password"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),x_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOneTouchPayLabelProvider",value:function(e){return this.parameters.set("oneTouchPayLabel",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setCustomContextProvider",value:function(e){return this.parameters.set("customContext",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"setUnregisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("unregisterBiometricAuthTokenEventProcess",e),this}},{key:"setIsCreditCardScanAvailableProvider",value:function(e){return this.parameters.set("isCreditCardScanAvailable",e),this}},{key:"setScanCreditCardEventProcessProvider",value:function(e){return this.parameters.set("scanCreditCardEventProcess",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onCustomerUnregister",value:function(e){return this.eventListeners.set("CUSTOMER_UNREGISTER",e),this}},{key:"onPaymentMethodRegister",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_REGISTER",e),this}},{key:"onPaymentMethodUnregister",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_UNREGISTER",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"onCreditCardScan",value:function(e){return this.eventListeners.set("CREDIT_CARD_SCAN",e),this}},{key:"build",value:function(){return new __(this.productStage,this.parameters,this.eventListeners)}}]),e}(),__=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-settings",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/change-settings",live:"https://connect.tosspayments.com/v2/m/entry/change-settings"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),N_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setRegisterablePaymentMethodTargetProvider",value:function(e){return this.parameters.set("registerablePaymentMethodTarget",e),this}},{key:"setAddPaymentMethodFunnelResumeOptionsProvider",value:function(e){return this.parameters.set("addPaymentMethodFunnelResumeOptions",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setCustomContextProvider",value:function(e){return this.parameters.set("customContext",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"setIsCreditCardScanAvailable",value:function(e){return this.parameters.set("isCreditCardScanAvailable",e),this}},{key:"setScanCreditCardEventProcess",value:function(e){return this.parameters.set("scanCreditCardEventProcess",e),this}},{key:"setWithBillingTerms",value:function(e){return this.parameters.set("withBillingTerms",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onCustomerRegister",value:function(e){return this.eventListeners.set("CUSTOMER_REGISTER",e),this}},{key:"onPaymentMethodRegister",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_REGISTER",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"onCreditCardScan",value:function(e){return this.eventListeners.set("CREDIT_CARD_SCAN",e),this}},{key:"build",value:function(){return new O_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),O_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/register-customer",staging:"https://connect-staging.tosspayments.com/v2/m/entry/register-customer",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/register-customer",live:"https://connect.tosspayments.com/v2/m/entry/register-customer"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),M_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"onPasswordAuthSuccess",value:function(e){return this.eventListeners.set("PASSWORD_AUTH_SUCCESS",e),this}},{key:"build",value:function(){return new L_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),L_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-password-auth",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-password-auth",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/request-password-auth",live:"https://connect.tosspayments.com/v2/m/entry/request-password-auth"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),U_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setPaymentInfoProvider",value:function(e){return this.parameters.set("paymentInfo",e),this}},{key:"setCustomContextProvider",value:function(e){return this.parameters.set("customContext",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"setEncryptBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("encryptBiometricAuthTokenEventProcess",e),this}},{key:"setIsCreditCardScanAvailableProvider",value:function(e){return this.parameters.set("isCreditCardScanAvailable",e),this}},{key:"setScanCreditCardEventProcessProvider",value:function(e){return this.parameters.set("scanCreditCardEventProcess",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onPaymentSuccess",value:function(e){return this.eventListeners.set("PAYMENT_SUCCESS",e),this}},{key:"onPaymentFail",value:function(e){return this.eventListeners.set("PAYMENT_FAIL",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"onBiometricAuthTokenEncrypt",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_ENCRYPT",e),this}},{key:"onCreditCardScan",value:function(e){return this.eventListeners.set("CREDIT_CARD_SCAN",e),this}},{key:"onPaymentMethodNotExists",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_NOT_EXISTS",e),this}},{key:"onAccountAuthNumberExpired",value:function(e){return this.eventListeners.set("ACCOUNT_AUTH_NUMBER_EXPIRED",e),this}},{key:"build",value:function(){return new B_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),B_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-payment",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-payment",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/request-payment",live:"https://connect.tosspayments.com/v2/m/entry/request-payment"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),D_=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setMidProvider",value:function(e){return this.parameters.set("mid",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setCustomerTokenProvider",value:function(e){return this.parameters.set("customerToken",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setInitiatorProvider",value:function(e){return this.parameters.set("initiator",e),this}},{key:"setSafeAreaProvider",value:function(e){return this.parameters.set("safeArea",e),this}},{key:"setViewPortProvider",value:function(e){return this.parameters.set("viewPort",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setPaymentInfoProvider",value:function(e){return this.parameters.set("paymentInfo",e),this}},{key:"setCustomContextProvider",value:function(e){return this.parameters.set("customContext",e),this}},{key:"setCustomStyleProvider",value:function(e){return this.parameters.set("customStyle",e),this}},{key:"setAppInfo",value:function(e){return this.parameters.set("appInfo",e),this}},{key:"setIsBiometricAuthTokenRegisterable",value:function(e){return this.parameters.set("isBiometricAuthTokenRegisterable",e),this}},{key:"setIsBiometricAuthTokenRegistered",value:function(e){return this.parameters.set("isBiometricAuthTokenRegistered",e),this}},{key:"setRegisterBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("registerBiometricAuthTokenEventProcess",e),this}},{key:"setHardwareFeatureSupport",value:function(e){return this.parameters.set("hardwareFeatureSupport",e),this}},{key:"setEncryptBiometricAuthTokenEventProcess",value:function(e){return this.parameters.set("encryptBiometricAuthTokenEventProcess",e),this}},{key:"setIsCreditCardScanAvailableProvider",value:function(e){return this.parameters.set("isCreditCardScanAvailable",e),this}},{key:"setScanCreditCardEventProcessProvider",value:function(e){return this.parameters.set("scanCreditCardEventProcess",e),this}},{key:"onCloseRequest",value:function(e){return this.eventListeners.set("CLOSE_REQUEST",e),this}},{key:"onPaymentAuthSuccess",value:function(e){return this.eventListeners.set("PAYMENT_AUTH_SUCCESS",e),this}},{key:"onBiometricAuthTokenRegister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_REGISTER",e),this}},{key:"onBiometricAuthTokenUnregister",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_UNREGISTER",e),this}},{key:"onBiometricAuthTokenEncrypt",value:function(e){return this.eventListeners.set("BIOMETRIC_AUTH_TOKEN_ENCRYPT",e),this}},{key:"onCreditCardScan",value:function(e){return this.eventListeners.set("CREDIT_CARD_SCAN",e),this}},{key:"onPaymentMethodNotExists",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_NOT_EXISTS",e),this}},{key:"onAccountAuthNumberExpired",value:function(e){return this.eventListeners.set("ACCOUNT_AUTH_NUMBER_EXPIRED",e),this}},{key:"build",value:function(){return new K_(this.productStage,this.parameters,this.eventListeners)}}]),e}(),K_=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-payment-auth",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-payment-auth",sandbox:"https://connect-sandbox.tosspayments.com/v2/m/entry/request-payment-auth",live:"https://connect.tosspayments.com/v2/m/entry/request-payment-auth"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),F_=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.brandpayAuthenticatedAPIService=t,this.brandpayPublicServerAPI=r,this.customerSessionRepository=n,this.checkoutProductLauncherFactory=i,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"authenticateCustomer",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayPublicServerAPI.isTermsAgreed();case 2:return GT(!0===e.sent,new px),e.next=6,this.brandpayPublicServerAPI.authenticateCustomerToken();case 6:return t=e.sent,this.customerSessionRepository.saveCurrentToken(t),e.prev=8,e.next=11,this.brandpayAuthenticatedAPIService.getTemporaryMethods();case 11:return r=e.sent,n=r.account,i=r.card,GT(null==n&&null==i,new px),e.next=17,this.brandpayAuthenticatedAPIService.getIdentity();case 17:o=e.sent,a=o.isIdentified,s=o.authType,GT(a,new px),GT(null!=s&&"NONE"!==s,new px),e.next=29;break;case 24:if(e.prev=24,e.t0=e.catch(8),!(e.t0 instanceof vx)){e.next=28;break}throw e.t0;case 28:throw new px;case 29:case"end":return e.stop()}}),e,this,[[8,24]])})))}},{key:"registerCustomer",value:function(){return qT(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r=new u_(null),e.prev=2,n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),o={process:"PENDING"},a=new N_(i).setClientKeyProvider((function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)})).setMidProvider((function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)})).setCustomerKeyProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setCustomerTokenProvider((function(){return qT(s,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayPublicServerAPI.authenticateCustomerToken();case 3:return t=e.sent,this.customerSessionRepository.saveCurrentToken(t),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})))})).setSessionIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).setInitiatorProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())})).setSafeAreaProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())})).setViewPortProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())})).setOriginProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())})).setRegisterablePaymentMethodTargetProvider((function(){var e;return Promise.resolve(null!=(e=t.methodType)?e:"미선택")})).setAddPaymentMethodFunnelResumeOptionsProvider((function(){var e;return Promise.resolve({resume:null!=(e=t.resume)&&e})})).setCustomStyleProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())})).setAppInfo((function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegisterable((function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegistered((function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setRegisterBiometricAuthTokenEventProcess((function(){return Promise.resolve(o)})).setHardwareFeatureSupport((function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),s.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=w(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsCreditCardScanAvailable((function(){return s.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))})).setScanCreditCardEventProcess((function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})})).onCloseRequest((function(){return qT(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.isFinished()||r.isProcessing()){e.next=5;break}return r.processing(),e.next=4,n.shutdown();case 4:r.cancel(new Ix);case 5:case"end":return e.stop()}}),e)})))})).onCustomerRegister((function(){return qT(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.isProcessing()){e.next=6;break}if(r.processing(),t.keepProductAfterRegister){e.next=5;break}return e.next=5,n.shutdown();case 5:r.finish();case 6:case"end":return e.stop()}}),e)})))})).onPaymentMethodRegister((function(){var e;return null==(e=t.onPaymentMethodRegister)||e.call(t),Promise.resolve()})).onBiometricAuthTokenRegister((function(e){return qT(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:o={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),o=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))})).onBiometricAuthTokenUnregister((function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()})).onCreditCardScan((function(){throw new mx})).build(),e.next=9,n.launch(a);case 9:return e.next=11,r.wait();case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(2),r.cancel(e.t0);case 17:return e.abrupt("return",r.wait());case 18:case"end":return e.stop()}}),e,this,[[2,14]])})))}}]),e}(),j_=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=i,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(){return qT(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s,u,c,l=this,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},n=new k_({timeout:"INFINITY"}),e.next=4,this.taskScheduler.start(n);case 4:return e.prev=4,e.prev=5,e.next=8,this.customerAuthService.authenticateCustomer();case 8:e.next=28;break;case 10:if(e.prev=10,e.t0=e.catch(5),!(e.t0 instanceof vx)){e.next=17;break}return e.next=15,this.customerAuthService.registerCustomer({resume:t.resume,keepProductAfterRegister:!0});case 15:e.next=28;break;case 17:if(!(e.t0 instanceof px)){e.next=27;break}return i=!1,e.next=21,this.customerAuthService.registerCustomer({resume:t.resume,onPaymentMethodRegister:function(){i=!0}});case 21:if(null==(r=t.onRegister)||r.call(t),!i){e.next=25;break}return n.finish(void 0),e.abrupt("return",n.wait());case 25:e.next=28;break;case 27:throw e.t0;case 28:return o=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),a=this.productStageRepository.getLiveProductStage(),s={process:"PENDING"},u=!1,c=new P_(a).setClientKeyProvider((function(){return Promise.resolve(l.brandpayClientKeyRepository.findCurrentClientKey().value)})).setMidProvider((function(){var e,t,r=null!=(t=null==(e=l.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)})).setCustomerKeyProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setCustomerTokenProvider((function(){try{return Promise.resolve(l.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}})).setSessionIdProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserIdProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).setInitiatorProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getInitiator())})).setSafeAreaProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())})).setViewPortProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getWindow().getViewPort())})).setOriginProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getWindow().getOrigin())})).setRegisterablePaymentMethodTargetProvider((function(){return Promise.resolve("미선택")})).setCustomStyleProvider((function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getCustomStyle())})).setAppInfo((function(){return l.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegisterable((function(){return l.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegistered((function(){return l.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setRegisterBiometricAuthTokenEventProcess((function(){return Promise.resolve(s)})).setHardwareFeatureSupport((function(){return Promise.all([l.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),l.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=w(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsCreditCardScanAvailable((function(){return l.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))})).setScanCreditCardEventProcess((function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})})).setWithBillingTerms((function(){return Promise.resolve(!1)})).onCloseRequest((function(){return qT(l,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isProcessing()){e.next=5;break}return n.processing(),e.next=4,o.shutdown();case 4:u?n.finish(void 0):n.cancel(new Ix);case 5:case"end":return e.stop()}}),e)})))})).onPaymentMethodRegister((function(){return u=!0,Promise.resolve()})).onBiometricAuthTokenRegister((function(e){return qT(l,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:s={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),s=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))})).onBiometricAuthTokenUnregister((function(){return l.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()})).onCreditCardScan((function(){throw new mx})).build(),e.next=35,o.launch(c);case 35:return e.next=37,n.wait();case 37:return e.abrupt("return",e.sent);case 40:e.prev=40,e.t1=e.catch(4),n.cancel(e.t1);case 43:return e.abrupt("return",n.wait());case 44:case"end":return e.stop()}}),e,this,[[4,40],[5,10]])})))}}]),e}(),q_=function(){function e(t){o(this,e),this.productStage=t,this.parameters=new Map,this.events=new Map,this.productURLMap=null,this.commandNames=[],this.queryNames=[]}return s(e,[{key:"implementSpec",value:function(e){for(var t,r,n,i=e,o=0,a=Object.entries(i.parameter);o<a.length;o++){var s=w(a[o],2),u=s[0],c=s[1];this.parameters.set((n=u.replace("set","")).charAt(0).toLowerCase()+n.slice(1),c)}for(var l=0,d=Object.entries(i.event);l<d.length;l++){var f=w(d[l],2),h=f[0],p=f[1];this.events.set(h.replace("on","").replace(/([a-z])([A-Z])/g,"$1_$2").replace(/([A-Z])([A-Z][a-z])/g,"$1_$2").toUpperCase(),p)}return this.commandNames=null!=(t=null==i?void 0:i.command)?t:[],this.queryNames=null!=(r=null==i?void 0:i.query)?r:[],this.productURLMap=i.productURL,this}},{key:"build",value:function(){var e=new G_(this.productURLMap[this.productStage],this.parameters,this.events);return Object.assign(e,e.createCommandMethods(this.commandNames),e.createQueryMethods(this.queryNames))}}]),e}(),G_=function(){function e(t,r,n){o(this,e),this.productURL=t,this.parameters=r,this.events=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.events.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}},{key:"getProductURL",value:function(){return this.productURL}},{key:"createCommandMethods",value:function(e){var t,r=this,n={},i=E(e);try{var o=function(){var e=t.value;n[e]=function(t){return GT("function"==typeof r.executeCommand,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),r.executeCommand(W_(e),t)}};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}return n}},{key:"createQueryMethods",value:function(e){var t,r=this,n={},i=E(e);try{var o=function(){var e=t.value;n[e]=function(t){return GT("function"==typeof r.executeQuery,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),r.executeQuery(W_(e),t)}};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}return n}}]),e}();function W_(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase()}var H_=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=i,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new k_({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.prev=4,e.next=7,this.customerAuthService.authenticateCustomer();case 7:e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(4),!(e.t0 instanceof px||e.t0 instanceof vx)){e.next=16;break}return e.next=14,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 14:e.next=17;break;case 16:throw e.t0;case 17:return r=this.customerSessionRepository.findCurrentSession(),n=this.checkoutProductLauncherFactory.getLauncher({target:r.getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),o={process:"PENDING"},a=new q_(i).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-cash-receipt-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-cash-receipt-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-cash-receipt-settings"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(o)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),s.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=w(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return qT(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isProcessing()){e.next=5;break}return t.processing(),e.next=4,n.shutdown();case 4:t.cancel(new Ix);case 5:case"end":return e.stop()}}),e)})))},onCashReceiptChange:function(e){return qT(s,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.isProcessing()){r.next=5;break}return t.processing(),r.next=4,n.shutdown();case 4:t.finish(e);case 5:case"end":return r.stop()}}),r)})))},onBiometricAuthTokenRegister:function(e){return qT(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:o={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),o=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=24,n.launch(a);case 24:return e.next=26,t.wait();case 26:return e.abrupt("return",e.sent);case 29:e.prev=29,e.t1=e.catch(3),t.cancel(e.t1);case 32:return e.abrupt("return",t.wait());case 33:case"end":return e.stop()}}),e,this,[[3,29],[4,9]])})))}}]),e}(),Y_=function(){function e(t,r,n,i,a,s,u,c,l){o(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=i,this.brandpayPublicServerAPI=a,this.productStageRepository=s,this.brandpayClientKeyRepository=u,this.externalBrandpayNativeSDKFacade=c,this.brandpayMidRepository=l}return s(e,[{key:"execute",value:function(){return qT(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s,u,c=this,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=t.oneTouchPayLabel,n=new k_({timeout:"INFINITY"}),e.next=4,this.taskScheduler.start(n);case 4:return e.prev=4,e.next=7,this.brandpayPublicServerAPI.getMerchantIntegration();case 7:return i=e.sent,GT(!0===i.useMerchantOneTouch,new cx),e.prev=10,e.next=13,this.customerAuthService.authenticateCustomer();case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(10),!(e.t0 instanceof px||e.t0 instanceof vx)){e.next=22;break}return e.next=20,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 20:e.next=23;break;case 22:throw e.t0;case 23:return o=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),a=this.productStageRepository.getLiveProductStage(),s={process:"PENDING"},u=new q_(a).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-one-touch-pay-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-one-touch-pay-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-one-touch-pay-settings"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setMid:function(){var e,t;return Promise.resolve(null!=(t=null==(e=c.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null)},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(s)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:w(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setOneTouchPayLabel:function(){return Promise.resolve(null!=r?r:"원터치결제")}},event:{onCloseRequest:function(){return qT(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.shutdown();case 2:n.cancel(new Ix);case 3:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return qT(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:s={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),s=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return c.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=29,o.launch(u);case 29:return e.next=31,n.wait();case 31:return e.abrupt("return",e.sent);case 34:e.prev=34,e.t1=e.catch(4),n.cancel(e.t1);case 37:return e.abrupt("return",n.wait());case 38:case"end":return e.stop()}}),e,this,[[4,34],[10,15]])})))}}]),e}(),V_=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=i,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new k_({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.prev=4,e.next=7,this.customerAuthService.authenticateCustomer();case 7:e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(4),!(e.t0 instanceof px||e.t0 instanceof vx)){e.next=16;break}return e.next=14,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 14:e.next=17;break;case 16:throw e.t0;case 17:return r=this.customerSessionRepository.findCurrentSession(),n=this.checkoutProductLauncherFactory.getLauncher({target:r.getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),o={process:"PENDING"},a=new A_(i).setClientKeyProvider((function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)})).setCustomerKeyProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setCustomerTokenProvider((function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}})).setOriginProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())})).setSessionIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).setInitiatorProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())})).setSafeAreaProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())})).setViewPortProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())})).setMidProvider((function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)})).setCustomStyleProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())})).setAppInfo((function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegisterable((function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegistered((function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setRegisterBiometricAuthTokenEventProcess((function(){return Promise.resolve(o)})).setHardwareFeatureSupport((function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:w(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).onCloseRequest((function(){return qT(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isProcessing()){e.next=5;break}return t.processing(),e.next=4,n.shutdown();case 4:t.cancel(new Ix);case 5:case"end":return e.stop()}}),e)})))})).onPasswordChange((function(){return qT(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isProcessing()){e.next=5;break}return t.processing(),e.next=4,n.shutdown();case 4:t.finish(void 0);case 5:case"end":return e.stop()}}),e)})))})).onBiometricAuthTokenRegister((function(e){return qT(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:o={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),o=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))})).onBiometricAuthTokenUnregister((function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()})).build(),e.next=24,n.launch(a);case 24:return e.next=26,t.wait();case 26:return e.abrupt("return",e.sent);case 29:e.prev=29,e.t1=e.catch(3),t.cancel(e.t1);case 32:return e.abrupt("return",t.wait());case 33:case"end":return e.stop()}}),e,this,[[3,29],[4,9]])})))}}]),e}(),z_=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=i,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new k_({timeout:"INFINITY"}),t.next=3,this.taskScheduler.start(r);case 3:return t.prev=3,t.prev=4,t.next=7,this.customerAuthService.authenticateCustomer();case 7:t.next=17;break;case 9:if(t.prev=9,t.t0=t.catch(4),!(t.t0 instanceof px||t.t0 instanceof vx)){t.next=16;break}return t.next=14,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 14:t.next=17;break;case 16:throw t.t0;case 17:return n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),o={process:"PENDING"},a=new x_(i).setClientKeyProvider((function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)})).setMidProvider((function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)})).setCustomerKeyProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setCustomerTokenProvider((function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}})).setGlobalTraceIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).setInitiatorProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())})).setMerchantBrowserIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setSafeAreaProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())})).setSessionIdProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())})).setViewPortProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())})).setOriginProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())})).setOneTouchPayLabelProvider((function(){var t;return Promise.resolve(null!=(t=null==e?void 0:e.oneTouchPayLabel)?t:"원터치결제")})).setCustomStyleProvider((function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())})).setAppInfo((function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegisterable((function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegistered((function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setRegisterBiometricAuthTokenEventProcess((function(){return Promise.resolve(o)})).setHardwareFeatureSupport((function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),s.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=w(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsCreditCardScanAvailableProvider((function(){return s.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))})).setScanCreditCardEventProcessProvider((function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})})).onCloseRequest((function(){return qT(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shutdown();case 2:r.cancel(new Ix);case 3:case"end":return e.stop()}}),e)})))})).onCustomerUnregister((function(){var t;return null==(t=null==e?void 0:e.onCustomerUnregister)||t.call(e),Promise.resolve()})).onPaymentMethodRegister((function(){return qT(s,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(r=null==e?void 0:e.onPaymentMethodRegister)||r.call(e),t.abrupt("return",Promise.resolve());case 2:case"end":return t.stop()}}),t)})))})).onPaymentMethodUnregister((function(){var t;return null==(t=null==e?void 0:e.onPaymentMethodUnregister)||t.call(e),Promise.resolve()})).onBiometricAuthTokenRegister((function(e){return qT(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:o={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),o=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))})).onBiometricAuthTokenUnregister((function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()})).onCreditCardScan((function(){throw new mx})).build(),t.next=23,n.launch(a);case 23:return t.next=25,r.wait();case 25:return t.abrupt("return",t.sent);case 28:t.prev=28,t.t1=t.catch(3),r.cancel(t.t1);case 31:return t.abrupt("return",r.wait());case 32:case"end":return t.stop()}}),t,this,[[3,28],[4,9]])})))}}]),e}(),Z_=function(){function e(t,r,n,i){o(this,e),this.taskScheduler=t,this.brandpayCustomerSessionRepository=r,this.brandpayAuthenticatedAPIService=n,this.brandpayPublicServerAPI=i}return s(e,[{key:"execute",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new k_,e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.next=6,this.brandpayPublicServerAPI.isTermsAgreed();case 6:return GT(!0===e.sent,new ax),e.next=10,this.brandpayPublicServerAPI.authenticateCustomerToken();case 10:return r=e.sent,this.brandpayCustomerSessionRepository.saveCurrentToken(r),e.next=14,this.brandpayAuthenticatedAPIService.getProperties();case 14:return n=e.sent,i=n.useMerchantOneTouch,o=n.useCustomerOneTouch,GT(!0===i,new cx),t.finish(o),e.next=21,t.wait();case 21:return e.abrupt("return",e.sent);case 24:e.prev=24,e.t0=e.catch(3),t.cancel(e.t0);case 27:return e.abrupt("return",t.wait());case 28:case"end":return e.stop()}}),e,this,[[3,24]])})))}}]),e}(),Q_=function(){function e(t,r,n,i,a,s,u,c,l,d){o(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=i,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.urlValidator=u,this.domainLogService=c,this.externalBrandpayNativeSDKFacade=l,this.brandpayPublicServerAPI=d}return s(e,[{key:"execute",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o,a,s,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.parseRedirectUrl(e),n=new k_({timeout:"INFINITY"}),t.next=4,this.taskScheduler.start(n);case 4:if(t.prev=4,!(e.amount.value<=0)){t.next=7;break}throw new kx;case 7:return t.next=9,this.brandpayPublicServerAPI.validatePaymentRequest(e);case 9:return t.prev=9,t.next=12,this.customerAuthService.authenticateCustomer();case 12:this.domainLogService.logBrandpayAuthenticate({methodId:e.methodId}),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(9),!(t.t0 instanceof px||t.t0 instanceof vx)){t.next=22;break}return t.next=20,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 20:t.next=23;break;case 22:throw t.t0;case 23:return i=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),a={process:"PENDING"},s=new U_(o).setClientKeyProvider((function(){return Promise.resolve(u.brandpayClientKeyRepository.findCurrentClientKey().value)})).setMidProvider((function(){var t;return Promise.resolve(null!=(t=e.mid)?t:null)})).setCustomerKeyProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setCustomerTokenProvider((function(){try{return Promise.resolve(u.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}})).setSessionIdProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserIdProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).setInitiatorProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getInitiator())})).setSafeAreaProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())})).setViewPortProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getViewPort())})).setOriginProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getOrigin())})).setPaymentInfoProvider((function(){var t=e.orderId,r=e.orderName,n=e.customerEmail,i=e.customerName,o=e.taxFreeAmount,a=e.cultureExpense,s=e.amount,u=e.methodId,c=e.cardInstallmentPlan,l=e.useCardPoint,d=e.discountCode,f=e.cashReceipt,h=e.metadata;return Promise.resolve({orderId:t,orderName:r,customerEmail:n,customerName:i,taxFreeAmount:o,cultureExpense:a,methodId:u,cardInstallmentPlan:c,useCardPoint:l,discountCode:d,cashReceipt:f,amount:s.value,metadata:h})})).setCustomContextProvider((function(){return Promise.resolve(null)})).setCustomStyleProvider((function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomStyle())})).setAppInfo((function(){return u.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegisterable((function(){return u.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsBiometricAuthTokenRegistered((function(){return u.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setRegisterBiometricAuthTokenEventProcess((function(){return Promise.resolve(a)})).setHardwareFeatureSupport((function(){return Promise.all([u.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:w(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))})).setIsCreditCardScanAvailableProvider((function(){return u.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))})).setScanCreditCardEventProcessProvider((function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})})).onCloseRequest((function(){return qT(u,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isProcessing()){e.next=5;break}return n.processing(),e.next=4,i.shutdown();case 4:n.cancel(new Ix);case 5:case"end":return e.stop()}}),e)})))})).onPaymentSuccess((function(e){return qT(u,null,regeneratorRuntime.mark((function t(){var o,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(o=e).amount,s=FT(o,["methodId","amount"]),n.isProcessing()){t.next=10;break}return n.processing(),t.next=5,i.shutdown();case 5:if(u=o_.of({value:a}),null==r){t.next=9;break}return this.customerSessionRepository.findCurrentSession().getWindow().moveTo(r.successUrl,{query:KT(DT({},s),{amount:u.value,currency:u.currency})}),t.abrupt("return");case 9:n.finish(KT(DT({},s),{amount:u}));case 10:case"end":return t.stop()}}),t,this)})))})).onPaymentFail((function(e){return qT(u,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isProcessing()){t.next=8;break}return n.processing(),t.next=4,i.shutdown();case 4:if(null==r){t.next=7;break}return this.customerSessionRepository.findCurrentSession().getWindow().moveTo(r.failUrl,{query:e}),t.abrupt("return");case 7:n.cancel(new Dx(e));case 8:case"end":return t.stop()}}),t,this)})))})).onBiometricAuthTokenRegister((function(e){return qT(u,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:a={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a=t.t0 instanceof fx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))})).onBiometricAuthTokenUnregister((function(){return u.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()})).onCreditCardScan((function(){throw new mx})).build(),t.next=29,i.launch(s);case 29:return t.abrupt("return",n.wait());case 32:t.prev=32,t.t1=t.catch(4),n.cancel(t.t1);case 35:return t.abrupt("return",n.wait());case 36:case"end":return t.stop()}}),t,this,[[4,32],[9,15]])})))}},{key:"parseRedirectUrl",value:function(e){return"successUrl"in e&&void 0!==e.successUrl||"failUrl"in e&&void 0!==e.failUrl?(GT(this.urlValidator.isValid(e.successUrl),new Ox),GT(this.urlValidator.isValid(e.failUrl),new Mx),{successUrl:e.successUrl,failUrl:e.failUrl}):null}}]),e}(),J_=function(){function e(t,r,n,i){o(this,e),this.brandpayCustomerSessionRepository=t,this.brandpayClientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=i}return s(e,[{key:"execute",value:function(e){GT(e.clientKey.isAPIIndividualKey(),new Gx),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid),this.brandpayClientKeyRepository.saveCurrentClientKey(e.clientKey);var t=this.customerSessionFactory.createBrandpayCustomerSession({customerKey:e.customerKey,initiator:"brandpay-only",windowTarget:e.windowTarget,redirectURL:e.redirectURL,customStyle:e.customStyle});return this.brandpayCustomerSessionRepository.saveCurrentSession(t),this.brandpayCustomerSessionRepository.findCurrentSession()}}]),e}(),$_=function(){function e(t){o(this,e),GT("string"==typeof t,new Sx),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this.value===e.value}},{key:"isTestKey",value:function(){return this.value.startsWith("test_")}},{key:"isWidgetKey",value:function(){return this.value.startsWith("test_gck")||this.value.startsWith("live_gck")}},{key:"isAPIIndividualKey",value:function(){return this.value.startsWith("test_ck")||this.value.startsWith("live_ck")}}]),e}(),X_=function(){function e(t){o(this,e),GT("string"==typeof t&&/^[A-Za-z0-9-_=.@]{2,50}$/.test(t),new bx),GT(!this.isSecretKey(t),new Ex),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this._value===e.value}},{key:"isAnonymous",value:function(){return this._value===e.ANONYMOUS}},{key:"isSecretKey",value:function(e){return e.startsWith("test_sk")||e.startsWith("live_sk")||e.startsWith("test_gsk")||e.startsWith("live_gsk")}}]),e}();X_.ANONYMOUS="@@ANONYMOUS";var eN=X_,tN=function(){function e(t,r,n){o(this,e),this.tracingIdRepository=t,this.windowManager=r,this.deviceManager=n}return s(e,[{key:"createBrandpayCustomerSession",value:function(e){var t=this.tracingIdRepository.findSessionId(),r=this.tracingIdRepository.findMerchantBrowserId(),n=this.tracingIdRepository.findGlobalTraceId(),i=this.windowManager.getWindow();return{getCustomerKey:function(){return e.customerKey},getWindowTarget:function(){var t;return null!=(t=e.windowTarget)?t:"iframe"},getRedirectURL:function(){return e.redirectURL},getSessionId:function(){return t},getMerchantBrowserId:function(){return r},getInitiator:function(){return e.initiator},isDebugMode:function(){return!0},getGlobalTraceId:function(){return n},getWindow:function(){return i},getCustomStyle:function(){var t,r,n,i,o,a,s,u,c,l,d,f;return{theme:null!=(r=null==(t=e.customStyle)?void 0:t.theme)?r:null,highlightColor:null!=(i=null==(n=e.customStyle)?void 0:n.highlightColor)?i:null,buttonStyle:null!=(a=null==(o=null==e?void 0:e.customStyle)?void 0:o.buttonStyle)?a:null,isPaymentMethodBottomSheetAddMethodVisible:null==(u=null==(s=null==e?void 0:e.customStyle)?void 0:s.isPaymentMethodBottomSheetAddMethodVisible)||u,isNavigationBarVisible:null==(l=null==(c=null==e?void 0:e.customStyle)?void 0:c.isNavigationBarVisible)||l,paddingTop:null!=(f=null==(d=null==e?void 0:e.customStyle)?void 0:d.paddingTop)?f:0}}}}},{key:"createPaymentGatewayCustomerSession",value:function(e){var t=this.tracingIdRepository.findSessionId(),r=this.tracingIdRepository.findMerchantBrowserId(),n=this.tracingIdRepository.findGlobalTraceId(),i=this.windowManager.getWindow(),o=this.deviceManager.getDevice();return{getCustomerKey:function(){return e.customerKey},getSessionId:function(){return t},getMerchantBrowserId:function(){return r},isDebugMode:function(){return!0},getGlobalTraceId:function(){return n},getWindow:function(){return i},getDeviceType:function(){return!0===o.isMobile()?"MOBILE":"PC"},isWidgetSession:function(){var t;return null!=(t=e.isWidgetSession)&&t}}}},{key:"createPaymentWidgetCustomerSession",value:function(e){var t=this.tracingIdRepository.findSessionId(),r=this.tracingIdRepository.findMerchantBrowserId(),n=this.tracingIdRepository.findGlobalTraceId(),i=this.windowManager.getWindow(),o=this.deviceManager.getDevice();return{getCustomerKey:function(){return e.customerKey},getSessionId:function(){return t},getMerchantBrowserId:function(){return r},isDebugMode:function(){return!0},getGlobalTraceId:function(){return n},getWindow:function(){return i},getPreviousPaymentMethodId:function(){return e.previousPaymentMethodId},getDeviceType:function(){return!0===o.isMobile()?"MOBILE":"PC"},getMemberType:function(){return e.customerKey.isAnonymous()?"NON_MEMBER":"MEMBER"}}}}]),e}(),rN=function(){function e(t){o(this,e),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this.value===e.value}}]),e}(),nN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGtidProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPayloadProvider",value:function(e){return this.parameters.set("payload",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"build",value:function(){return new iN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),iN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/billing/mobile",staging:"https://payment-gateway-staging.tosspayments.com/billing/mobile",sandbox:"https://payment-gateway-sandbox.tosspayments.com/billing/mobile",live:"https://payment-gateway.tosspayments.com/billing/mobile"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),oN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGtidProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPayloadProvider",value:function(e){return this.parameters.set("payload",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"build",value:function(){return new aN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),aN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/billing/pc",staging:"https://payment-gateway-staging.tosspayments.com/billing/pc",sandbox:"https://payment-gateway-sandbox.tosspayments.com/billing/pc",live:"https://payment-gateway.tosspayments.com/billing/pc"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),sN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new uN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),uN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/mobile/direct",staging:"https://payment-gateway-staging.tosspayments.com/mobile/direct",sandbox:"https://payment-gateway-sandbox.tosspayments.com/mobile/direct",live:"https://payment-gateway.tosspayments.com/mobile/direct"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),cN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new lN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),lN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/mobile",staging:"https://payment-gateway-staging.tosspayments.com/mobile",sandbox:"https://payment-gateway-sandbox.tosspayments.com/mobile",live:"https://payment-gateway.tosspayments.com/mobile"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),dN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new fN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),fN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/pc/direct",staging:"https://payment-gateway-staging.tosspayments.com/pc/direct",sandbox:"https://payment-gateway-sandbox.tosspayments.com/pc/direct",live:"https://payment-gateway.tosspayments.com/pc/direct"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),hN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new pN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),pN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/pc",staging:"https://payment-gateway-staging.tosspayments.com/pc",sandbox:"https://payment-gateway-sandbox.tosspayments.com/pc",live:"https://payment-gateway.tosspayments.com/pc"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),vN=function(){function e(t,r,n,i,a,s,u){o(this,e),this.taskScheduler=t,this.customerSessionRepository=r,this.externalPaymentGatewayService=n,this.checkoutProductLauncherFactory=i,this.productStageRepository=a,this.urlValidator=s,this.clientKeyRepository=u}return s(e,[{key:"execute",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l,d,f,h,p,v=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.request,i=new k_({timeout:"INFINITY"}),e.next=4,this.taskScheduler.start(i);case 4:return e.prev=4,GT("CARD"===r.method,new Bx("빌링은 카드만 지원합니다")),GT(this.urlValidator.isValid(r.successUrl),new Ox),GT(this.urlValidator.isValid(r.failUrl),new Mx),o=this.clientKeyRepository.findCurrentClientKey(),a=this.customerSessionRepository.findCurrentSession().getCustomerKey(),s=this.customerSessionRepository.findCurrentSession(),u="MOBILE"===s.getDeviceType(),e.next=14,this.externalPaymentGatewayService.isValidBillingAuthenticationRequest({clientKey:o,customerKey:a,isMobile:u,request:r});case 14:return c=e.sent,GT(c.isValid,new Kx),l=u?"self":null!=(n=r.windowTarget)?n:"iframe",d=this.checkoutProductLauncherFactory.getLauncher({target:l}),i.onCancel((function(){return d.shutdown()})),f=this.decideProductBuilder({isMobile:u}),h=o.isTestKey()?this.productStageRepository.getPretestProductStage():this.productStageRepository.getLiveProductStage(),p=new f(h).setClientKeyProvider((function(){return qT(v,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientKeyRepository.findCurrentClientKey().value);case 1:case"end":return e.stop()}}),e,this)})))})).setGtidProvider((function(){return qT(v,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerSessionRepository.findCurrentSession().getGlobalTraceId());case 1:case"end":return e.stop()}}),e,this)})))})).setIsMobileProvider((function(){return qT(v,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u);case 1:case"end":return e.stop()}}),e)})))})).setPayloadProvider((function(){return qT(v,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.stringify({referer:this.customerSessionRepository.findCurrentSession().getWindow().getOrigin(),payMethod:"CARD",customerKey:this.customerSessionRepository.findCurrentSession().getCustomerKey().value,customerId:this.customerSessionRepository.findCurrentSession().getCustomerKey().value,CustomerName:r.customerName,CustomerEmail:r.customerEmail,successUrl:r.successUrl,failUrl:r.failUrl,windowTarget:l}));case 1:case"end":return e.stop()}}),e,this)})))})).onCancel((function(){return qT(v,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.shutdown();case 2:i.cancel(new Ix);case 3:case"end":return e.stop()}}),e)})))})).build(),e.next=25,d.launch(p);case 25:return e.next=27,i.wait();case 27:return e.abrupt("return",e.sent);case 30:e.prev=30,e.t0=e.catch(4),i.cancel(e.t0);case 33:return e.abrupt("return",i.wait());case 34:case"end":return e.stop()}}),e,this,[[4,30]])})))}},{key:"decideProductBuilder",value:function(e){return e.isMobile?nN:oN}}]),e}(),mN=function(){function e(t,r,n,i){o(this,e),this.paymentGatewayCustomerSessionRepository=t,this.clientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=i}return s(e,[{key:"execute",value:function(e){yN.includes(e.clientKey.value)||GT(e.clientKey.isAPIIndividualKey(),new Gx),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid),this.clientKeyRepository.saveCurrentClientKey(e.clientKey);var t=this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey});return this.paymentGatewayCustomerSessionRepository.saveCurrentSession(t),this.paymentGatewayCustomerSessionRepository.findCurrentSession()}}]),e}(),yN=["live_gck_GePWvyJnrKJ2v5jOZG4eVgLzN97E","live_gck_0RnYX2w5322lnXOKdBdg3NeyqApQ"],gN=function(){function e(t,r,n,i,a,s,u){o(this,e),this.taskScheduler=t,this.paymentGatewayCustomerSessionRepository=r,this.externalPaymentGatewayService=n,this.checkoutProductLauncherFactory=i,this.productStageRepository=a,this.urlValidator=s,this.clientKeyRepository=u}return s(e,[{key:"execute",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return qT(this,null,regeneratorRuntime.mark((function e(){var r,n,i,o,a,s,u,c,l,d,f,h,p,v,m,y,g,w,k=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new k_({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(r);case 3:if(e.prev=3,n=t[0],i=t[1],GT(this.isValidMethodCode(n),new Bx),this.isPendingUrlRequired(t)&&(GT(null!=i.pendingUrl,new Ux),GT(this.urlValidator.isValid(i.pendingUrl),new Lx)),this.isForeignEasyPay(n)?GT(i.amount instanceof a_&&i.amount.isUSDCurrency(),new wx):this.isInternationalCardOnly(n,i)?GT(i.amount instanceof a_||i.amount instanceof o_,new wx):GT(i.amount instanceof o_,new wx),o=this.paymentGatewayCustomerSessionRepository.findCurrentSession(),a=this.parseIsPromise(i),s="MOBILE"===o.getDeviceType(),u="flowMode"in i&&"DIRECT"===i.flowMode,c="FOREIGN_EASY_PAY"===n,l="self"===i.windowTarget,d=this.getDefaultLanguage(n,i),GT(!(a&&s),new Yx("모바일 화면에서는 Promise 방식을 지원하지 않습니다.")),GT(!(a&&l),new Yx('windowTarget="self"는 Promise 방식을 지원하지 않습니다.')),GT(!(a&&c),new Yx("해외간편결제는 Promise 방식을 지원하지 않습니다.")),f=this.checkoutProductLauncherFactory.getLauncher({target:s||l||c?"self":u?"full-iframe":"iframe"}),r.onCancel((function(){return f.shutdown()})),h=this.clientKeyRepository.findCurrentClientKey(),null==i.sandbox||!1!==h.isTestKey()){e.next=23;break}throw new Hx;case 23:return e.next=25,this.externalPaymentGatewayService.validatePaymentRequest({clientKey:h,isMobile:s,isPromise:a,isWidgetSession:o.isWidgetSession(),method:n,request:KT(DT({},i),{customerId:o.getCustomerKey().value,language:d})});case 25:return p=e.sent,v=p.paymentToken,m=this.decideProductBuilder({isDirect:u,isMobile:s}),y=this.clientKeyRepository.findCurrentClientKey().isTestKey()?this.productStageRepository.getPretestProductStage():this.productStageRepository.getLiveProductStage(),g=new m(y).setClientKeyProvider((function(){return qT(k,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientKeyRepository.findCurrentClientKey().value);case 1:case"end":return e.stop()}}),e,this)})))})).setIsMobileProvider((function(){return qT(k,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s);case 1:case"end":return e.stop()}}),e)})))})).setIsPromiseProvider((function(){return qT(k,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a);case 1:case"end":return e.stop()}}),e)})))})).setGlobalTraceIdProvider((function(){return qT(k,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.getGlobalTraceId());case 1:case"end":return e.stop()}}),e)})))})).setPaymentTokenProvider((function(){return qT(k,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v);case 1:case"end":return e.stop()}}),e)})))})).onCancel((function(){return qT(k,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.shutdown();case 2:r.cancel(new Ix);case 3:case"end":return e.stop()}}),e)})))})).onSuccess((function(e){return qT(k,[e],regeneratorRuntime.mark((function e(t){var n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.paymentKey,o=t.orderId,a=t.amount,e.next=3,f.shutdown();case 3:r.finish({paymentKey:n,orderId:o,amount:o_.isDomestic(i.amount)?o_.of({value:a}):a_.of(i.amount)});case 4:case"end":return e.stop()}}),e)})))})).onFail((function(e){return qT(k,[e],regeneratorRuntime.mark((function e(t){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.orderId,i=t.code,o=t.message,e.next=3,f.shutdown();case 3:r.cancel(new Dx({orderId:n,code:i,message:o}));case 4:case"end":return e.stop()}}),e)})))})),null!=i.mId&&g.setMIdProvider((function(){return qT(k,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!=(t=i.mId)?t:null);case 1:case"end":return e.stop()}}),e)})))})),w=g.build(),e.next=34,f.launch(w);case 34:return e.next=36,r.wait();case 36:return e.abrupt("return",e.sent);case 39:e.prev=39,e.t0=e.catch(3),r.cancel(e.t0);case 42:return e.abrupt("return",r.wait());case 43:case"end":return e.stop()}}),e,this,[[3,39]])})))}},{key:"decideProductBuilder",value:function(e){var t=e.isDirect;return e.isMobile?t?sN:cN:t?dN:hN}},{key:"parseIsPromise",value:function(e){if("pendingUrl"in e&&void 0!==e.pendingUrl)return!1;var t="successUrl"in e&&void 0!==e.successUrl,r="failUrl"in e&&void 0!==e.failUrl;return!t||!r||(GT(this.urlValidator.isValid(e.successUrl),new Ox),GT(this.urlValidator.isValid(e.failUrl),new Mx),!1)}},{key:"isForeignEasyPay",value:function(e){return"FOREIGN_EASY_PAY"===e}},{key:"isInternationalCardOnly",value:function(e,t){return"CARD"===e&&"useInternationalCardOnly"in t&&!0===t.useInternationalCardOnly}},{key:"isValidMethodCode",value:function(e){return["CARD","VIRTUAL_ACCOUNT","MOBILE_PHONE","TRANSFER","CULTURE_GIFT_CERTIFICATE","GAME_GIFT_CERTIFICATE","BOOK_GIFT_CERTIFICATE","FOREIGN_EASY_PAY"].includes(e)}},{key:"getDefaultLanguage",value:function(e,t){if(this.isInternationalCardOnly(e,t)&&t.amount instanceof a_){if(t.amount.isJPYCurrency())return"JA";if(t.amount.isUSDCurrency())return"EN"}}},{key:"isPendingUrlRequired",value:function(e){var t=w(e,2),r=t[0],n=t[1];return"FOREIGN_EASY_PAY"===r&&"provider"in n&&["GCASH","TOUCHNGO","BOOST","BPI","BILLEASE","DANA","ALIPAYHK","TRUEMONEY","RABBIT_LINE_PAY","ALIPAY"].includes(n.provider)}}]),e}(),wN=function(){function e(){o(this,e),this.amount=null,this.subscribers=[]}return s(e,[{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"setAmount",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.amount||!this.amount.equals(e)){t.next=2;break}return t.abrupt("return");case 2:return this.amount=e,t.next=5,this.subscribers.map((function(t){return t.subscribeAmount(e)}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getAmount",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.amount);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),kN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setVariantKeyProvider",value:function(e){return this.parameters.set("variantKey",e),this}},{key:"setDeviceTypeProvider",value:function(e){return this.parameters.set("deviceType",e),this}},{key:"setMemberTypeProvider",value:function(e){return this.parameters.set("memberType",e),this}},{key:"setSessionId",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserId",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"onAgreementStatusChange",value:function(e){return this.eventListeners.set("AGREEMENT_STATUS_CHANGE",e),this}},{key:"build",value:function(){return new bN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),bN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-widget-dev.tosspayments.com/v2/entry/agreement",staging:"https://payment-widget-staging.tosspayments.com/v2/entry/agreement",sandbox:"https://payment-widget-sandbox.tosspayments.com/v2/entry/agreement",live:"https://payment-widget.tosspayments.com/v2/entry/agreement"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}},{key:"getAgreementStatus",value:function(){return GT("function"==typeof this.executeQuery,new Error("제품이 쿼리를 수행할 준비가 되지 않았습니다")),this.executeQuery("GET_AGREEMENT_STATUS")}}]),e}(),SN=function(){function e(t){o(this,e),this.productStage=t,this.eventListeners=new E_,this.parameters=new E_}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setVariantKeyProvider",value:function(e){return this.parameters.set("variantKey",e),this}},{key:"setDeviceTypeProvider",value:function(e){return this.parameters.set("deviceType",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setAmountProvider",value:function(e){return this.parameters.set("amount",e),this}},{key:"setPreviousPaymentMethodIdProvider",value:function(e){return this.parameters.set("previousPaymentMethodId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setBrandpayCustomerTokenProvider",value:function(e){return this.parameters.set("brandpayCustomerToken",e),this}},{key:"setBrandpayMidProvider",value:function(e){return this.parameters.set("brandpayMid",e),this}},{key:"onPaymentMethodSelect",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_SELECT",e),this}},{key:"onBrandpaySettingButtonClick",value:function(e){return this.eventListeners.set("BRANDPAY_SETTING_BUTTON_CLICK",e),this}},{key:"onBrandpayAddMethodButtonClick",value:function(e){return this.eventListeners.set("BRANDPAY_ADD_METHOD_BUTTON_CLICK",e),this}},{key:"onBrandpayCashReceiptButtonClick",value:function(e){return this.eventListeners.set("BRANDPAY_CASH_RECEIPT_BUTTON_CLICK",e),this}},{key:"build",value:function(){return new EN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),EN=function(){function e(t,r,n){o(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-widget-dev.tosspayments.com/v2/entry/payment-methods",staging:"https://payment-widget-staging.tosspayments.com/v2/entry/payment-methods",sandbox:"https://payment-widget-sandbox.tosspayments.com/v2/entry/payment-methods",live:"https://payment-widget.tosspayments.com/v2/entry/payment-methods"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}},{key:"setAmount",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:GT("function"==typeof this.executeCommand,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),this.executeCommand("SET_AMOUNT",e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"updateBrandpayCashReceipt",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:GT("function"==typeof this.executeCommand,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),this.executeCommand("UPDATE_BRANDPAY_CASH_RECEIPT",e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"updateBrandpayPaymentMethod",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:GT("function"==typeof this.executeCommand,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),this.executeCommand("UPDATE_BRANDPAY_PAYMENT_METHOD",e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"updateBrandpayCustomer",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:GT("function"==typeof this.executeCommand,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),this.executeCommand("UPDATE_BRANDPAY_CUSTOMER",e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedPaymentInfo",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return GT("function"==typeof this.executeQuery,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),e.abrupt("return",this.executeQuery("GET_SELECTED_PAYMENT_INFO"));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedPaymentMethod",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return GT("function"==typeof this.executeQuery,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),e.abrupt("return",this.executeQuery("GET_SELECTED_PAYMENT_METHOD"));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"validatePaymentRequest",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return GT("function"==typeof this.executeQuery,new Error("제품이 명령을 수행할 준비가 되지 않았습니다")),e.abrupt("return",this.executeQuery("GET_PAYMENT_REQUEST_VALIDATION_RESULT"));case 2:case"end":return e.stop()}}),e,this)})))}}]),e}(),PN=function(){function e(t,r,n,i,a){o(this,e),this.taskScheduler=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=i,this.clientKeyRepository=a}return s(e,[{key:"execute",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selector,n=t.variantKey,i=new b_,e.next=4,this.taskScheduler.start(i);case 4:return"AGREEMENT",e.prev=5,o=new E_,a=this.productStageRepository.getLiveProductStage(),s=new kN(a).setClientKeyProvider((function(){return Promise.resolve(c.clientKeyRepository.findCurrentClientKey().value)})).setCustomerKeyProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setVariantKeyProvider((function(){return Promise.resolve(null!=n?n:"AGREEMENT")})).setMemberTypeProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMemberType())})).setDeviceTypeProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getDeviceType())})).setSessionId((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserId((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).onAgreementStatusChange((function(e){var t;return null==(t=o.get("agreementStatusChange"))||t({agreedRequiredTerms:e.agreedRequiredTerms,agreements:e.agreements.map((function(e){return{term:{id:e.term.id,required:e.term.required},agreed:e.agreed}}))}),Promise.resolve()})).build(),o.set("destroy",(function(){return u.shutdown(),Promise.resolve()})),u=this.checkoutProductLauncherFactory.getLauncher({target:r}),e.next=13,u.launch(s);case 13:return i.finish(new RN(s,o)),e.next=16,i.wait();case 16:return e.abrupt("return",e.sent);case 19:e.prev=19,e.t0=e.catch(5),i.cancel(e.t0);case 22:return e.abrupt("return",i.wait());case 23:case"end":return e.stop()}}),e,this,[[5,19]])})))}}]),e}(),RN=function(){function e(t,r){o(this,e),this.product=t,this.eventListeners=r}return s(e,[{key:"getAgreementStatus",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.product.getAgreementStatus());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"on",value:function(e,t){GT("agreementStatusChange"===e,new Tx(e)),GT("function"==typeof t,new xx(e)),this.eventListeners.set(e,t)}},{key:"destroy",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.eventListeners.get("destroy"))||t();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),CN=function(){function e(t,r,n,i,a,s,u,c,l,d,f,h){o(this,e),this.taskScheduler=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=i,this.widgetKeyRepository=a,this.widgetMidResolver=s,this.brandpayCustomerAuthService=u,this.brandpayCustomerSessionRepository=c,this.brandpayChangeSettingsUsecase=l,this.brandpayChangeCashReceiptSettingsUsecase=d,this.brandpayAddPaymentMethodUsecase=f,this.brandpayMidRepository=h}return s(e,[{key:"execute",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l,d,f,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selector,n=t.variantKey,i=t.checkout,o=new b_,e.next=4,this.taskScheduler.start(o);case 4:return a="DEFAULT",e.next=7,i.getAmount();case 7:return GT(null!=e.sent,new yx),e.prev=9,e.next=12,this.widgetMidResolver.resolve(null!=n?n:a);case 12:return s=this.customerSessionRepository.findCurrentSession(),u=this.brandpayCustomerSessionRepository.findCurrentSession(),c=new E_,l=this.productStageRepository.getLiveProductStage(),d=new SN(l).setClientKeyProvider((function(){return Promise.resolve(h.widgetKeyRepository.findCurrentClientKey().value)})).setCustomerKeyProvider((function(){var e;return Promise.resolve(null==(e=null==s?void 0:s.getCustomerKey())?void 0:e.value)})).setMerchantBrowserIdProvider((function(){return Promise.resolve(s.getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(s.getGlobalTraceId())})).setVariantKeyProvider((function(){return Promise.resolve(null!=n?n:a)})).setDeviceTypeProvider((function(){return Promise.resolve(s.getDeviceType())})).setPreviousPaymentMethodIdProvider((function(){return Promise.resolve(s.getPreviousPaymentMethodId())})).setSessionIdProvider((function(){return Promise.resolve(s.getSessionId())})).setOriginProvider((function(){return Promise.resolve(u.getWindow().getOrigin())})).setBrandpayMidProvider((function(){var e,t,r=null!=(t=null==(e=h.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)})).setAmountProvider((function(){return qT(h,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getAmount();case 2:return GT(null!=(t=e.sent),new yx),e.abrupt("return",{value:t.value,currency:t.currency});case 5:case"end":return e.stop()}}),e)})))})).setBrandpayCustomerTokenProvider((function(){return qT(h,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayCustomerAuthService.authenticateCustomer();case 3:case 15:e.next=22;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(e.t0 instanceof px)){e.next=17;break}return e.prev=8,e.abrupt("return",this.brandpayCustomerSessionRepository.findCurrentToken());case 12:return e.prev=12,e.t1=e.catch(8),e.abrupt("return",null);case 17:if(!(e.t0 instanceof vx)){e.next=21;break}e.next=22;break;case 21:return e.abrupt("return",null);case 22:return e.prev=22,e.abrupt("return",this.brandpayCustomerSessionRepository.findCurrentToken());case 26:return e.prev=26,e.t2=e.catch(22),e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,this,[[0,5],[8,12],[22,26]])})))})).onPaymentMethodSelect((function(e){var t;return null==(t=c.get("paymentMethodSelect"))||t(e),Promise.resolve()})).onBrandpayAddMethodButtonClick((function(e){return qT(h,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandpayAddPaymentMethodUsecase.execute({resume:null==e?void 0:e.resume,onRegister:function(){d.updateBrandpayCustomer()}});case 2:return t.next=4,d.updateBrandpayPaymentMethod();case 4:case"end":return t.stop()}}),t,this)})))})).onBrandpayCashReceiptButtonClick((function(){return qT(h,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayChangeCashReceiptSettingsUsecase.execute();case 2:return t=e.sent,r=t.cashReceipt,e.next=6,d.updateBrandpayCashReceipt({cashReceipt:r});case 6:case"end":return e.stop()}}),e,this)})))})).onBrandpaySettingButtonClick((function(){return qT(h,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayChangeSettingsUsecase.execute({onCustomerUnregister:function(){d.updateBrandpayCustomer()},onPaymentMethodRegister:function(){d.updateBrandpayPaymentMethod()},onPaymentMethodUnregister:function(){d.updateBrandpayPaymentMethod()}});case 2:return e.next=4,d.updateBrandpayPaymentMethod();case 4:case"end":return e.stop()}}),e,this)})))})).build(),f=this.checkoutProductLauncherFactory.getLauncher({target:r}),e.next=20,f.launch(d);case 20:return c.set("destroy",(function(){return f.shutdown(),Promise.resolve()})),o.finish(new IN(d,c,this.customerSessionRepository,null!=n?n:a)),e.next=24,o.wait();case 24:return e.abrupt("return",e.sent);case 27:e.prev=27,e.t0=e.catch(9),o.cancel(e.t0);case 30:return e.abrupt("return",o.wait());case 31:case"end":return e.stop()}}),e,this,[[9,27]])})))}}]),e}(),IN=function(){function e(t,r,n,i){o(this,e),this.product=t,this.eventListeners=r,this.customerSessionRepository=n,this.variantKey=i}return s(e,[{key:"getVariantKey",value:function(){return this.variantKey}},{key:"getSelectedPaymentMethod",value:function(){return this.product.getSelectedPaymentMethod()}},{key:"on",value:function(e,t){GT(["paymentMethodSelect"].includes(e),new Tx(e)),GT("function"==typeof t,new xx(e)),this.eventListeners.set(e,t)}},{key:"subscribeAmount",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.product.setAmount({value:e.value,currency:e.currency});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"validatePaymentRequest",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.validatePaymentRequest();case 2:if(t=e.sent,r=t.isValid,n=t.errorCode,r){e.next=19;break}if(this.product.focus(),"PROVIDER_STATUS_UNHEALTHY"!==n){e.next=9;break}throw new $x;case 9:if("NEED_CARD_PAYMENT_DETAIL"!==n){e.next=11;break}throw new Zx;case 11:if("NEED_REFUND_ACCOUNT_DETAIL"!==n){e.next=13;break}throw new Qx;case 13:if("EXCEED_MAX_DUE_DATE"!==n){e.next=15;break}throw new Xx;case 15:if("EXCEED_DEPOSIT_AMOUNT_LIMIT"!==n){e.next=17;break}throw new Jx;case 17:if("CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY"!==n){e.next=19;break}throw new e_;case 19:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedPaymentInfo",value:function(){return this.product.getSelectedPaymentInfo()}},{key:"savePreviousPaymentMethod",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.getSelectedPaymentMethod();case 2:return t=e.sent,e.abrupt("return",this.customerSessionRepository.savePreviousPaymentMethodId(t.id));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.eventListeners.get("destroy"))||t();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),AN=function(){function e(t,r,n,i,a,s,u,c){o(this,e),this.paymentWidgetCustomerSessionRepository=t,this.clientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=i,this.widgetBrandpayCustomerSessionRepository=a,this.widgetKeyinPaymentGatewaySessionRepository=s,this.widgetInternationalPaymentGatewaySessionRepository=u,this.widgetNormalPaymentGatewaySessionRepository=c}return s(e,[{key:"execute",value:function(e){var t;GT(e.clientKey.isWidgetKey(),new Wx),this.clientKeyRepository.saveCurrentClientKey(e.clientKey),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid);var r=this.paymentWidgetCustomerSessionRepository.findPreviousPaymentMethodId(),n=this.customerSessionFactory.createPaymentWidgetCustomerSession({customerKey:e.customerKey,previousPaymentMethodId:r});return this.paymentWidgetCustomerSessionRepository.saveCurrentSession(n),this.widgetBrandpayCustomerSessionRepository.saveCurrentSession(this.customerSessionFactory.createBrandpayCustomerSession({customerKey:e.customerKey,initiator:"payment-widget",redirectURL:null==(t=e.brandpay)?void 0:t.redirectUrl})),this.widgetKeyinPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.widgetInternationalPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.widgetNormalPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.paymentWidgetCustomerSessionRepository.findCurrentSession()}}]),e}(),TN=function(){function e(t){o(this,e),this.taskScheduler=t}return s(e,[{key:"execute",value:function(e,t){return qT(this,null,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new S_,r.next=3,this.taskScheduler.start(n);case 3:return e.setAmount(t).then((function(){n.finish(void 0)})),r.next=6,n.wait();case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}}]),e}(),xN=function(){function e(t,r,n,i,a,s){o(this,e),this.taskScheduler=t,this.customerSessionRepository=r,this.widgetClientKeyRepository=n,this.widgetRequestPaymentUseCases=i,this.externalPaymentWidgetService=a,this.domainLogService=s}return s(e,[{key:"execute",value:function(e,t,r){return qT(this,null,regeneratorRuntime.mark((function n(){var i,o,a,s,u,c,l,d,f,h,p,v,m,y,g,w,k,b,S,E,P,R,C,I,A,T,x,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new k_({timeout:"INFINITY"}),n.next=3,this.taskScheduler.start(i);case 3:if(n.prev=3,n.t0=null!=r.agreementWidget,!n.t0){n.next=10;break}return n.next=8,r.agreementWidget.getAgreementStatus();case 8:n.t1=n.sent.agreedRequiredTerms,n.t0=!1===n.t1;case 10:if(!n.t0){n.next=12;break}throw new zx;case 12:return n.next=14,r.paymentMethodsWidget.getSelectedPaymentMethod();case 14:return a=n.sent,n.next=17,this.getMidBySelectedPaymentMethod(r.paymentMethodsWidget);case 17:return s=n.sent,this.domainLogService.logWidgetRequestPaymentStart({selectedPaymentMethod:a,paymentInfo:e,amount:t,mid:s}),n.prev=19,n.next=22,r.paymentMethodsWidget.validatePaymentRequest();case 22:n.next=28;break;case 24:throw n.prev=24,n.t2=n.catch(19),this.domainLogService.logWidgetRequestPaymentFail({selectedPaymentMethod:a,paymentInfo:e,amount:t,mid:s,error:n.t2}),n.t2;case 28:return n.next=30,r.paymentMethodsWidget.getSelectedPaymentInfo();case 30:if(u=n.sent,c=this.widgetClientKeyRepository.findCurrentClientKey(),l=this.customerSessionRepository.findCurrentSession(),!c.isTestKey()||!this.isNotSupportedPaymentMethodInTestPhase(u)){n.next=35;break}throw new t_;case 35:if(null==e.sandbox||!1!==c.isTestKey()){n.next=37;break}throw new Hx;case 37:return n.next=39,r.paymentMethodsWidget.savePreviousPaymentMethod();case 39:d="BRANDPAY"===u.code?"BRANDPAY":"NORMAL",f="successUrl"in e?KT(DT({},e),{successUrl:zT(e.successUrl,{paymentType:d})}):e,h=f.pendingUrl,p=FT(f,["pendingUrl"]),this.domainLogService.logWidgetRequestPaymentSuccess({selectedPaymentMethod:a,paymentInfo:e,amount:t,mid:s}),n.t3=u.code,n.next="BRANDPAY"===n.t3?45:"KEYIN"===n.t3?50:"PAYPAL"===n.t3?55:"GCASH"===n.t3||"TOUCHNGO"===n.t3||"BOOST"===n.t3||"BPI"===n.t3||"BILLEASE"===n.t3||"DANA"===n.t3||"ALIPAYHK"===n.t3||"TRUEMONEY"===n.t3||"RABBIT_LINE_PAY"===n.t3||"ALIPAY"===n.t3?60:"TRANSFER"===n.t3||"BANKPAY"===n.t3||"OPENBANKING"===n.t3?65:"VIRTUAL_ACCOUNT"===n.t3?71:"MOBILE_PHONE"===n.t3?77:"GAME_GIFT_CERTIFICATE"===n.t3||"BOOK_GIFT_CERTIFICATE"===n.t3||"CULTURE_GIFT_CERTIFICATE"===n.t3?82:"PINPAY"===n.t3?87:"TOSSPAY"===n.t3||"NAVERPAY"===n.t3||"SAMSUNGPAY"===n.t3||"APPLEPAY"===n.t3||"LPAY"===n.t3||"KAKAOPAY"===n.t3||"PAYCO"===n.t3||"SSG"===n.t3?92:"SHINHAN"===n.t3||"HYUNDAI"===n.t3||"SAMSUNG"===n.t3||"WOORI"===n.t3||"KOOKMIN"===n.t3||"LOTTE"===n.t3||"NONGHYEOP"===n.t3||"HANA"===n.t3||"BC"===n.t3||"KDBBANK"===n.t3||"TOSSBANK"===n.t3||"KAKAOBANK"===n.t3||"SUHYEOP"===n.t3||"JEONBUKBANK"===n.t3||"KBANK"===n.t3||"POST"===n.t3||"SAEMAUL"===n.t3||"CITI"===n.t3||"SAVINGBANK"===n.t3||"JEJUBANK"===n.t3||"GWANGJUBANK"===n.t3||"SHINHYEOP"===n.t3||"JCB"===n.t3||"UNIONPAY"===n.t3||"MASTER"===n.t3||"VISA"===n.t3||"DINERS"===n.t3||"DISCOVER"===n.t3||"IBK_BC"===n.t3||"AMEX"===n.t3?97:"KBPAY"===n.t3?102:107;break;case 45:return v=KT(DT({amount:t,mid:s},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),methodId:u.params.methodId,cardInstallmentPlan:u.params.installmentPlan,discountCode:u.params.discountCode,useCardPoint:u.params.useCardPoint,cashReceipt:u.params.cashReceipt}),n.next=48,this.widgetRequestPaymentUseCases.getBrandpay().execute(v);case 48:return o=n.sent,n.abrupt("break",107);case 50:return m=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s}),n.next=53,this.widgetRequestPaymentUseCases.getKeyin().execute("CARD",m);case 53:return o=n.sent,n.abrupt("break",107);case 55:return y=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,provider:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=58,this.widgetRequestPaymentUseCases.getInternational().execute("FOREIGN_EASY_PAY",y);case 58:return o=n.sent,n.abrupt("break",107);case 60:return g=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,provider:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,pendingUrl:h}),n.next=63,this.widgetRequestPaymentUseCases.getInternational().execute("FOREIGN_EASY_PAY",g);case 63:return o=n.sent,n.abrupt("break",107);case 65:return w={BANKPAY:"BANKPAY",OPENBANKING:"OPENBANKING",TRANSFER:void 0}[u.code],k=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,_transferProvider:w}),n.next=69,this.widgetRequestPaymentUseCases.getNormal().execute("TRANSFER",k);case 69:return o=n.sent,n.abrupt("break",107);case 71:return b=u.params,S=b.depositDeadline,E=b.refundAccount,P=b.customerEmail,R=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:P}),mId:s,dueDate:WT(S),refundReceiveAccount:null!=E?{bankCode:E.bankId,accountNumber:E.accountNumber,holderName:E.holderName}:void 0,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=75,this.widgetRequestPaymentUseCases.getNormal().execute("VIRTUAL_ACCOUNT",R);case 75:return o=n.sent,n.abrupt("break",107);case 77:return C=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=80,this.widgetRequestPaymentUseCases.getNormal().execute("MOBILE_PHONE",C);case 80:return o=n.sent,n.abrupt("break",107);case 82:return I=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=85,this.widgetRequestPaymentUseCases.getNormal().execute(u.code,I);case 85:return o=n.sent,n.abrupt("break",107);case 87:return A=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,cardInstallmentPlan:u.params.installmentPlan,flowMode:"DIRECT",easyPay:"PINPAY",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,paymentMethodOptions:{pinpay:{pinpayCustomerKey:l.getCustomerKey().value}}}),n.next=90,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",A);case 90:return o=n.sent,n.abrupt("break",107);case 92:return T=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,cardInstallmentPlan:u.params.installmentPlan,flowMode:"DIRECT",easyPay:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=95,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",T);case 95:return o=n.sent,n.abrupt("break",107);case 97:return x=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,cardInstallmentPlan:u.params.installmentPlan,useInternationalCardOnly:!!this.isForeignCardCompanyCode(u.code)||e.useInternationalCardOnly,useAppCardOnly:u.params.useAppCardOnly,useCardPoint:u.params.useCardPoint,freeInstallmentPlans:u.params.freeInstallmentPlans,flowMode:this.isForeignCardCompanyCode(u.code)?"DEFAULT":"DIRECT",cardCompany:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,discountCode:u.params.discountCode}),n.next=100,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",x);case 100:return o=n.sent,n.abrupt("break",107);case 102:return _=KT(DT({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:s,cardInstallmentPlan:u.params.installmentPlan,useInternationalCardOnly:e.useInternationalCardOnly,useAppCardOnly:!0,useCardPoint:u.params.useCardPoint,freeInstallmentPlans:u.params.freeInstallmentPlans,flowMode:"DIRECT",cardCompany:"KOOKMIN",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,discountCode:u.params.discountCode}),n.next=105,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",_);case 105:return o=n.sent,n.abrupt("break",107);case 107:return i.finish(null!=o?KT(DT({},o),{paymentType:d}):void 0),n.next=110,i.wait();case 110:return n.abrupt("return",n.sent);case 113:n.prev=113,n.t4=n.catch(3),i.cancel(n.t4);case 116:return n.abrupt("return",i.wait());case 117:case"end":return n.stop()}}),n,this,[[3,113],[19,24]])})))}},{key:"decideCustomerEmail",value:function(e){var t=e.customerEmailFromWidget,r=e.customerEmailFromMerchant;return ZT(t)?r:t}},{key:"isNotSupportedPaymentMethodInTestPhase",value:function(e){return!!this.isDigitalWalletProviderCode(e.code)&&["PAYCO"].includes(e.code)}},{key:"isDigitalWalletProviderCode",value:function(e){return["TOSSPAY","NAVERPAY","SAMSUNGPAY","APPLEPAY","LPAY","KAKAOPAY","PINPAY","PAYCO","SSG"].includes(e)}},{key:"getMidBySelectedPaymentMethod",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o,a,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.widgetClientKeyRepository.findCurrentClientKey(),n=e.getVariantKey(),t.next=4,this.externalPaymentWidgetService.fetchMidPackage(r,n);case 4:return i=t.sent,t.next=7,e.getSelectedPaymentMethod();case 7:if("BRANDPAY"!==(o=t.sent).code){t.next=12;break}return GT(null!=(a=i.getBrandpayMid()),"브랜드페이 MID가 존재하지 않습니다."),t.abrupt("return",a.value);case 12:if("KEYIN"!==o.code){t.next=16;break}return GT(null!=(s=i.getKeyinMid()),"키인 MID가 존재하지 않습니다."),t.abrupt("return",s.value);case 16:if(null==(u=i.getInternationalMid())){t.next=19;break}return t.abrupt("return",u.value);case 19:return GT(null!=(c=i.getNormalMid()),"일반 MID가 존재하지 않습니다."),t.abrupt("return",c.value);case 22:case"end":return t.stop()}}),t,this)})))}},{key:"isForeignCardCompanyCode",value:function(e){return["JCB","UNIONPAY","MASTER","VISA","DINERS","DISCOVER","AMEX"].includes(e)}}]),e}(),_N=function(){function e(){o(this,e),this.requestBrandpayPaymentUseCase=null,this.requestKeyinPaymentGatewayUseCase=null,this.requestInternationalPaymentGatewayUseCase=null,this.requestNormalPaymentGatewayUseCase=null}return s(e,[{key:"setRequestBrandpayPaymentUseCase",value:function(e){return this.requestBrandpayPaymentUseCase=e,this}},{key:"setRequestKeyinPaymentGatewayUseCase",value:function(e){return this.requestKeyinPaymentGatewayUseCase=e,this}},{key:"setRequestInternationalPaymentGatewayUseCase",value:function(e){return this.requestInternationalPaymentGatewayUseCase=e,this}},{key:"setRequestNormalPaymentGatewayUseCase",value:function(e){return this.requestNormalPaymentGatewayUseCase=e,this}},{key:"build",value:function(){var e=this;return GT(null!=this.requestBrandpayPaymentUseCase,"브랜드페이 결제 유스케이스가 설정되지 않았습니다."),GT(null!=this.requestKeyinPaymentGatewayUseCase,"키인 결제 유스케이스가 설정되지 않았습니다."),GT(null!=this.requestInternationalPaymentGatewayUseCase,"해외 간편 결제 유스케이스가 설정되지 않았습니다."),GT(null!=this.requestNormalPaymentGatewayUseCase,"일반 결제 유스케이스가 설정되지 않았습니다."),{getBrandpay:function(){return e.requestBrandpayPaymentUseCase},getKeyin:function(){return e.requestKeyinPaymentGatewayUseCase},getInternational:function(){return e.requestInternationalPaymentGatewayUseCase},getNormal:function(){return e.requestNormalPaymentGatewayUseCase}}}}]),e}(),NN=function(){function e(t,r,n,i,a,s){o(this,e),this.widgetKeyRepository=t,this.normalPaymentGatewayMidRepository=r,this.keyinPaymentGatewayMidRepository=n,this.internationalPaymentGatewayMidRepository=i,this.brandpayMidRepository=a,this.externalPaymentWidgetService=s}return s(e,[{key:"resolve",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.widgetKeyRepository.findCurrentClientKey(),t.next=3,this.externalPaymentWidgetService.fetchMidPackage(r,e);case 3:null!=(n=t.sent).getNormalMid()&&this.normalPaymentGatewayMidRepository.saveCurrentMid(n.getNormalMid()),null!=n.getKeyinMid()&&this.keyinPaymentGatewayMidRepository.saveCurrentMid(n.getKeyinMid()),null!=n.getInternationalMid()&&this.internationalPaymentGatewayMidRepository.saveCurrentMid(n.getInternationalMid()),null!=n.getBrandpayMid()&&this.brandpayMidRepository.saveCurrentMid(n.getBrandpayMid());case 8:case"end":return t.stop()}}),t,this)})))}}]),e}();jT({},{AbstractBrandpayNativeServiceFactory:function(){return WO},ActivationLogService:function(){return FO},AsyncSemaMutex:function(){return ON},BrandpayAuthenticatedServerAPI:function(){return iM},BrandpayCheckoutProductLauncherFactory:function(){return LO},BrandpayNotSupportedEnvironmentFacade:function(){return GO},BrandpayPublicServerAPI:function(){return oM},DynamicCompileConfigRepository:function(){return KO},EnvironmentVariableProductStageRepository:function(){return QO},LocalStorage:function(){return FN},MemoryStorage:function(){return KN},MemoryStorageClientKeyRepository:function(){return DO},MemoryStorageMidRepository:function(){return jO},MemoryStorageNoopMidRepository:function(){return qO},MemoryStorageSynchronizedWidgetPaymentRequestRepository:function(){return ZO},PGWindowServerAPI:function(){return sM},PaymentGatewayCheckoutProductLauncherFactory:function(){return BO},PaymentWidgetCheckoutProductLauncherFactory:function(){return UO},SessionStorage:function(){return jN},SingletonMemoryStorage:function(){return qN},StandardBrandpayAuthenticatedServerAPIAdapter:function(){return uM},StandardBrandpayPublicServerAPIAdapter:function(){return cM},StandardPGWindowServerAPIAdapter:function(){return dM},StandardWidgetServerAPIAdapter:function(){return lM},TosspaymentsPaymentMethodIssuer:function(){return VO},V2BrandpayNativeSDKServiceFactory:function(){return HO},WebDeviceManager:function(){return MN},WebStorageBrandpayCustomerSessionRepository:function(){return QN},WebStoragePaymentGatewayCustomerSessionRepository:function(){return YO},WebStoragePaymentWidgetCustomerSessionRepository:function(){return zO},WebStorageTracingIdRepository:function(){return JO},WebUrlValidator:function(){return ZN},WebWindowManager:function(){return GN},WidgetServerAPI:function(){return aM},XHRHttpClient:function(){return XO},isAndroid:function(){return BN},isIE:function(){return LN},isIos:function(){return UN},isMobile:function(){return DN},isTossPaymentsError:function(){return nM}});var ON=function(){function e(){o(this,e),this._isLocked=!1,this.semaInstance=new cC(1,{capacity:100})}return s(e,[{key:"acquire",value:function(){return this._isLocked=!0,this.semaInstance.acquire()}},{key:"release",value:function(){this.semaInstance.release(),this._isLocked=!1}},{key:"isLocked",value:function(){return this._isLocked}}]),e}(),MN=function(){function e(){o(this,e)}return s(e,[{key:"getDevice",value:function(){return{isMobile:function(){return DN()},isIos:function(){return UN()},isAndroid:function(){return BN()}}}}]),e}();function LN(){return/MSIE|Trident/i.test(window.navigator.userAgent)}function UN(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)}function BN(){return!LN()&&/android/i.test(window.navigator.userAgent)}function DN(){return"undefined"!=typeof window&&(UN()||BN())}var KN=function(){function e(){o(this,e),this.storage=new Map}return s(e,[{key:"get",value:function(e){var t;return null!=(t=this.storage.get(e))?t:null}},{key:"set",value:function(e,t){this.storage.set(e,t)}},{key:"delete",value:function(e){this.storage.delete(e)}},{key:"clear",value:function(){this.storage.clear()}}]),e}(),FN=function(){function e(){o(this,e)}return s(e,[{key:"get",value:function(e){try{var t=zC.get(e);return null===t?null:JSON.parse(t)}catch(e){return null}}},{key:"set",value:function(e,t){zC.set(e,JSON.stringify(t))}},{key:"delete",value:function(e){zC.remove(e)}},{key:"clear",value:function(){zC.clear()}}]),e}(),jN=function(){function e(){o(this,e)}return s(e,[{key:"get",value:function(e){try{var t=ZC.get(e);return null===t?null:JSON.parse(t)}catch(e){return null}}},{key:"set",value:function(e,t){ZC.set(e,JSON.stringify(t))}},{key:"delete",value:function(e){ZC.remove(e)}},{key:"clear",value:function(){ZC.clear()}}]),e}(),qN=new KN,GN=function(){function e(){o(this,e)}return s(e,[{key:"getWindow",value:function(){return{getViewPort:function(){return{height:window.innerHeight,width:window.innerWidth}},getSafeArea:zN,getOrigin:YN,getHref:VN,moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.query?WN(e,t.query):e;window.location.href=r}}}}]),e}();function WN(e,t){var r=RI.parseUrl(e),n=RI.stringify(DT(DT({},r.query),t));return n.length>0?"".concat(r.url,"?").concat(n):r.url}var HN=null;function YN(){return window.location.origin}function VN(){return window.location.href}function zN(){if(null!=HN)return HN;var e=document.createElement("div");return e.style.paddingBottom="env(safe-area-inset-bottom)",document.body.appendChild(e),HN={bottom:Number(window.getComputedStyle(e).paddingBottom.replace("px",""))},document.body.removeChild(e),HN}var ZN=function(){function e(){o(this,e)}return s(e,[{key:"isValid",value:function(e){if(null==e)return!1;try{new URL(e)}catch(e){return!1}return!0}}]),e}(),QN=function(){function e(){o(this,e),this.currentSessionStorageKey="@tosspayments/brandpay-current-session",this.tokenStorageKey="@tosspayments/customer-token",this.memoryStorage=new KN}return s(e,[{key:"saveCurrentSession",value:function(e){this.memoryStorage.set(this.currentSessionStorageKey,e)}},{key:"findCurrentSession",value:function(){var e=this.memoryStorage.get(this.currentSessionStorageKey);if(null==e)throw new Cx;return e}},{key:"findCurrentToken",value:function(){var e=this.memoryStorage.get(this.tokenStorageKey);if(null==e)throw new Cx;return e}},{key:"saveCurrentToken",value:function(e){this.memoryStorage.set(this.tokenStorageKey,e)}}]),e}();function JN(e,t){for(var r in t)e.style[r]=t[r]}function $N(e,t){var r=document.getElementById(t);if(null!=r)return r;var n=document.createElement(e);return n.id=t,n}var XN="brandpay-loader-style";function eO(e){var t=document.createElement("style"),r=document.createElement("div");return t.id=XN,t.innerHTML=function(e){var t=null!=e?e:"#3188ff";return"@keyframes brandpay-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes brandpay-turn{0%{stroke-dashoffset:180}50%{stroke-dashoffset:45;transform:rotate(108deg)}to{stroke-dashoffset:180;transform:rotate(1turn)}}.brandpay-loader{position:absolute;top:50%;left:50%;margin-left:-".concat(24,"px;margin-top:-").concat(24,"px;display:inline-flex;flex-direction:column;align-items:center}.brandpay-loader>svg{display:block;margin:2px;width:").concat(48,"px;height:").concat(48,"px;stroke:").concat(t,";animation:brandpay-rotate 1.8s linear infinite forwards}.brandpay-loader>svg>circle{stroke-dasharray:180;stroke-dashoffset:0;transform-origin:center;animation:brandpay-turn 1.8s ease-in-out infinite forwards}")}(e),null==document.querySelector("#".concat(XN))&&document.head.appendChild(t),r.id="brandpay-loader",r.classList.add("brandpay-loader"),r.innerHTML='<svg width="48" height="48" viewBox="0 0 66 66"><circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></svg>',r}var tO=DT({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0"},DN()?{background:"none"}:void 0),rO="___tosspayments_brandpay_dimmer___";function nO(e){var t=e.showDimmer,r=e.loaderColor,n=iO();if(null!=n)return JN(n,tO),n;var i=eO(r),o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).styles,t=$N("div",rO);return JN(t,DT(DT({},tO),e)),t}();return o.appendChild(i),t&&document.body.appendChild(o),o}function iO(){return document.querySelector("#".concat(rO))}var oO={width:"1px",height:"1px",top:"-9999px",left:"-9999px"},aO=DN()?{position:"absolute",border:"none",width:"100%",height:"100%",top:"0",left:"0",transform:"none"}:{position:"absolute",border:"none",top:"50%",left:"50%",width:"".concat(375,"px"),height:"".concat(667,"px"),marginLeft:"-".concat(187.5,"px"),marginTop:"-".concat(333.5,"px"),backgroundColor:"#ffffff"},sO="__tosspayments_brandpay_iframe_v2__",uO=null;function cO(e,t){var r,n,i=t.container,o=null!=(r=fO())?r:function(){var e=document.createElement("iframe");return e.id=sO,dO(e),{iframe:e}}().iframe;return null==o||o.removeAttribute("sandbox"),null==uO&&i.appendChild(o),null==(n=o.contentWindow)||n.location.replace(e),(uO=o).title="토스페이먼츠 브랜드페이",uO.addEventListener("load",hO),{iframe:o}}function lO(){return uO}function dO(e){JN(e,aO)}function fO(){return document.querySelector("#".concat(sO))}function hO(){null!=uO&&dO(uO)}var pO=function(){function e(t){o(this,e),this.Bridge=t,this.mutex=new ON}return s(e,[{key:"launch",value:function(e){var t=this;return new Promise((function(r,n){return qT(t,null,regeneratorRuntime.mark((function t(){var i,o,a,s,u,c,l,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cleanup();case 2:return o=setTimeout((function(){f.shutdown(),n(new Error("Launch Request Timeout"))}),45e3),a=new Map(e.getParameterResolvers()),t.next=6,null==(i=a.get("customStyle"))?void 0:i();case 6:return s=t.sent,cO(e.getProductURL(),{container:nO({showDimmer:!0,loaderColor:null==s?void 0:s.highlightColor})}),t.next=11,this.Bridge.openBridge({targetWindow:lO().contentWindow,runtimeWindow:window});case 11:(u=t.sent).handleRequest("GET_PARAMETER",(function(e){return qT(f,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null!=(n=a.get(r))){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,n();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))})),u.subscribe("LIFECYCLE",(function(e){return qT(f,[e],regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,e.t0=n,e.next="READY"===e.t0?4:7;break;case 4:return clearTimeout(o),r(),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})))})),c=E(e.getEventListeners());try{for(d=function(){var e=w(l.value,2),t=e[0],r=e[1];u.subscribe(t,(function(e){return r(e)}))},c.s();!(l=c.n()).done;)d()}catch(e){c.e(e)}finally{c.f()}e.onExecuteQuery((function(e,t){return u.request(e,t,{timeout:45e3})})),e.onExecuteCommand((function(e,t){return u.request(e,t,{timeout:45e3})})),e.onFocus((function(){var e;null==(e=lO())||e.scrollIntoView()}));case 19:case"end":return t.stop()}}),t,this)})))}))}},{key:"shutdown",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mutex.acquire();case 2:return e.next=4,this.cleanup();case 4:r=void 0,null!=(r=fO())&&JN(r,oO),t=void 0,null!=(t=iO())&&JN(t,{width:"1px",height:"1px",top:"-9999px",left:"-9999px"}),this.mutex.release();case 7:case"end":return e.stop()}var t,r}),e,this)})))}},{key:"cleanup",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var t,r=fO();null!=r?(null==(t=r.contentWindow)||t.location.replace("https://pages.tosspayments.com/blank.html"),r.onload=function(){r.onload=null,r.setAttribute("sandbox",""),e()},null==uO||uO.removeEventListener("load",hO)):e()}));case 2:case"end":return e.stop()}}),e)})))}}]),e}(),vO={menubar:!0,location:!1,resizable:!0,scrollbars:!0,status:!0,channelmode:!0};function mO(e,t){var r,n=t,i=n.title,o=FT(n,["title"]);return window.open(e,i,(r=DT(DT({},vO),o),Object.entries(r).map((function(e){var t=w(e,2),r=t[0],n=t[1];return"boolean"!=typeof n?"".concat(r,"=").concat(n):"".concat(r,!0===n?"=yes":"=no")})).join(",")))}var yO=function(){function e(t){o(this,e),this.Bridge=t,this.popup=null,this.unsubscribePopupClosed=null}return s(e,[{key:"launch",value:function(e){var t=this;return new Promise((function(r,n){return qT(t,null,regeneratorRuntime.mark((function t(){var i,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cleanup();case 2:return i=setTimeout((function(){a.shutdown(),n(new Error("Launch Request Timeout"))}),45e3),null==this.popup?(this.popup=this.createPopup(e.getProductURL()),GT(null!=this.popup,new lx)):(this.popup.location.href=e.getProductURL(),this.popup.focus()),t.next=6,this.openBridge();case 6:o=t.sent,this.connectBridge(o,e,(function(){clearTimeout(i),r()})),this.unsubscribePopupClosed=this.subscribePopupClosed((function(){var t,r=E(e.getEventListeners());try{for(r.s();!(t=r.n()).done;){var n=w(t.value,2),i=n[0],o=n[1];"CLOSE_REQUEST"===i&&o()}}catch(e){r.e(e)}finally{r.f()}})),e.onFocus((function(){var e;null==(e=a.popup)||e.focus()}));case 10:case"end":return t.stop()}}),t,this)})))}))}},{key:"shutdown",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cleanup(),null==(t=this.popup)||t.close(),this.popup=null;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){var e;null==(e=this.unsubscribePopupClosed)||e.call(this)}},{key:"createPopup",value:function(e){return mO(e,{title:"브랜드페이",width:375,height:667})}},{key:"openBridge",value:function(){return this.Bridge.openBridge({targetWindow:this.popup,runtimeWindow:window})}},{key:"connectBridge",value:function(e,t,r){return qT(this,null,regeneratorRuntime.mark((function n(){var i,o,a,s,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=new Map(t.getParameterResolvers()),e.handleRequest("GET_PARAMETER",(function(e){return qT(u,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null!=(n=i.get(r))){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,n();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))})),e.subscribe("LIFECYCLE",(function(e){return qT(u,[e],regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,e.t0=n,e.next="READY"===e.t0?4:6;break;case 4:return r(),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))})),o=E(t.getEventListeners());try{for(s=function(){var t=w(a.value,2),r=t[0],n=t[1];e.subscribe(r,(function(e){return n(e)}))},o.s();!(a=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}t.onExecuteQuery((function(t,r){return e.request(t,r,{timeout:45e3})})),t.onExecuteCommand((function(t,r){return e.request(t,r,{timeout:45e3})}));case 7:case"end":return n.stop()}}),n)})))}},{key:"subscribePopupClosed",value:function(e){var t=this,r=setInterval((function(){var r;(null==(r=t.popup)?void 0:r.closed)&&e()}),1e3);return function(){clearInterval(r)}}}],[{key:"getInstance",value:function(t){return null==e.instance&&(e.instance=new e(t)),e.instance}}]),e}();yO.instance=null;var gO=yO,wO="__tosspayments_payment-gateway_dimmer__";function kO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=$N("div",wO);return JN(r,DT({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0",pointerEvents:"auto"},t)),r}var bO="__tosspayments_payment-gateway_iframe__";function SO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=$N("iframe",bO);return r.name=bO,JN(r,DT({border:"none"},t)),r}var EO=[];function PO(e){var t,r=e.data,n=E(EO);try{for(n.s();!(t=n.n()).done;){(0,t.value)({target:r.window,type:r.type,params:r.params})}}catch(e){n.e(e)}finally{n.f()}}var RO=function(e){1===(EO=[].concat(k(EO),[e])).length&&window.addEventListener("message",PO)},CO=function(){EO=[],window.removeEventListener("message",PO)},IO=function(){function e(){o(this,e),this.dimmer=null}return s(e,[{key:"launch",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dimmer=kO(),(r=SO({styles:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})).title="토스페이먼츠 전자결제",n={},i=E(e.getParameterResolvers()),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=14;break}return a=w(o.value,2),s=a[0],u=a[1],t.next=11,u();case 11:n[s]=t.sent;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:r.src=e.getProductURL()+VT(n),this.dimmer.appendChild(r),document.body.appendChild(this.dimmer),c=E(e.getEventListeners());try{for(d=function(){var e=w(l.value,2),t=e[0],r=e[1];RO((function(e){var n=e.target,i=e.type,o=e.params;"LEGACY"===n&&i===t&&r(o)}))},c.s();!(l=c.n()).done;)d()}catch(e){c.e(e)}finally{c.f()}e.onFocus((function(){null==r||r.scrollIntoView()}));case 28:case"end":return t.stop()}}),t,this,[[5,16,19,22]])})))}},{key:"shutdown",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:CO(),this.dimmer&&(document.body.removeChild(this.dimmer),this.dimmer=null);case 2:case"end":return e.stop()}}),e,this)})))}}]),e}(),AO=function(){function e(){o(this,e),this.dimmer=null}return s(e,[{key:"launch",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dimmer=kO(),h=void 0,p=void 0,v=void 0,h=(f={width:650,height:650,styles:{borderRadius:"20px"}}).width,p=f.height,v=f.styles,(r=SO({styles:DT({position:"absolute",border:"none",top:"50%",left:"50%",width:"".concat(h,"px"),height:"".concat(p,"px"),marginLeft:"-".concat(h/2,"px"),marginTop:"-".concat(p/2,"px"),backgroundColor:"#707070"},v)})).title="토스페이먼츠 전자결제",n={},i=E(e.getParameterResolvers()),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=14;break}return a=w(o.value,2),s=a[0],u=a[1],t.next=11,u();case 11:n[s]=t.sent;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:r.src=e.getProductURL()+VT(n),this.dimmer.appendChild(r),document.body.appendChild(this.dimmer),c=E(e.getEventListeners());try{for(d=function(){var e=w(l.value,2),t=e[0],r=e[1];RO((function(e){var n=e.target,i=e.type,o=e.params;"LEGACY"===n&&i===t&&r(o)}))},c.s();!(l=c.n()).done;)d()}catch(e){c.e(e)}finally{c.f()}e.onFocus((function(){null==r||r.scrollIntoView()}));case 28:case"end":return t.stop()}var f,h,p,v}),t,this,[[5,16,19,22]])})))}},{key:"shutdown",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:CO(),this.dimmer&&(document.body.removeChild(this.dimmer),this.dimmer=null);case 2:case"end":return e.stop()}}),e,this)})))}}]),e}(),TO=function(){function e(){o(this,e)}return s(e,[{key:"launch",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},n=E(e.getParameterResolvers()),t.prev=2,n.s();case 4:if((i=n.n()).done){t.next=11;break}return o=w(i.value,2),a=o[0],s=o[1],t.next=8,s();case 8:r[a]=t.sent;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),n.e(t.t0);case 16:return t.prev=16,n.f(),t.finish(16);case 19:this.subscribeBFCacheRestoreEvent().then((function(){var t,r=E(e.getEventListeners());try{for(r.s();!(t=r.n()).done;){var n=w(t.value,2),i=n[0],o=n[1];"cancel"===i&&o()}}catch(e){r.e(e)}finally{r.f()}})),u=e.getProductURL()+VT(r),location.href=u;case 22:case"end":return t.stop()}}),t,this,[[2,13,16,19]])})))}},{key:"shutdown",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))}},{key:"subscribeBFCacheRestoreEvent",value:function(){return new Promise((function(e){window.addEventListener("pageshow",(function t(r){r.persisted&&(window.removeEventListener("pageshow",t),e())}))}))}}]),e}(),xO="__tosspayments_payment_widget_iframe_wrapper__",_O=function(){function e(t){var r,n,i,a=t.src,s=t.title,u=t.styles,c=t.id,l=t.options;o(this,e),this.wrapper=this.createWrapper(),this.skeleton=null,this.skeletonOption={boxCount:0,padding:0,boxHeight:56},this.observers=[];var d=document.createElement("iframe");d.setAttribute("src",a),d.setAttribute("title",s),null!=c&&d.setAttribute("id",c),this.iframe=d,null!=u&&this.updateStyle(u),null!=(null==(r=null==l?void 0:l.skeleton)?void 0:r.boxCount)&&l.skeleton.boxCount>0&&(this.skeletonOption.boxCount=l.skeleton.boxCount,this.skeletonOption.padding=null!=(n=l.skeleton.padding)?n:0,this.skeletonOption.boxHeight=null!=(i=l.skeleton.boxHeight)?i:56,this.skeleton=this.createSkeleton(),this.wrapper.appendChild(this.skeleton))}return s(e,[{key:"onIframeRemoved",value:function(e){var t=this,r=new MutationObserver((function(r,n){var i,o=E(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;"childList"===a.type&&a.removedNodes.forEach((function(r){r.contains(t.iframe)&&(e(),n.disconnect())}))}}catch(e){o.e(e)}finally{o.f()}}));r.observe(document.body,{childList:!0,subtree:!0}),this.observers.push(r)}},{key:"updateStyle",value:function(e){for(var t in e)this.iframe.style[t]=e[t]}},{key:"mount",value:function(e){this.wrapper.appendChild(this.iframe),e.appendChild(this.wrapper)}},{key:"cleanup",value:function(){this.wrapper.remove(),this.observers.forEach((function(e){return e.disconnect()})),this.observers=[]}},{key:"createWrapper",value:function(){var e=document.createElement("div");return e.classList.add(xO),e.setAttribute("style","position: relative; width: 100%;"),e}},{key:"createSkeleton",value:function(){var e=document.createElement("div");e.classList.add("__tosspayments_payment_widget_iframe_skeleton__"),e.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; min-height: ".concat(this.skeletonOption.boxHeight*this.skeletonOption.boxCount+2*this.skeletonOption.padding,"px; display: none; flex-direction: column; gap: ").concat(8,"px; padding: ").concat(this.skeletonOption.padding,"px; box-sizing: border-box;"));var t=document.createElement("div");return t.setAttribute("style","width: 100%; height: ".concat(this.skeletonOption.boxHeight,"px !important; background: linear-gradient(96deg, rgba(160, 174, 189, 0.2) 0%, rgba(160, 174, 189, 0) 100%); border-radius: 8px;")),Array.from({length:this.skeletonOption.boxCount}).forEach((function(){return e.appendChild(t.cloneNode(!0))})),e}},{key:"hideSkeleton",value:function(){clearTimeout(this.skeletonTimeoutId),this.skeletonTimeoutId=void 0,GT(null!=this.skeleton,new Error("options.skeletonBoxCount를 넣어주세요.")),this.skeleton.style.display="none",this.wrapper.style.height="auto"}},{key:"showSkeleton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e.onTimeout&&(this.skeletonTimeoutId=window.setTimeout(e.onTimeout.fn,e.onTimeout.delay)),GT(null!=this.skeleton,new Error("options.skeletonBoxCount를 넣어주세요.")),this.skeleton.style.display="flex",this.wrapper.style.height="".concat(this.skeletonOption.boxHeight*this.skeletonOption.boxCount+2*this.skeletonOption.padding+8*(this.skeletonOption.boxCount-1),"px")}},{key:"focus",value:function(){var e;null==(e=this.iframe)||e.scrollIntoView()}}]),e}(),NO=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new _O({src:e,title:"토스페이먼츠 결제위젯",styles:{display:"block",border:"0px",width:"100%",height:"0px"},options:r}),i=document.querySelector(t);GT(null!=i,new Vx);var o=i.querySelector(".".concat(xO));return GT(null==o,new i_),n.mount(i),n},OO=function(){function e(t,r){o(this,e),this.selector=t,this.Bridge=r,this.widget=null}return s(e,[{key:"launch",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){return qT(r,null,regeneratorRuntime.mark((function r(){var i,o,a,s,u,c,l=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=setTimeout((function(){l.shutdown(),n(new Error("Launch Request Timeout"))}),45e3),this.widget=NO(e.getProductURL(),this.selector,{skeleton:{boxCount:DN()?3:2,padding:DN()?24:30}}),this.widget.showSkeleton(),this.widget.onIframeRemoved((function(){l.shutdown()})),r.next=6,this.Bridge.openBridge({targetWindow:this.widget.iframe.contentWindow,runtimeWindow:window});case 6:o=r.sent,a=new Map(e.getParameterResolvers()),o.handleRequest("GET_PARAMETER",(function(e){return qT(l,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null!=(n=a.get(r))){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,n();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))})),o.subscribe("LIFECYCLE",(function(e){return qT(l,[e],regeneratorRuntime.mark((function e(r){var o,a,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.name,a=r.params,e.t0=o,e.next="READY"===e.t0?4:"FAIL"===e.t0?8:"RESIZED"===e.t0?13:15;break;case 4:return null==(s=this.widget)||s.hideSkeleton(),clearTimeout(i),t(),e.abrupt("return");case 8:return null==(u=this.widget)||u.hideSkeleton(),clearTimeout(i),this.shutdown(),n(new Error(null==a?void 0:a.message)),e.abrupt("return");case 13:return null==(c=this.widget)||c.updateStyle({height:"".concat(a.height,"px")}),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this)})))})),s=E(e.getEventListeners());try{for(c=function(){var e=w(u.value,2),t=e[0],r=e[1];o.subscribe(t,(function(e){return r(e)}))},s.s();!(u=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}e.onExecuteQuery((function(e,t){return o.request(e,t,{timeout:45e3})})),e.onExecuteCommand((function(e,t){return o.request(e,t,{timeout:45e3})})),e.onFocus((function(){var e;null==(e=l.widget)||e.focus()}));case 15:case"end":return r.stop()}}),r,this)})))})));case 1:case"end":return t.stop()}}),t)})))}},{key:"shutdown",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.widget)||t.cleanup();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),MO=function(){function e(t){o(this,e),this.logger=t}return s(e,[{key:"openBridge",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetWindow,n=t.runtimeWindow,i=t.reconnectTimeout,e.next=3,yT({targetWindow:r,runtimeWindow:n,reconnectTimeout:i});case 3:return(o=e.sent).subscribeDebugger((function(e){return qT(a,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{null!=e&&this.logger.info(JSON.stringify(e))}catch(e){}case 1:case"end":return t.stop()}}),t,this)})))})),o.subscribeError((function(e){return qT(a,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==e){t.next=6;break}if(!(e instanceof Error)){t.next=5;break}return this.logger.error(JSON.stringify(e.message),{stack:null!=(r=null==e?void 0:e.stack)?r:""}),t.abrupt("return");case 5:this.logger.error(JSON.stringify(e));case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})))})),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))}}]),e}(),LO=function(){function e(t){o(this,e),this.Bridge=new MO(t)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":return new pO(this.Bridge);case"full-iframe":throw new _x("full-iframe");case"popup":return gO.getInstance(this.Bridge);case"self":throw new _x("self");default:throw new _x(t)}}}]),e}(),UO=function(){function e(t){o(this,e),this.Bridge=new MO(t)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":throw new _x("iframe");case"full-iframe":throw new _x("full-iframe");case"popup":throw new _x("popup");case"self":throw new _x("self");default:return new OO(t,this.Bridge)}}}]),e}(),BO=function(){function e(){o(this,e)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":return new AO;case"full-iframe":return new IO;default:throw new _x(t);case"self":return new TO}}}]),e}(),DO=function(){function e(){o(this,e),this.key="tosspayments/client-key-".concat(Math.random().toString(36).substring(2)),this.storage=new KN}return s(e,[{key:"findCurrentClientKey",value:function(){var e=this.storage.get(this.key);if(null==e)throw new Sx;return new $_(e)}},{key:"saveCurrentClientKey",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),KO=function(){function e(t){o(this,e),this.config=t}return s(e,[{key:"getBrandpayServerOrigin",value:function(){return this.config.brandpay.serverOrigin}},{key:"getPaymentWidgetServerOrigin",value:function(){return this.config.paymentWidget.serverOrigin}},{key:"getPaymentGatewayServerOrigin",value:function(){return this.config.paymentGateway.serverOrigin}},{key:"getPaymentGatewaySandboxServerOrigin",value:function(){return this.config.paymentGateway.sandboxServerOrigin}}]),e}(),FO=function(){function e(t){o(this,e),this.domainLoggerTransport=t}return s(e,[{key:"logBrandpayAuthenticate",value:function(e){var t=e.methodId;this.domainLoggerTransport.request(1373476,{servicename:null==t?null:t.startsWith("c")||t.startsWith("m")?"카드":"계좌"})}},{key:"logBrandpayAddPaymentMethodUsecaseSuccess",value:function(){ix().info("add payment method usecase success")}},{key:"logBrandpayRequestPaymentUsecasseSuccess",value:function(e){var t=e.orderId;ix().info("request payment usecase success",{orderId:t})}},{key:"logBrandpayRequestPaymentUsecasseFail",value:function(e){var t=e.orderId,r=e.code;ix().info("request payment usecase fail",{orderId:t,code:r})}},{key:"logWidgetRequestPaymentStart",value:function(e){var t=this.createRequestPaymentLogParams(e);this.domainLoggerTransport.start(1376596,KT(DT({},t),{params:{}}))}},{key:"logWidgetRequestPaymentSuccess",value:function(e){var t=this.createRequestPaymentLogParams(e);this.domainLoggerTransport.success(1376596,t)}},{key:"logWidgetRequestPaymentFail",value:function(e){var t=e,r=t.error,n=FT(t,["error"]),i=this.createRequestPaymentLogParams(n),o=this.createRequestPaymentErrorLogError(r);this.domainLoggerTransport.fail(1376596,KT(DT({},i),{error:o}))}},{key:"createRequestPaymentErrorLogError",value:function(e){return e instanceof $x?{code:"PROVIDER_STATUS_UNHEALTHY",message:"결제 기관(카드사, 은행, 국세청 등) 오류입니다. 다른 결제수단을 선택해 주세요."}:e instanceof Zx?{code:"NEED_CARD_PAYMENT_DETAIL",message:"카드 결제 정보를 선택해주세요."}:e instanceof Qx?{code:"NEED_REFUND_ACCOUNT_DETAIL",message:"환불계좌 정보를 모두 입력해주세요."}:e instanceof Xx?{code:"EXCEED_MAX_DUE_DATE",message:"가상 계좌의 최대 유효만료 기간을 초과했습니다."}:e instanceof Jx?{code:"EXCEED_DEPOSIT_AMOUNT_LIMIT",message:"가상계좌 입금 제한 금액을 초과했어요. 다른 결제수단을 이용해주세요."}:e instanceof e_?{code:"CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY",message:""}:e instanceof Error?{code:"UNKNOWN_ERROR",message:e.message}:{}}},{key:"createRequestPaymentLogParams",value:function(e){var t=e.selectedPaymentMethod,r=e.paymentInfo,n=e.amount,i=e.mid;if(t.id.startsWith("CUSTOM__"))return{paymentMethod:t.id,mid:i,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency};switch(t.code){case"BRANDPAY":case"KEYIN":case"TRANSFER":case"BANKPAY":case"OPENBANKING":case"VIRTUAL_ACCOUNT":case"MOBILE_PHONE":case"GAME_GIFT_CERTIFICATE":case"BOOK_GIFT_CERTIFICATE":case"CULTURE_GIFT_CERTIFICATE":return{paymentMethod:t.id,mid:i,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency};case"PAYPAL":case"GCASH":case"TOUCHNGO":case"BOOST":case"BPI":case"BILLEASE":case"DANA":case"ALIPAYHK":case"TRUEMONEY":case"RABBIT_LINE_PAY":case"ALIPAY":return{paymentMethod:"FOREIGN_EASY_PAY",mid:i,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,provider:t.code};case"PINPAY":case"TOSSPAY":case"NAVERPAY":case"SAMSUNGPAY":case"APPLEPAY":case"LPAY":case"KAKAOPAY":case"PAYCO":case"SSG":return{paymentMethod:"CARD",mid:i,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,easyPay:t.code};case"CARD":case"SHINHAN":case"HYUNDAI":case"SAMSUNG":case"WOORI":case"KOOKMIN":case"LOTTE":case"NONGHYEOP":case"HANA":case"BC":case"KDBBANK":case"TOSSBANK":case"KAKAOBANK":case"SUHYEOP":case"JEONBUKBANK":case"KBANK":case"POST":case"SAEMAUL":case"CITI":case"SAVINGBANK":case"JEJUBANK":case"GWANGJUBANK":case"SHINHYEOP":case"JCB":case"UNIONPAY":case"MASTER":case"VISA":case"DINERS":case"DISCOVER":case"IBK_BC":case"AMEX":return{paymentMethod:"CARD",mid:i,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,cardCompany:t.id.replace("CARD__","")};case"KBPAY":return{paymentMethod:"CARD",mid:i,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,cardCompany:"KOOKMIN"}}}}]),e}(),jO=function(){function e(){o(this,e),this.key="tosspayments/mid-".concat(Math.random().toString(36).substring(2)),this.storage=new KN}return s(e,[{key:"findCurrentMid",value:function(){var e=this.storage.get(this.key);if(null==e)throw new Px;return new rN(e)}},{key:"saveCurrentMid",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),qO=function(){function e(){o(this,e)}return s(e,[{key:"findCurrentMid",value:function(){return null}},{key:"saveCurrentMid",value:function(e){throw new Rx}}]),e}(),GO=function(){function e(){o(this,e)}return s(e,[{key:"isUsableBiometricAuthModule",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"isUsableOCRModule",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"isBiometricAuthAvailable",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"getAppInfo",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new mx;case 1:case"end":return e.stop()}}),e)})))}},{key:"hasBiometricAuthToken",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"setBiometricAuthToken",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new mx;case 1:case"end":return e.stop()}}),e)})))}},{key:"getEncryptedBiometricAuthToken",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new mx;case 1:case"end":return e.stop()}}),e)})))}},{key:"removeBiometricAuthToken",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new mx;case 1:case"end":return e.stop()}}),e)})))}},{key:"scanCreditCard",value:function(e){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new mx;case 1:case"end":return e.stop()}}),e)})))}}]),e}(),WO=function(){function e(t){o(this,e),this.deviceManager=t}return s(e,[{key:"create",value:function(){return this.deviceManager.getDevice().isIos()?this.getBrandpayIosNativeSDKFacade():this.deviceManager.getDevice().isAndroid()?this.getBrandpayAndroidNativeFacade():new GO}}]),e}(),HO=function(e){c(r,e);var t=g(r);function r(e){return o(this,r),t.call(this,e)}return s(r,[{key:"getBrandpayIosNativeSDKFacade",value:function(){return new GO}},{key:"getBrandpayAndroidNativeFacade",value:function(){return new GO}}]),r}(WO),YO=function(){function e(){o(this,e),this.currentSessionStorageKey="@tosspayments/payment-gateway-current-session",this.memoryStorage=new KN}return s(e,[{key:"saveCurrentSession",value:function(e){this.memoryStorage.set(this.currentSessionStorageKey,e)}},{key:"findCurrentSession",value:function(){var e=this.memoryStorage.get(this.currentSessionStorageKey);if(null==e)throw new Cx;return e}}]),e}(),VO=function(){function e(){o(this,e)}return s(e,[{key:"findByDigitalWalletProviderId",value:function(e){return function(e){switch(e){case"TOSSPAY":return kT;case"NAVERPAY":return bT;case"SAMSUNGPAY":return ST;case"LPAY":return ET;case"KAKAOPAY":return PT;case"PAYCO":return RT;case"SSG":return CT;case"APPLEPAY":return IT;case"PAYPAL":return AT;case"PINPAY":return TT}}(e)}}]),e}(),zO=function(){function e(){o(this,e),this.currentSessionStorageKey="@tosspayments/payment-widget-current-session",this.previousLocalStorageKey="@tosspayments/payment-widget-previous-payment-method-id",this.memoryStorage=new KN,this.localStorage=new FN}return s(e,[{key:"findPreviousPaymentMethodId",value:function(){try{var e=this.localStorage.get(this.previousLocalStorageKey);return null!=e?e:null}catch(e){return null}}},{key:"savePreviousPaymentMethodId",value:function(e){this.localStorage.set(this.previousLocalStorageKey,e)}},{key:"findCurrentSession",value:function(){var e=this.memoryStorage.get(this.currentSessionStorageKey);if(null==e)throw new Cx;return e}},{key:"saveCurrentSession",value:function(e){this.memoryStorage.set(this.currentSessionStorageKey,e)}}]),e}(),ZO=function(){function e(){o(this,e),this.key="@tosspayments/widget-synchronized-payment-request-".concat(Math.random().toString(36).substring(2)),this.brandpayKey="@tosspayments/widget-synchronized-brandpay-payment-request-".concat(Math.random().toString(36).substring(2)),this.storage=new KN}return s(e,[{key:"findCurrentPaymentRequest",value:function(){var e=this.storage.get(this.key);if(null==e)throw new Error("SynchronizedPaymentRequest is not found");return e}},{key:"saveCurrentPaymentRequest",value:function(e){this.storage.set(this.key,e)}},{key:"findCurrentBrandpayPaymentRequest",value:function(){var e=this.storage.get(this.brandpayKey);if(null==e)throw new Error("SynchronizedBrandpayPaymentRequest is not found");return e}},{key:"saveCurrentBrandpayPaymentRequest",value:function(e){this.storage.set(this.brandpayKey,e)}}]),e}(),QO=function(){function e(){o(this,e)}return s(e,[{key:"getLiveProductStage",value:function(){return"live"}},{key:"getPretestProductStage",value:function(){return"sandbox"}}]),e}(),JO=function(){function e(){o(this,e),this.globalTraceIdStorageKey="@tosspayments/global-trace-id",this.merchantBrowserIdStorageKey="@tosspayments/merchant-browser-id",this.sessionIdStorageKey="@tosspayments/session-id",this.singletonMemoryStorage=qN,this.localStorage=new FN,this.sessionStorage=new jN}return s(e,[{key:"saveGlobalTraceId",value:function(e){this.singletonMemoryStorage.set(this.globalTraceIdStorageKey,e)}},{key:"findGlobalTraceId",value:function(){var e=this.singletonMemoryStorage.get(this.globalTraceIdStorageKey);if(null!=e)return e;var t=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return function(){for(var r="",n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;n--;)r+=e[Math.random()*e.length|0];return r}}var t="a",r=new Date,n="".concat(r.getFullYear()).substring(2,4),i="".concat(r.getMonth()+1).padStart(2,"0"),o="".concat(r.getDate()).padStart(2,"0"),a=e("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",32);return"".concat(t).concat(n).concat(i).concat(o).concat(a())}();return this.singletonMemoryStorage.set(this.globalTraceIdStorageKey,t),t}},{key:"findMerchantBrowserId",value:function(){try{var e=this.localStorage.get(this.merchantBrowserIdStorageKey);if(null!=e)return e;var t=$O();return this.localStorage.set(this.merchantBrowserIdStorageKey,t),t}catch(e){return"LOCAL_STORAGE_NOT_ACCESSIBLE"}}},{key:"findSessionId",value:function(){try{var e=this.sessionStorage.get(this.sessionIdStorageKey);if(null!=e)return e;var t=$O();return this.sessionStorage.set(this.sessionIdStorageKey,t),t}catch(e){return"SESSION_STORAGE_NOT_ACCESSIBLE"}}}]),e}();function $O(){return Math.random().toString(36).substring(2)}var XO=function(){function e(){o(this,e)}return s(e,[{key:"get",value:function(e,t){return qT(this,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",eM("GET",e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"post",value:function(e,t){return qT(this,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",eM("POST",e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"put",value:function(e,t){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"delete",value:function(e,t){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}}]),e}();function eM(e,t,n){return new Promise((function(i,o){var a,s,u,c=new XMLHttpRequest;c.open(e,function(e,t){if(null==t)return e;var r=RI.parseUrl(e),n=RI.stringify(DT(DT({},r.query),t));return n.length>0?"".concat(r.url,"?").concat(n):r.url}(t,null==n?void 0:n.query),!0),c.withCredentials=null!=(a=null==n?void 0:n.credentials)&&a,null==(null==(s=null==n?void 0:n.headers)?void 0:s["Content-Type"])&&c.setRequestHeader("Content-Type","application/json"),null!=(null==n?void 0:n.timeout)&&(c.timeout=n.timeout),Object.keys(null!=(u=null==n?void 0:n.headers)?u:{}).forEach((function(e){c.setRequestHeader(e,n.headers[e])})),"GET"===e?c.send():c.send(JSON.stringify(null==n?void 0:n.body)),c.addEventListener("error",(function(){o(new rM({code:"REQUEST_ERROR",message:"Request Error"}))})),c.addEventListener("timeout",(function(){o(new rM({code:"REQUEST_TIMEOUT",message:"Request Timeout"}))})),c.addEventListener("load",(function(){if(c.status>=400){if(ZT(c.responseText))return o(new rM({code:"NETWORK_ERROR",message:"Network Error"}));var e=tM(c.responseText);return(null==(t=e)?void 0:t.hasOwnProperty("message"))&&(null==t?void 0:t.hasOwnProperty("code"))?o(new rM(e)):function(e){if("object"!==r(e)||null==e)return!1;return"ERROR"===e.result}(e)?o(new rM(e.error)):o(e)}var t;i(tM(c.response))}))}))}function tM(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}var rM=function(e){c(r,e);var t=g(r);function r(e){var n,i=e.code,a=e.message;return o(this,r),(n=t.call(this,"[".concat(i,"]: ").concat(a))).isTossPaymentsError=!0,n.message=a,n.code=i,n}return s(r)}(p(Error));function nM(e){return!0===(null==e?void 0:e.isTossPaymentsError)}var iM=function(){function e(t,r){o(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.httpClient=new XO}return s(e,[{key:"getIdentity",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/identities"),{headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,i=r.newCustomerToken,t.abrupt("return",{newCustomerToken:i,identity:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getRegisteredPaymentMethods",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/methods"),{headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,i=r.newCustomerToken,t.abrupt("return",{newCustomerToken:i,registeredPaymentMethods:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getTemporaryMethods",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/methods/temporary"),{headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,i=r.newCustomerToken,t.abrupt("return",{newCustomerToken:i,temporaryPaymentMethods:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getProperties",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/properties"),{headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,i=r.newCustomerToken,t.abrupt("return",{newCustomerToken:i,properties:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"updateProperties",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/properties"),{headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e.customerToken)}),credentials:!0,body:e.properties});case 2:return r=t.sent,n=r.newCustomerToken,t.abrupt("return",{newCustomerToken:n});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getAuthorizationHeader",value:function(e){return"Bearer ".concat(e)}},{key:"getDefaultHeaders",value:function(){var e,t,r=this.customerSessionRepository.findCurrentSession();return{"x-tosspayments-global-trace-id":null!=(e=r.getGlobalTraceId())?e:"unknown","x-tosspayments-referrer":null!=(t=r.getWindow().getHref())?t:"unknown"}}}]),e}(),oM=function(){function e(t,r,n,i){o(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.clientKeyRepository=n,this.midRepository=i,this.httpClient=new XO}return s(e,[{key:"getMerchantIntegration",value:function(){var e,t=null==(e=this.midRepository.findCurrentMid())?void 0:e.value;return this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/merchant/integration"),KT(DT({headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()})},null!=t?{"tosspayments-mid":t}:{}),{credentials:!0}))}},{key:"validatePaymentRequest",value:function(e){var t,r=null==(t=this.midRepository.findCurrentMid())?void 0:t.value;return this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/payments/validate"),KT(DT({headers:KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()}),body:e},null!=r?{"tosspayments-mid":r}:{}),{credentials:!0}))}},{key:"getCustomerAuthorizationStatus",value:function(){var e,t=this.customerSessionRepository.findCurrentSession().getCustomerKey().value,r=null==(e=this.midRepository.findCurrentMid())?void 0:e.value;return this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/authorizations/agree"),{query:{customerKey:t},headers:DT(KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()}),null!=r?{"tosspayments-mid":r}:{}),credentials:!0})}},{key:"createAuthSession",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.customerSessionRepository.findCurrentSession(),n=r.getRedirectURL(),i=r.getCustomerKey().value,o=null==(t=this.midRepository.findCurrentMid())?void 0:t.value,e.next=6,this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/authorizations"),{body:{customerKey:i,redirectUrl:n},headers:DT(KT(DT({},this.getDefaultHeaders()),{Authorization:this.getAuthorizationHeader()}),null!=o?{"tosspayments-mid":o}:{})});case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"requestRedirectUrl",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.next=3,this.httpClient.get(e,{credentials:!0});case 3:return n=t.sent,i=Date.now(),t.abrupt("return",{result:n,elapsedTimeMs:i-r});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"fetchCustomerTokenV2",value:function(e){var t,r=e.authorizationElapsedTime,n=e.customerAuthCode,i=this.customerSessionRepository.findCurrentSession().getCustomerKey().value,o=null==(t=this.midRepository.findCurrentMid())?void 0:t.value;return this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v2/brandpay/authorizations/customer-token"),{query:{atms:String(r)},body:{customerKey:i,customerAuthCode:n},headers:DT(KT(DT({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()}),null!=o?{"tosspayments-mid":o}:{})})}},{key:"getAuthorizationHeader",value:function(){var e=this.clientKeyRepository.findCurrentClientKey().value;return"Basic ".concat(window.btoa("".concat(e,":")))}},{key:"getDefaultHeaders",value:function(){var e,t,r=this.customerSessionRepository.findCurrentSession();return{"x-tosspayments-global-trace-id":null!=(e=r.getGlobalTraceId())?e:"unknown","x-tosspayments-referrer":null!=(t=r.getWindow().getHref())?t:"unknown"}}}]),e}(),aM=function(){function e(){o(this,e),this.httpClient=new XO}return s(e,[{key:"getV1WidgetGroupsKeys",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.origin,n=t.widgetKey,i=t.variantKey,o=t.globalTraceId,a=t.referrer,e.next=3,this.httpClient.get("".concat(r,"/v1/payment-widget/widget-groups/keys"),{headers:{"x-tosspayments-global-trace-id":null!=o?o:"unknown","x-tosspayments-referrer":null!=a?a:"unknown",Authorization:"Basic ".concat(window.btoa("".concat(n,":")))},query:{variantKey:i}});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getV1WidgetBrandpayConfig",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.origin,n=t.widgetKey,i=t.variantKey,o=t.globalTraceId,a=t.referrer,e.next=3,this.httpClient.get("".concat(r,"/v1/payment-widget/brandpay/config"),{headers:{"x-tosspayments-global-trace-id":null!=o?o:"unknown","x-tosspayments-referrer":null!=a?a:"unknown",Authorization:"Basic ".concat(window.btoa("".concat(n,":")))},query:{variantKey:i}});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})))}}]),e}(),sM=function(){function e(){o(this,e),this.httpClient=new XO}return s(e,[{key:"postV1PxPaymentParameters",value:function(e){var t,r=e.origin,n=e.clientKey,i=e.isMobile,o=e.isPromise,a=e.paymentParameter;return this.httpClient.post("".concat(r,"/payment-gateway-window/open/pg-window/v1/px-payment-parameters").concat(VT(KT(DT({},null!=a.mId?{"tosspayments-mid":a.mId}:{}),{Authorization:"Basic ".concat(btoa("".concat(n,":")))}))),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:(t={clientKey:n,isMobile:i,isPromise:o,paymentParameter:JSON.stringify(a)},Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&")),timeout:6e4})}},{key:"getV3BillingRoute",value:function(e){var t=e.origin,r=e.clientKey,n=e.isMobile,i=e.billingParameter;return this.httpClient.get("".concat(t,"/payment-gateway-window/open/pg-window/v3/billing/route").concat(VT({isMobile:n,billingParameter:JSON.stringify(i),Authorization:"Basic ".concat(btoa("".concat(r,":")))})),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},timeout:6e4})}}]),e}();var uM=function(){function e(t,r){o(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.brandpayServer=new iM(t,r)}return s(e,[{key:"getIdentity",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getIdentity(e);case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),r="REQUIRED_VERIFICATION",n="REQUIRED_PLCC_VERIFICATION",i="REQUIRED_OPENPAY_MIGRATION_VERIFICATION",!nM(t.t0)||![r,n,i].includes(t.t0.code)){t.next=13;break}throw new vx;case 13:throw new qx(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getRegisteredPaymentMethods",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getRegisteredPaymentMethods(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new qx(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getTemporaryMethods",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getTemporaryMethods(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new qx(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getProperties",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getProperties(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new qx(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"updateProperties",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.updateProperties(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new qx(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}}]),e}(),cM=function(){function e(t,r,n,i){o(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.clientKeyRepository=n,this.midRepository=i,this.brandpayServer=new oM(t,r,n,i)}return s(e,[{key:"authenticateCustomerToken",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._authenticateCustomerTokenV2();case 3:case 11:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!nM(e.t0)||!["FORBIDDEN_CONSECUTIVE_REQUEST","NOT_FOUND_CUSTOMER_SESSION"].includes(e.t0.code)){e.next=12;break}return e.next=11,this._authenticateCustomerTokenV2();case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"_authenticateCustomerTokenV2",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,s,u,c,l,d,f,h,p,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=300,r=150,n=null,i=0,o=null,a=null,e.next=8,this.brandpayServer.createAuthSession();case 8:return s=e.sent,a=s.customerAuthCode,u=ix(),e.prev=11,e.next=14,this.brandpayServer.requestRedirectUrl(s.authorizationUrl);case 14:c=e.sent,o=c.elapsedTimeMs,u.info("Redirect url success"),e.next=24;break;case 19:throw e.prev=19,e.t0=e.catch(11),l=function(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}},u.error("Redirect url failed",{message:l(null==e.t0?void 0:e.t0.message),stack:l(null==e.t0?void 0:e.t0.stack),rawError:l(e.t0)}),e.t0;case 24:if(null!=n){e.next=52;break}return d=0===i,e.next=28,Promise.all([this.brandpayServer.fetchCustomerTokenV2({authorizationElapsedTime:o,customerAuthCode:a}),YT(d?0:r)]);case 28:f=e.sent,h=w(f,1),p=h[0],e.t1=p.status,e.next="INVALID"===e.t1?34:"PENDING"===e.t1?36:"APPROVED"===e.t1?46:48;break;case 34:return r=1e3,e.abrupt("continue",24);case 36:if(!d){e.next=43;break}return e.next=39,this.brandpayServer.createAuthSession();case 39:v=e.sent,a=v.customerAuthCode,o=null,this.brandpayServer.requestRedirectUrl(v.authorizationUrl).then((function(e){o=e.elapsedTimeMs}));case 43:return r=150,i++,e.abrupt("break",48);case 46:return n=p.customerToken,e.abrupt("break",48);case 48:if(!(i>=t)){e.next=50;break}throw new sx;case 50:e.next=24;break;case 52:return e.abrupt("return",n);case 53:case"end":return e.stop()}}),e,this,[[11,19]])})))}},{key:"isTermsAgreed",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayServer.getCustomerAuthorizationStatus();case 3:return t=e.sent,e.abrupt("return",t.isAgree);case 7:throw e.prev=7,e.t0=e.catch(0),new qx(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getMerchantIntegration",value:function(){return qT(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayServer.getMerchantIntegration();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new qx(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"validatePaymentRequest",value:function(e){return qT(this,null,regeneratorRuntime.mark((function t(){var r,n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e).amount,i=FT(r,["amount"]),t.prev=1,t.next=4,this.brandpayServer.validatePaymentRequest(DT({amount:n.value},i));case 4:t.next=16;break;case 6:if(t.prev=6,t.t0=t.catch(1),o=["INVALID_REQUEST","INVALID_ORDER_ID","INVALID_ORDER_NAME","UNAUTHORIZED_KEY","INVALID_METADATA"],!nM(t.t0)||!o.includes(t.t0.code)){t.next=15;break}if("INVALID_METADATA"!==t.t0.code){t.next=14;break}throw new jx;case 14:throw new Fx({code:t.t0.code,message:t.t0.message});case 15:throw new qx(t.t0);case 16:case"end":return t.stop()}}),t,this,[[1,6]])})))}}]),e}(),lM=function(){function e(t,r){o(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.widgetServerAPI=new aM}return s(e,[{key:"fetchMidPackage",value:function(e,t){return qT(this,null,regeneratorRuntime.mark((function r(){var n,i,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this.customerSessionRepository.findCurrentSession(),r.next=4,this.widgetServerAPI.getV1WidgetGroupsKeys({origin:this.compileConfigRepository.getPaymentWidgetServerOrigin(),widgetKey:e.value,variantKey:t,globalTraceId:n.getGlobalTraceId(),referrer:n.getWindow().getHref()});case 4:return i=r.sent,o=i.data,r.abrupt("return",{getNormalMid:function(){return null!=o.normal?new rN(o.normal.mid):null},getKeyinMid:function(){return null!=o.keyin?new rN(o.keyin.mid):null},getInternationalMid:function(){return null!=o.international?new rN(o.international.mid):null},getBrandpayMid:function(){return null!=o.brandpay?new rN(o.brandpay.mid):null}});case 9:if(r.prev=9,r.t0=r.catch(0),!nM(r.t0)||!["4015","4009"].includes(r.t0.code)){r.next=13;break}throw new r_;case 13:throw new qx(r.t0);case 14:case"end":return r.stop()}}),r,this,[[0,9]])})))}}]),e}(),dM=function(){function e(t){o(this,e),this.compileConfigRepository=t,this.pgWindowServerAPI=new sM}return s(e,[{key:"validatePaymentRequest",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l,d,f,h,p,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.isMobile,i=t.isPromise,o=t.isWidgetSession,a=t.method,s=t.request,e.prev=1,u=this.resolvePgWindowServerUrl(r.value),l=(c=s).amount,d=c.sandbox,f=FT(c,["amount","sandbox"]),h=DT(DT(KT(DT({},f),{amount:l.value,currency:l.currency,methodType:a}),o?{requesterService:"WIDGET"}:{}),null!=(null==d?void 0:d.paymentResult)?{_skipAuth:"SUCCESS"===d.paymentResult?"FORCE_SUCCESS":"FORCE_FAIL"}:{}),e.next=7,this.pgWindowServerAPI.postV1PxPaymentParameters({origin:u,clientKey:r.value,isMobile:n,isPromise:i,paymentParameter:h});case 7:return p=e.sent,v=p.data,e.abrupt("return",{paymentToken:v.token});case 12:if(e.prev=12,e.t0=e.catch(1),!pM(e.t0)||!fM.includes(e.t0.code)){e.next=20;break}if("INVALID_METADATA"!==e.t0.code){e.next=17;break}throw new jx;case 17:if("BELOW_ZERO_AMOUNT"!==e.t0.code){e.next=19;break}throw new kx;case 19:throw new Fx({code:e.t0.code,message:e.t0.message});case 20:try{m=function(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}},ix().info("Uncaught Payment Gateway Error",{message:m(null==e.t0?void 0:e.t0.message),stack:m(null==e.t0?void 0:e.t0.stack),rawError:m(e.t0)})}catch(e){}throw new qx(e.t0);case 22:case"end":return e.stop()}}),e,this,[[1,12]])})))}},{key:"isValidBillingAuthenticationRequest",value:function(e){return qT(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.customerKey,i=t.isMobile,o=t.request,e.prev=1,a=this.resolvePgWindowServerUrl(r.value),e.next=5,this.pgWindowServerAPI.getV3BillingRoute({origin:a,clientKey:r.value,isMobile:i,billingParameter:{customerKey:n.value,successUrl:o.successUrl,failUrl:o.failUrl,customerName:o.customerName,customerEmail:o.customerEmail,windowTarget:o.windowTarget,payMethod:o.method}});case 5:return e.abrupt("return",{isValid:!0});case 8:if(e.prev=8,e.t0=e.catch(1),!pM(e.t0)||!hM.includes(e.t0.code)){e.next=12;break}return e.abrupt("return",{isValid:!1});case 12:throw new qx(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"resolvePgWindowServerUrl",value:function(e){return new $_(e).isTestKey()?this.compileConfigRepository.getPaymentGatewaySandboxServerOrigin():this.compileConfigRepository.getPaymentGatewayServerOrigin()}}]),e}(),fM=["INVALID_REQUEST","INVALID_SUCCESS_URL","INCORRECT_SUCCESS_URL_FORMAT","INCORRECT_FAIL_URL_FORMAT","EXCEED_MAX_DUE_DATE","INVALID_VALID_HOURS_WITH_DUE_DATE_AND_SINGLE","EXCEED_MAX_VALID_HOURS","INVALID_URL","VIRTUAL_ACCOUNT_CALLBACK_URL_DEPRECATED","INVALID_BANK","INVALID_ACCOUNT_NUMBER","INVALID_CUSTOMER_KEY","INVALID_ORDER_ID","INVALID_PHONE","INVALID_ORDER_NAME","INVALID_EASY_PAY","BELOW_ZERO_AMOUNT","INVALID_CARD_INSTALLMENT_PLANS_WITH_MAX_AND_SINGLE","INVALID_FLOW_MODE_PARAMETERS","INVALID_MINOR_UNIT_FOR_CURRENCY","INVALID_METADATA"],hM=["INCORRECT_SUCCESS_URL_FORMAT","INCORRECT_FAIL_URL_FORMAT","INVALID_CUSTOMER_KEY"];function pM(e){return!0===(null==e?void 0:e.isTossPaymentsError)}var vM=function(){function e(t,r,n){o(this,e),this.debugLoggerTransport=t,this.domainLoggerTransport=r,this.compileConfig=n;var i=new g_(new ON),a=new GN,s=new MN,u=new ON,c=new KO(this.compileConfig),l=new JO,d=new ZN,f=new VO,h=new QO,p=new tN(l,a,s),v=new FO(this.domainLoggerTransport),m=new HO(s),y=new YO,g=new DO,w=new BO,k=new dM(c),b=new mN(y,g,p,l),S=new vN(i,y,k,w,h,d,g),E=new gN(i,y,k,w,h,d,g),P=new QN,R=new DO,C=new LO(this.debugLoggerTransport),I=new uM(c,P),A=new s_(I,P,u),T=new cM(c,P,R,new qO),x=new F_(A,T,P,C,h,R,m.create(),new qO),_=new Q_(i,x,C,P,h,R,d,v,m.create(),T),N=new j_(i,x,C,P,h,R,m.create(),new qO),O=new V_(i,x,C,P,h,R,m.create(),new qO),M=new z_(i,x,C,P,h,R,m.create(),new qO),L=new J_(P,R,p,l),U=new Y_(i,x,C,P,T,h,R,m.create(),new qO),B=new Z_(i,P,A,T),D=new DO,K=new QN,F=new jO,j=new LO(this.debugLoggerTransport),q=new iM(c,K),G=new s_(q,K,u),W=new cM(c,K,D,F),H=new F_(G,W,K,j,h,D,m.create(),F),Y=new Q_(new g_(new ON),H,j,K,h,D,d,v,m.create(),W),V=new z_(new g_(new ON),H,j,K,h,D,m.create(),F),z=new H_(new g_(new ON),H,j,K,h,D,m.create(),F),Z=new j_(new g_(new ON),H,j,K,h,D,m.create(),F),Q=new YO,J=new jO,$=new BO,X=new dM(c),ee=new gN(new g_(new ON),Q,X,$,h,d,D),te=new YO,re=new jO,ne=new BO,ie=new dM(c),oe=new gN(new g_(new ON),te,ie,ne,h,d,D),ae=new YO,se=new jO,ue=new BO,ce=new dM(c),le=new gN(new g_(new ON),ae,ce,ue,h,d,D),de=new zO,fe=new lM(c,de),he=new NN(D,se,J,re,F,fe),pe=new UO(this.debugLoggerTransport),ve=new AN(de,D,p,l,K,Q,te,ae),me=new TN(i),ye=new CN(i,pe,de,h,D,he,H,K,V,z,Z,F),ge=new xN(i,de,D,(new _N).setRequestBrandpayPaymentUseCase(Y).setRequestKeyinPaymentGatewayUseCase(ee).setRequestInternationalPaymentGatewayUseCase(oe).setRequestNormalPaymentGatewayUseCase(le).build(),fe,v),we=new PN(i,pe,de,h,D);this.dependencyImplements={DomainLogger:v,TaskScheduler:i,WindowManager:a,DeviceManager:s,AsyncSemaMutex:u,CompileConfigRepository:c,CustomerSessionFactory:p,UrlValidator:d,TracingIdRepository:l,ProductStageRepository:h,PaymentMethodIssuer:f,PaymentGatewaySessionRepository:y,PaymentGatewayClientKeyRepository:g,PaymentGatewayCheckoutProductLauncherFactory:w,PaymentGatewayServerAPI:k,PaymentGatewayStartCustomerSessionService:b,PaymentGatewayRequestBillingAuthService:S,PaymentGatewayRequestPaymentService:E,BrandpayCustomerSessionRepository:P,BrandpayClientKeyRepository:R,BrandpayCheckoutProductLauncherFactory:C,BrandpayAuthenticatedServerAPI:I,BrandpayAuthenticatedAPIService:A,BrandpayPublicServerAPI:T,BrandpayCustomerAuthService:x,BrandpayRequestPaymentService:_,BrandpayAddPaymentMethodService:N,BrandpayChangePasswordService:O,BrandpayChangeSettingsService:M,BrandpayStartCustomerSessionService:L,BrandpayChangeOneTouchPaySettingsService:U,BrandpayGetIsOneTouchPayEnabledService:B,PaymentWidgetBrandpayCheckoutProductLauncherFactory:j,PaymentWidgetBrandpayCustomerSessionRepository:K,PaymentWidgetBrandpayPublicServerAPI:W,PaymentWidgetBrandpayCustomerAuthService:H,PaymentWidgetService:fe,PaymentWidgetCustomerSessionRepository:de,PaymentWidgetClientKeyRepository:D,PaymentWidgetCheckoutProductLauncherFactory:pe,PaymentWidgetStartCustomerSessionService:ve,PaymentWidgetUpdateAmountService:me,PaymentWidgetRenderPaymentMethods:ye,PaymentWidgetRequestPaymentService:ge,PaymentWidgetRenderAgreementService:we}}return s(e,[{key:"getDependency",value:function(e){var t=this.dependencyImplements[e];if(null==t)throw new Error("".concat(e," 의존성이 존재하지 않습니다."));return t}}]),e}(),mM=function(){function e(){o(this,e)}return s(e,[{key:"create",value:function(e){nx(e.debugLoggerTransport);var t=new vM(e.debugLoggerTransport,e.domainLoggerTransport,e.compileConfig),r=this.configDependency(t);return this.createSDKInstance(e,this.wrapDebugLogger(e,r))}},{key:"wrapDebugLogger",value:function(e,t){if(!(!0===e.activeDebugLog))return t;for(var r=ix(),n={},i=0,o=Object.entries(t);i<o.length;i++){var a=w(o[i],2),s=a[0],u=a[1];n[s]=r.wrapDomainModels(s,u)}return n}}]),e}(),yM=function(){function e(t,r){o(this,e),this.constructorParams=t,this.dependencyConfigurations=r}return s(e,[{key:"brandpay",value:function(e){var t=ix(),r=this.createBrandpaySDKInstance(e);return t.wrapSDKInstance("BrandpaySDK",r)}},{key:"widgets",value:function(e){var t=ix(),r=this.createWidgetsSDKInstance(e);return t.wrapSDKInstance("WidgetsSDK",r)}},{key:"payment",value:function(e){var t=ix(),r=this.createPaymentGatewaySDKInstance(e);return t.wrapSDKInstance("PaymentSDK",r)}}]),e}();jT({},{AmountContract:function(){return gM},ClientKeyContract:function(){return wM},MidContract:function(){return kM}});var gM=s((function e(){o(this,e)})),wM=s((function e(){o(this,e)})),kM=s((function e(){o(this,e)})),bM=Object.defineProperty,SM=function(e,t){for(var r in t)bM(e,r,{get:t[r],enumerable:!0})},EM={};SM(EM,{Errors:function(){return RM},Models:function(){return PM}});var PM={},RM={};SM(RM,{AgreementWidgetAlreadyRenderedError:function(){return IM},BelowZeroAmountError:function(){return AM},CustomPaymentMethodUnableToPayError:function(){return TM},ExceedDepositAmountLimitError:function(){return xM},ExceedMaxDueDateError:function(){return _M},IncorrectFailUrlFormatError:function(){return NM},IncorrectPendingUrlFormatError:function(){return OM},IncorrectSuccessUrlFormatError:function(){return MM},InsecureKeyUsageError:function(){return LM},InvalidAmountCurrencyError:function(){return UM},InvalidAmountValueError:function(){return BM},InvalidCallbackParameterError:function(){return DM},InvalidClientKeyError:function(){return KM},InvalidCustomerKeyError:function(){return FM},InvalidEventParameterError:function(){return jM},InvalidMetadataError:function(){return qM},InvalidMethodTransactionError:function(){return GM},InvalidParametersError:function(){return WM},InvalidSelectorError:function(){return HM},InvalidVariantKeyError:function(){return YM},NeedAgreementWithRequiredTermsError:function(){return VM},NeedCardPaymentDetailError:function(){return zM},NeedRefundAccountDetailError:function(){return ZM},NotSelectedPaymentMethodError:function(){return QM},NotSetupAmountError:function(){return JM},NotSupportedAPIIndividualKeyError:function(){return $M},NotSupportedPromiseError:function(){return XM},PaymentMethodsWidgetAlreadyRenderedError:function(){return eL},PaymentRequestFailError:function(){return tL},ProviderStatusUnhealthyError:function(){return rL},UnknownError:function(){return nL},UnsupportedTestPhasePaymentMethodError:function(){return iL},UserCancelError:function(){return oL},V1MethodNotSupportedError:function(){return aL}});var CM=function(e){c(r,e);var t=g(r);function r(e,n){var i;return o(this,r),(i=t.call(this,e)).code=n.code,i}return s(r)}(p(Error)),IM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"하나의 약관 위젯만을 사용할 수 있어요.",{code:"AGREEMENT_WIDGET_ALREADY_RENDERED"})}return s(r)}(CM),AM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"금액은 0보다 커야 합니다.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(CM),TM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"커스텀 결제수단으로 결제할 수 없습니다.",{code:"CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY"})}return s(r)}(CM),xM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"가상계좌 입금 제한 금액을 초과했어요. 다른 결제수단을 이용해주세요.",{code:"EXCEED_DEPOSIT_AMOUNT_LIMIT"})}return s(r)}(CM),_M=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"가상 계좌의 최대 유효만료 기간을 초과했습니다.",{code:"EXCEED_MAX_DUE_DATE"})}return s(r)}(CM),NM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 failUrl 입니다.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(CM),OM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 pendingUrl 입니다.",{code:"INCORRECT_PENDING_URL_FORMAT"})}return s(r)}(CM),MM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 successUrl 입니다.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(CM),LM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"test_gsk, live_gsk로 시작하는 시크릿 키는 클라이언트 코드에 노출되면 안 됩니다. 구매자를 식별하는 customerKey 값을 사용해주세요.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(CM),UM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 통화 값입니다.",{code:"INVALID_AMOUNT_CURRENCY"})}return s(r)}(CM),BM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제금액이 올바르지 않습니다.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(CM),DM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"콜백 함수가 올바르지 않습니다.",{code:"INVALID_PARAMETER"})}return s(r)}(CM),KM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"ClientKey 형태가 올바르지 않습니다.",{code:"INVALID_CLIENT_KEY"})}return s(r)}(CM),FM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"고객키는 영문 대소문자, 숫자, 특수문자 -, _, =, ., @로 2자 이상 50자 이하여야 합니다.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(CM),jM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"허용하지 않는 이벤트입니다.",{code:"INVALID_PARAMETER"})}return s(r)}(CM),qM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"올바르지 않은 metadata 형식입니다.",{code:"INVALID_METADATA"})}return s(r)}(CM),GM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"이미 다른 요청을 수행하고 있어요.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(CM),WM=function(e){c(r,e);var t=g(r);function r(e){return o(this,r),t.call(this,e,{code:"INVALID_PARAMETERS"})}return s(r)}(CM),HM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"selector에 해당하는 HTML 요소를 찾을 수 없습니다. selector 값을 다시 확인해주세요.",{code:"INVALID_SELECTOR"})}return s(r)}(CM),YM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"variantKey 에 해당하는 위젯을 찾을 수 없습니다. variantKey 값을 다시 확인해주세요.",{code:"INVALID_VARIANT_KEY"})}return s(r)}(CM),VM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"필수 약관에 동의해주세요.",{code:"NEED_AGREEMENT_WITH_REQUIRED_TERMS"})}return s(r)}(CM),zM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"카드 결제 정보를 선택해주세요.",{code:"NEED_CARD_PAYMENT_DETAIL"})}return s(r)}(CM),ZM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"환불계좌 정보를 모두 입력해주세요.",{code:"NEED_REFUND_ACCOUNT_DETAIL"})}return s(r)}(CM),QM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제수단이 아직 선택되지 않았어요. 결제수단을 선택해 주세요.",{code:"NOT_SELECTED_PAYMENT_METHOD"})}return s(r)}(CM),JM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제금액이 설정되지 않았습니다. setAmount를 호출해주세요.",{code:"NOT_SETUP_AMOUNT"})}return s(r)}(CM),$M=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제위젯 연동 키의 클라이언트 키로 SDK를 연동해주세요. API 개별 연동 키는 지원하지 않습니다.",{code:"NOT_SUPPORTED_API_INDIVIDUAL_KEY"})}return s(r)}(CM),XM=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"Promise 방식을 지원하지 않습니다. successUrl, failUrl을 사용해주세요.",{code:"NOT_SUPPORTED_PROMISE"})}return s(r)}(CM),eL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"하나의 결제수단 위젯만을 사용할 수 있어요.",{code:"PAYMENT_METHODS_WIDGET_ALREADY_RENDERED"})}return s(r)}(CM),tL=function(e){c(r,e);var t=g(r);function r(e,n){var i,a=n.orderId,s=n.code;return o(this,r),(i=t.call(this,e,{code:s})).orderId=a,i}return s(r)}(CM),rL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제 기관(카드사, 은행, 국세청 등) 오류입니다. 다른 결제수단을 선택해 주세요.",{code:"PROVIDER_STATUS_UNHEALTHY"})}return s(r)}(CM),nL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"알 수 없는 에러가 발생했습니다.",{code:"UNKNOWN"})}return s(r)}(CM),iL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"테스트 환경을 지원하지 않는 결제수단입니다.",{code:"UNSUPPORTED_TEST_PHASE_PAYMENT_METHOD"})}return s(r)}(CM),oL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"취소되었습니다.",{code:"USER_CANCEL"})}return s(r)}(CM),aL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"해당 API 는 v1 에서만 제공됩니다.",{code:"V1_METHOD_NOT_SUPPORTED"})}return s(r)}(CM),sL={};SM(sL,{Errors:function(){return cL},Models:function(){return uL}});var uL={},cL={};SM(cL,{BelowZeroAmountError:function(){return lL},IncorrectFailUrlFormatError:function(){return dL},IncorrectSuccessUrlFormatError:function(){return fL},InsecureKeyUsageError:function(){return CL},InvalidAmountValueError:function(){return hL},InvalidClientKeyError:function(){return pL},InvalidCustomerKeyError:function(){return vL},InvalidMetadataError:function(){return mL},InvalidMethodTransactionError:function(){return yL},InvalidParametersError:function(){return gL},NeedAgreementWithTermsError:function(){return wL},NeedMerchantOneTouchSettingError:function(){return kL},NotRegisteredRedirectUrlError:function(){return bL},NotSupportedWidgetKeyError:function(){return IL},PaymentRequestFailError:function(){return SL},UnknownError:function(){return EL},UserCancelError:function(){return PL},V1MethodNotSupportedError:function(){return RL}});var lL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"금액은 0보다 커야 합니다.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(CM),dL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 failUrl 입니다.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(CM),fL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 successUrl 입니다.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(CM),hL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제금액이 올바르지 않습니다.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(CM),pL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"ClientKey 형태가 올바르지 않습니다.",{code:"INVALID_CLIENT_KEY"})}return s(r)}(CM),vL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"고객키는 영문 대소문자, 숫자, 특수문자 -, _, =, ., @로 2자 이상 50자 이하여야 합니다.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(CM),mL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"올바르지 않은 metadata 형식입니다.",{code:"INVALID_METADATA"})}return s(r)}(CM),yL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"이미 다른 요청을 수행하고 있어요.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(CM),gL=function(e){c(r,e);var t=g(r);function r(e){return o(this,r),t.call(this,e,{code:"INVALID_PARAMETERS"})}return s(r)}(CM),wL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"이용약관 동의가 필요합니다.",{code:"NEED_AGREEMENT_WITH_TERMS"})}return s(r)}(CM),kL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"원터치결제 사용을 위해서는 가맹점 설정이 필요합니다.",{code:"NEED_MERCHANT_ONE_TOUCH_SETTING"})}return s(r)}(CM),bL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"리다이렉트 URL이 등록되지 않았습니다. 개발정보 페이지에서 등록해주세요. https://developers.tosspayments.com/my/brandpay",{code:"NOT_REGISTERED_REDIRECT_URL"})}return s(r)}(CM),SL=function(e){c(r,e);var t=g(r);function r(e,n){var i,a=n.orderId,s=n.code;return o(this,r),(i=t.call(this,e,{code:s})).orderId=a,i}return s(r)}(CM),EL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"알 수 없는 에러가 발생했습니다.",{code:"UNKNOWN"})}return s(r)}(CM),PL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"취소되었습니다.",{code:"USER_CANCEL"})}return s(r)}(CM),RL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"해당 API 는 v1 에서만 제공됩니다.",{code:"V1_METHOD_NOT_SUPPORTED"})}return s(r)}(CM),CL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"test_gsk, live_gsk로 시작하는 시크릿 키는 클라이언트 코드에 노출되면 안 됩니다. 구매자를 식별하는 customerKey 값을 사용해주세요.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(CM),IL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"API 개별 연동 키의 클라이언트 키로 SDK를 연동해주세요. 결제위젯 연동 키는 지원하지 않습니다.",{code:"NOT_SUPPORTED_WIDGET_KEY"})}return s(r)}(CM),AL={};SM(AL,{Errors:function(){return xL},Models:function(){return TL}});var TL={},xL={};SM(xL,{BelowZeroAmountError:function(){return _L},IncorrectFailUrlFormatError:function(){return NL},IncorrectPendingUrlFormatError:function(){return OL},IncorrectSuccessUrlFormatError:function(){return ML},InsecureKeyUsageError:function(){return LL},InvalidAmountCurrencyError:function(){return UL},InvalidAmountValueError:function(){return BL},InvalidClientKeyError:function(){return DL},InvalidCustomerKeyError:function(){return KL},InvalidMetadataError:function(){return FL},InvalidMethodTransactionError:function(){return jL},InvalidParametersError:function(){return qL},NotSupportedMethodError:function(){return WL},NotSupportedPromiseError:function(){return HL},NotSupportedWidgetKeyError:function(){return GL},PaymentRequestFailError:function(){return YL},UnknownError:function(){return VL},UserCancelError:function(){return zL},V1MethodNotSupportedError:function(){return ZL}});var _L=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"금액은 0보다 커야 합니다.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(CM),NL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 failUrl 입니다.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(CM),OL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 pendingUrl 입니다.",{code:"INCORRECT_PENDING_URL_FORMAT"})}return s(r)}(CM),ML=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 successUrl 입니다.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(CM),LL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"test_gsk, live_gsk로 시작하는 시크릿 키는 클라이언트 코드에 노출되면 안 됩니다. 구매자를 식별하는 customerKey 값을 사용해주세요.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(CM),UL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"잘못된 통화 값입니다.",{code:"INVALID_AMOUNT_CURRENCY"})}return s(r)}(CM),BL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"결제금액이 올바르지 않습니다.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(CM),DL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"ClientKey 형태가 올바르지 않습니다.",{code:"INVALID_CLIENT_KEY"})}return s(r)}(CM),KL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"고객키는 영문 대소문자, 숫자, 특수문자 -, _, =, ., @로 2자 이상 50자 이하여야 합니다.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(CM),FL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"올바르지 않은 metadata 형식입니다.",{code:"INVALID_METADATA"})}return s(r)}(CM),jL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"이미 다른 요청을 수행하고 있어요.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(CM),qL=function(e){c(r,e);var t=g(r);function r(e){return o(this,r),t.call(this,e,{code:"INVALID_PARAMETERS"})}return s(r)}(CM),GL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"API 개별 연동 키의 클라이언트 키로 SDK를 연동해주세요. 결제위젯 연동 키는 지원하지 않습니다.",{code:"NOT_SUPPORTED_WIDGET_KEY"})}return s(r)}(CM),WL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"지원되지 않는 결제수단입니다.",{code:"NOT_SUPPORTED_METHOD"})}return s(r)}(CM),HL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"Promise 방식을 지원하지 않습니다. successUrl, failUrl을 사용해주세요.",{code:"NOT_SUPPORTED_PROMISE"})}return s(r)}(CM),YL=function(e){c(r,e);var t=g(r);function r(e,n){var i,a=n.orderId,s=n.code;return o(this,r),(i=t.call(this,e,{code:s})).orderId=a,i}return s(r)}(CM),VL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"알 수 없는 에러가 발생했습니다.",{code:"UNKNOWN"})}return s(r)}(CM),zL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"취소되었습니다.",{code:"USER_CANCEL"})}return s(r)}(CM),ZL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"해당 API 는 v1 에서만 제공됩니다.",{code:"V1_METHOD_NOT_SUPPORTED"})}return s(r)}(CM),QL=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.call(this,"V2 SDK는 V1 SDK와 함께 사용할 수 없어요. 마이그레이션 가이드를 확인해주세요. https://docs.tosspayments.com/guides/v2/get-started/migration-guide",{code:"INCOMPATIBLE_SDK_VERSION"})}return s(r)}(CM);var JL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n="",i=r;i--;)n+=e[Math.random()*e.length|0];return n}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",32);var $L=Pi,XL=A,eU=L,tU=z,rU=ae,nU=le,iU=Ag,oU=Do,aU=Ge,sU=Iy,uU=ib,cU=Et("replace"),lU=XL.TypeError,dU=tU("".indexOf);tU("".replace);var fU=tU("".slice),hU=Math.max,pU=function(e,t,r){return r>e.length?-1:""===t?r:dU(e,t,r)};function vU(e,t){if(!e)throw"string"==typeof t?new Error(t):t}function mU(){}function yU(e){return null==e||"string"==typeof e&&0===e.length}function gU(e){return function(t,r,n){var i=n.value;return n.value=function(){var t=this.activationLogger;if(null==t)throw new Error("this.activationLogger 가 존재하지 않습니다.");for(var r=t.wrap(e,i),n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r.apply(this,o)},n}}function wU(e){var t=null;return{with:function(r,n){return e instanceof Error&&e instanceof r&&(t=n(e)),this},otherwise:function(e){return null==t?e():t}}}$L({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,i,o,a,s,u,c,l=rU(this),d=0,f=0,h="";if(null!=e){if(iU(e)&&(r=oU(rU(sU(e))),!~dU(r,"g")))throw lU("`.replaceAll` does not allow non-global regexes");if(n=aU(e,cU))return eU(n,e,l,t)}for(i=oU(l),o=oU(e),(a=nU(t))||(t=oU(t)),s=o.length,u=hU(1,s),d=pU(i,o,0);-1!==d;)c=a?oU(t(o,d,i)):uU(o,i,d,[],void 0,t),h+=fU(i,f,d)+c,f=d+s,d=pU(i,o,d+u);return f<i.length&&(h+=fU(i,f)),h}});var kU=Pi,bU=ts.find,SU=xc,EU="find",PU=!0;EU in[]&&Array(1).find((function(){PU=!1})),kU({target:"Array",proto:!0,forced:PU},{find:function(e){return bU(this,e,arguments.length>1?arguments[1]:void 0)}}),SU(EU);var RU=fe,CU=Math.floor;Pi({target:"Number",stat:!0},{isInteger:Number.isInteger||function(e){return!RU(e)&&isFinite(e)&&CU(e)===e}});var IU=Pi,AU=z,TU=T.f,xU=On,_U=Do,NU=Yb,OU=ae,MU=zb,LU=AU("".endsWith),UU=AU("".slice),BU=Math.min,DU=MU("endsWith"),KU=!DU&&!!function(){var e=TU(String.prototype,"endsWith");return e&&!e.writable}();IU({target:"String",proto:!0,forced:!KU&&!DU},{endsWith:function(e){var t=_U(OU(this));NU(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:BU(xU(r),n),o=_U(e);return LU?LU(t,o,i):UU(t,i-o.length,i)===o}});var FU=Pi,jU=Lw,qU=x,GU=fe,WU=Iw.exports.onFreeze,HU=Object.freeze;FU({target:"Object",stat:!0,forced:qU((function(){HU(1)})),sham:!jU},{freeze:function(e){return HU&&GU(e)?HU(WU(e)):e}});var YU=Pi,VU=A,zU=z,ZU=Cn,QU=Yv,JU=uy,$U=x,XU=VU.RangeError,eB=VU.String,tB=Math.floor,rB=zU(JU),nB=zU("".slice),iB=zU(1..toFixed),oB=function(e,t,r){return 0===t?r:t%2==1?oB(e,t-1,r*e):oB(e*e,t/2,r)},aB=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=tB(i/1e7)},sB=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=tB(n/t),n=n%t*1e7},uB=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=eB(e[t]);r=""===r?n:r+rB("0",7-n.length)+n}return r};YU({target:"Number",proto:!0,forced:$U((function(){return"0.000"!==iB(8e-5,3)||"1"!==iB(.9,0)||"1.25"!==iB(1.255,2)||"1000000000000000128"!==iB(0xde0b6b3a7640080,0)}))||!$U((function(){iB({})}))},{toFixed:function(e){var t,r,n,i,o=QU(this),a=ZU(e),s=[0,0,0,0,0,0],u="",c="0";if(a<0||a>20)throw XU("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return eB(o);if(o<0&&(u="-",o=-o),o>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(o*oB(2,69,1))-69)<0?o*oB(2,-t,1):o/oB(2,t,1),r*=4503599627370496,(t=52-t)>0){for(aB(s,0,r),n=a;n>=7;)aB(s,1e7,0),n-=7;for(aB(s,oB(10,n,1),0),n=t-1;n>=23;)sB(s,1<<23),n-=23;sB(s,1<<n),aB(s,1,1),sB(s,2),c=uB(s)}else aB(s,0,r),aB(s,1<<-t,0),c=uB(s)+rB("0",a);return c=a>0?u+((i=c.length)<=a?"0."+rB("0",a-i)+c:nB(c,0,i-a)+"."+nB(c,i-a)):u+c}});var cB=A.isFinite;Pi({target:"Number",stat:!0},{isFinite:Number.isFinite||function(e){return"number"==typeof e&&cB(e)}}),Pi({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991}),Pi({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var lB=z,dB=hk,fB=Iw.exports.getWeakData,hB=nr,pB=fe,vB=Bd,mB=Yp,yB=st,gB=on.set,wB=on.getterFor,kB=ts.find,bB=ts.findIndex,SB=lB([].splice),EB=0,PB=function(e){return e.frozen||(e.frozen=new RB)},RB=function(){this.entries=[]},CB=function(e,t){return kB(e.entries,(function(e){return e[0]===t}))};RB.prototype={get:function(e){var t=CB(this,e);if(t)return t[1]},has:function(e){return!!CB(this,e)},set:function(e,t){var r=CB(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=bB(this.entries,(function(t){return t[0]===e}));return~t&&SB(this.entries,t,1),!!~t}};var IB,AB,TB,xB={getConstructor:function(e,t,r,n){var i=e((function(e,i){vB(e,o),gB(e,{type:t,id:EB++,frozen:void 0}),null!=i&&mB(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,a=wB(t),s=function(e,t,r){var n=a(e),i=fB(hB(t),!0);return!0===i?PB(n).set(t,r):i[n.id]=r,e};return dB(o,{delete:function(e){var t=a(this);if(!pB(e))return!1;var r=fB(e);return!0===r?PB(t).delete(e):r&&yB(r,t.id)&&delete r[t.id]},has:function(e){var t=a(this);if(!pB(e))return!1;var r=fB(e);return!0===r?PB(t).has(e):r&&yB(r,t.id)}}),dB(o,r?{get:function(e){var t=a(this);if(pB(e)){var r=fB(e);return!0===r?PB(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},_B=A,NB=z,OB=hk,MB=Iw.exports,LB=dk,UB=xB,BB=fe,DB=Mw,KB=on.enforce,FB=Lr,jB=!_B.ActiveXObject&&"ActiveXObject"in _B,qB=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},GB=LB("WeakMap",qB,UB);if(FB&&jB){IB=UB.getConstructor(qB,"WeakMap",!0),MB.enable();var WB=GB.prototype,HB=NB(WB.delete),YB=NB(WB.has),VB=NB(WB.get),zB=NB(WB.set);OB(WB,{delete:function(e){if(BB(e)&&!DB(e)){var t=KB(this);return t.frozen||(t.frozen=new IB),HB(this,e)||t.frozen.delete(e)}return HB(this,e)},has:function(e){if(BB(e)&&!DB(e)){var t=KB(this);return t.frozen||(t.frozen=new IB),YB(this,e)||t.frozen.has(e)}return YB(this,e)},get:function(e){if(BB(e)&&!DB(e)){var t=KB(this);return t.frozen||(t.frozen=new IB),YB(this,e)?VB(this,e):t.frozen.get(e)}return VB(this,e)},set:function(e,t){if(BB(e)&&!DB(e)){var r=KB(this);r.frozen||(r.frozen=new IB),YB(this,e)?zB(this,e,t):r.frozen.set(e,t)}else zB(this,e,t);return this}})}!function(e){e.assertEqual=function(e){return e},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=function(e){var t,r={},n=E(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r[i]=i}}catch(e){n.e(e)}finally{n.f()}return r},e.getValidEnumValues=function(t){var r,n=e.objectKeys(t).filter((function(e){return"number"!=typeof t[t[e]]})),i={},o=E(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=t[a]}}catch(e){o.e(e)}finally{o.f()}return e.objectValues(i)},e.objectValues=function(t){return e.objectKeys(t).map((function(e){return t[e]}))},e.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=function(e,t){var r,n=E(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(t(i))return i}}catch(e){n.e(e)}finally{n.f()}},e.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.joinValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((function(e){return"string"==typeof e?"'".concat(e,"'"):e})).join(t)},e.jsonStringifyReplacer=function(e,t){return"bigint"==typeof t?t.toString():t}}(AB||(AB={})),function(e){e.mergeShapes=function(e,r){return t(t({},e),r)}}(TB||(TB={}));var ZB=AB.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),QB=function(e){switch(r(e)){case"undefined":return ZB.undefined;case"string":return ZB.string;case"number":return isNaN(e)?ZB.nan:ZB.number;case"boolean":return ZB.boolean;case"function":return ZB.function;case"bigint":return ZB.bigint;case"symbol":return ZB.symbol;case"object":return Array.isArray(e)?ZB.array:null===e?ZB.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ZB.promise:"undefined"!=typeof Map&&e instanceof Map?ZB.map:"undefined"!=typeof Set&&e instanceof Set?ZB.set:"undefined"!=typeof Date&&e instanceof Date?ZB.date:ZB.object;default:return ZB.unknown}},JB=AB.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$B=function(e){c(r,e);var t=g(r);function r(e){var n;o(this,r),(n=t.call(this)).issues=[],n.addIssue=function(e){n.issues=[].concat(k(n.issues),[e])},n.addIssues=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.issues=[].concat(k(n.issues),k(e))};var i=(this instanceof r?this.constructor:void 0).prototype;return Object.setPrototypeOf?Object.setPrototypeOf(m(n),i):n.__proto__=i,n.name="ZodError",n.issues=e,n}return s(r,[{key:"errors",get:function(){return this.issues}},{key:"format",value:function(e){var t=e||function(e){return e.message},r={_errors:[]};return function e(n){var i,o=E(n.issues);try{for(o.s();!(i=o.n()).done;){var a=i.value;if("invalid_union"===a.code)a.unionErrors.map(e);else if("invalid_return_type"===a.code)e(a.returnTypeError);else if("invalid_arguments"===a.code)e(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else for(var s=r,u=0;u<a.path.length;){var c=a.path[u];u===a.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(t(a))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}}catch(e){o.e(e)}finally{o.f()}}(this),r}},{key:"toString",value:function(){return this.message}},{key:"message",get:function(){return JSON.stringify(this.issues,AB.jsonStringifyReplacer,2)}},{key:"isEmpty",get:function(){return 0===this.issues.length}},{key:"flatten",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.message},r={},n=[],i=E(this.issues);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):n.push(t(o))}}catch(e){i.e(e)}finally{i.f()}return{formErrors:n,fieldErrors:r}}},{key:"formErrors",get:function(){return this.flatten()}}],[{key:"assert",value:function(e){if(!(e instanceof r))throw new Error("Not a ZodError: ".concat(e))}}]),r}(p(Error));$B.create=function(e){return new $B(e)};var XB=function(e,t){var n;switch(e.code){case JB.invalid_type:n=e.received===ZB.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case JB.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,AB.jsonStringifyReplacer));break;case JB.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(AB.joinValues(e.keys,", "));break;case JB.invalid_union:n="Invalid input";break;case JB.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(AB.joinValues(e.options));break;case JB.invalid_enum_value:n="Invalid enum value. Expected ".concat(AB.joinValues(e.options),", received '").concat(e.received,"'");break;case JB.invalid_arguments:n="Invalid function arguments";break;case JB.invalid_return_type:n="Invalid function return type";break;case JB.invalid_date:n="Invalid date";break;case JB.invalid_string:"object"===r(e.validation)?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"==typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):AB.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case JB.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case JB.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case JB.custom:n="Invalid input";break;case JB.invalid_intersection_types:n="Intersection results could not be merged";break;case JB.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case JB.not_finite:n="Number must be finite";break;default:n=t.defaultError,AB.assertNever(e)}return{message:n}},eD=XB;function tD(){return eD}var rD=function(e){var r=e.data,n=e.path,i=e.errorMaps,o=e.issueData,a=[].concat(k(n),k(o.path||[])),s=t(t({},o),{},{path:a});if(void 0!==o.message)return t(t({},o),{},{path:a,message:o.message});var u,c="",l=E(i.filter((function(e){return!!e})).slice().reverse());try{for(l.s();!(u=l.n()).done;){c=(0,u.value)(s,{data:r,defaultError:c}).message}}catch(e){l.e(e)}finally{l.f()}return t(t({},o),{},{path:a,message:c})};function nD(e,t){var r=tD(),n=rD({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===XB?void 0:XB].filter((function(e){return!!e}))});e.common.issues.push(n)}var iD,oD,aD,sD=function(){function e(){o(this,e),this.value="valid"}var t;return s(e,[{key:"dirty",value:function(){"valid"===this.value&&(this.value="dirty")}},{key:"abort",value:function(){"aborted"!==this.value&&(this.value="aborted")}}],[{key:"mergeArray",value:function(e,t){var r,n=[],i=E(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("aborted"===o.status)return uD;"dirty"===o.status&&e.dirty(),n.push(o.value)}}catch(e){i.e(e)}finally{i.f()}return{status:e.value,value:n}}},{key:"mergeObjectAsync",value:(t=i(regeneratorRuntime.mark((function t(r,n){var i,o,a,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],o=E(n),t.prev=2,o.s();case 4:if((a=o.n()).done){t.next=15;break}return s=a.value,t.next=8,s.key;case 8:return u=t.sent,t.next=11,s.value;case 11:c=t.sent,i.push({key:u,value:c});case 13:t.next=4;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),o.e(t.t0);case 20:return t.prev=20,o.f(),t.finish(20);case 23:return t.abrupt("return",e.mergeObjectSync(r,i));case 24:case"end":return t.stop()}}),t,null,[[2,17,20,23]])}))),function(e,r){return t.apply(this,arguments)})},{key:"mergeObjectSync",value:function(e,t){var r,n={},i=E(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.key,s=o.value;if("aborted"===a.status)return uD;if("aborted"===s.status)return uD;"dirty"===a.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===a.value||void 0===s.value&&!o.alwaysSet||(n[a.value]=s.value)}}catch(e){i.e(e)}finally{i.f()}return{status:e.value,value:n}}}]),e}(),uD=Object.freeze({status:"aborted"}),cD=function(e){return{status:"dirty",value:e}},lD=function(e){return{status:"valid",value:e}},dD=function(e){return"aborted"===e.status},fD=function(e){return"dirty"===e.status},hD=function(e){return"valid"===e.status},pD=function(e){return"undefined"!=typeof Promise&&e instanceof Promise};function vD(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function mD(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},e.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message}}(iD||(iD={}));var yD=function(){function e(t,r,n,i){o(this,e),this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}return s(e,[{key:"path",get:function(){var e,t;this._cachedPath.length||(this._key instanceof Array?(e=this._cachedPath).push.apply(e,k(this._path).concat(k(this._key))):(t=this._cachedPath).push.apply(t,k(this._path).concat([this._key])));return this._cachedPath}}]),e}(),gD=function(e,t){if(hD(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;var t=new $B(e.common.issues);return this._error=t,this._error}}};function wD(e){if(!e)return{};var t=e.errorMap,r=e.invalid_type_error,n=e.required_error,i=e.description;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:function(t,i){var o,a,s=e.message;return"invalid_enum_value"===t.code?{message:null!=s?s:i.defaultError}:void 0===i.data?{message:null!==(o=null!=s?s:n)&&void 0!==o?o:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(a=null!=s?s:r)&&void 0!==a?a:i.defaultError}},description:i}}var kD,bD=function(){function e(t){o(this,e),this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}var r,n;return s(e,[{key:"description",get:function(){return this._def.description}},{key:"_getType",value:function(e){return QB(e.data)}},{key:"_getOrReturnCtx",value:function(e,t){return t||{common:e.parent.common,data:e.data,parsedType:QB(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}},{key:"_processInputParams",value:function(e){return{status:new sD,ctx:{common:e.parent.common,data:e.data,parsedType:QB(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}},{key:"_parseSync",value:function(e){var t=this._parse(e);if(pD(t))throw new Error("Synchronous parse encountered promise.");return t}},{key:"_parseAsync",value:function(e){var t=this._parse(e);return Promise.resolve(t)}},{key:"parse",value:function(e,t){var r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}},{key:"safeParse",value:function(e,t){var r,n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:QB(e)},i=this._parseSync({data:e,path:n.path,parent:n});return gD(n,i)}},{key:"parseAsync",value:(n=i(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safeParseAsync(t,r);case 2:if(!(n=e.sent).success){e.next=5;break}return e.abrupt("return",n.data);case 5:throw n.error;case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"safeParseAsync",value:(r=i(regeneratorRuntime.mark((function e(t,r){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={common:{issues:[],contextualErrorMap:null==r?void 0:r.errorMap,async:!0},path:(null==r?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:QB(t)},i=this._parse({data:t,path:n.path,parent:n}),e.next=4,pD(i)?i:Promise.resolve(i);case 4:return o=e.sent,e.abrupt("return",gD(n,o));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"refine",value:function(e,r){return this._refinement((function(n,i){var o=e(n),a=function(){return i.addIssue(t({code:JB.custom},function(e){return"string"==typeof r||void 0===r?{message:r}:"function"==typeof r?r(e):r}(n)))};return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return!!e||(a(),!1)})):!!o||(a(),!1)}))}},{key:"refinement",value:function(e,t){return this._refinement((function(r,n){return!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)}))}},{key:"_refinement",value:function(e){return new pK({schema:this,typeName:RK.ZodEffects,effect:{type:"refinement",refinement:e}})}},{key:"superRefine",value:function(e){return this._refinement(e)}},{key:"optional",value:function(){return vK.create(this,this._def)}},{key:"nullable",value:function(){return mK.create(this,this._def)}},{key:"nullish",value:function(){return this.nullable().optional()}},{key:"array",value:function(){return ZD.create(this,this._def)}},{key:"promise",value:function(){return hK.create(this,this._def)}},{key:"or",value:function(e){return $D.create([this,e],this._def)}},{key:"and",value:function(e){return rK.create(this,e,this._def)}},{key:"transform",value:function(e){return new pK(t(t({},wD(this._def)),{},{schema:this,typeName:RK.ZodEffects,effect:{type:"transform",transform:e}}))}},{key:"default",value:function(e){var r="function"==typeof e?e:function(){return e};return new yK(t(t({},wD(this._def)),{},{innerType:this,defaultValue:r,typeName:RK.ZodDefault}))}},{key:"brand",value:function(){return new bK(t({typeName:RK.ZodBranded,type:this},wD(this._def)))}},{key:"catch",value:function(e){var r="function"==typeof e?e:function(){return e};return new gK(t(t({},wD(this._def)),{},{innerType:this,catchValue:r,typeName:RK.ZodCatch}))}},{key:"describe",value:function(e){return new(0,this.constructor)(t(t({},this._def),{},{description:e}))}},{key:"pipe",value:function(e){return SK.create(this,e)}},{key:"readonly",value:function(){return EK.create(this)}},{key:"isOptional",value:function(){return this.safeParse(void 0).success}},{key:"isNullable",value:function(){return this.safeParse(null).success}}]),e}(),SD=/^c[^\s-]{8,}$/i,ED=/^[0-9a-z]+$/,PD=/^[0-9A-HJKMNP-TV-Z]{26}$/,RD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CD=/^[a-z0-9_-]{21}$/i,ID=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,AD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,TD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xD=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,_D=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ND="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OD=new RegExp("^".concat(ND,"$"));function MD(e){var t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):null==e.precision&&(t="".concat(t,"(\\.\\d+)?")),t}function LD(e){var t="".concat(ND,"T").concat(MD(e)),r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(r.join("|"),")"),new RegExp("^".concat(t,"$"))}function UD(e,t){return!("v4"!==t&&t||!TD.test(e))||!("v6"!==t&&t||!xD.test(e))}var BD=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZB.string){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.string,received:t.parsedType}),uD}var r,n=new sD,i=void 0,o=E(this._def.checks);try{for(o.s();!(r=o.n()).done;){var a=r.value;if("min"===a.kind)e.data.length<a.value&&(nD(i=this._getOrReturnCtx(e,i),{code:JB.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if("max"===a.kind)e.data.length>a.value&&(nD(i=this._getOrReturnCtx(e,i),{code:JB.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if("length"===a.kind){var s=e.data.length>a.value,u=e.data.length<a.value;(s||u)&&(i=this._getOrReturnCtx(e,i),s?nD(i,{code:JB.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&nD(i,{code:JB.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if("email"===a.kind)AD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"email",code:JB.invalid_string,message:a.message}),n.dirty());else if("emoji"===a.kind)kD||(kD=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),kD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:JB.invalid_string,message:a.message}),n.dirty());else if("uuid"===a.kind)RD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:JB.invalid_string,message:a.message}),n.dirty());else if("nanoid"===a.kind)CD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:JB.invalid_string,message:a.message}),n.dirty());else if("cuid"===a.kind)SD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:JB.invalid_string,message:a.message}),n.dirty());else if("cuid2"===a.kind)ED.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:JB.invalid_string,message:a.message}),n.dirty());else if("ulid"===a.kind)PD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:JB.invalid_string,message:a.message}),n.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(t){nD(i=this._getOrReturnCtx(e,i),{validation:"url",code:JB.invalid_string,message:a.message}),n.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0,a.regex.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"regex",code:JB.invalid_string,message:a.message}),n.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(nD(i=this._getOrReturnCtx(e,i),{code:JB.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(nD(i=this._getOrReturnCtx(e,i),{code:JB.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(nD(i=this._getOrReturnCtx(e,i),{code:JB.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty());else if("datetime"===a.kind){LD(a).test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{code:JB.invalid_string,validation:"datetime",message:a.message}),n.dirty())}else if("date"===a.kind){OD.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{code:JB.invalid_string,validation:"date",message:a.message}),n.dirty())}else if("time"===a.kind){new RegExp("^".concat(MD(a),"$")).test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{code:JB.invalid_string,validation:"time",message:a.message}),n.dirty())}else"duration"===a.kind?ID.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"duration",code:JB.invalid_string,message:a.message}),n.dirty()):"ip"===a.kind?UD(e.data,a.version)||(nD(i=this._getOrReturnCtx(e,i),{validation:"ip",code:JB.invalid_string,message:a.message}),n.dirty()):"base64"===a.kind?_D.test(e.data)||(nD(i=this._getOrReturnCtx(e,i),{validation:"base64",code:JB.invalid_string,message:a.message}),n.dirty()):AB.assertNever(a)}}catch(e){o.e(e)}finally{o.f()}return{status:n.value,value:e.data}}},{key:"_regex",value:function(e,r,n){return this.refinement((function(t){return e.test(t)}),t({validation:r,code:JB.invalid_string},iD.errToObj(n)))}},{key:"_addCheck",value:function(e){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[e])}))}},{key:"email",value:function(e){return this._addCheck(t({kind:"email"},iD.errToObj(e)))}},{key:"url",value:function(e){return this._addCheck(t({kind:"url"},iD.errToObj(e)))}},{key:"emoji",value:function(e){return this._addCheck(t({kind:"emoji"},iD.errToObj(e)))}},{key:"uuid",value:function(e){return this._addCheck(t({kind:"uuid"},iD.errToObj(e)))}},{key:"nanoid",value:function(e){return this._addCheck(t({kind:"nanoid"},iD.errToObj(e)))}},{key:"cuid",value:function(e){return this._addCheck(t({kind:"cuid"},iD.errToObj(e)))}},{key:"cuid2",value:function(e){return this._addCheck(t({kind:"cuid2"},iD.errToObj(e)))}},{key:"ulid",value:function(e){return this._addCheck(t({kind:"ulid"},iD.errToObj(e)))}},{key:"base64",value:function(e){return this._addCheck(t({kind:"base64"},iD.errToObj(e)))}},{key:"ip",value:function(e){return this._addCheck(t({kind:"ip"},iD.errToObj(e)))}},{key:"datetime",value:function(e){var r,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(t({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(r=null==e?void 0:e.offset)&&void 0!==r&&r,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n},iD.errToObj(null==e?void 0:e.message)))}},{key:"date",value:function(e){return this._addCheck({kind:"date",message:e})}},{key:"time",value:function(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(t({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision},iD.errToObj(null==e?void 0:e.message)))}},{key:"duration",value:function(e){return this._addCheck(t({kind:"duration"},iD.errToObj(e)))}},{key:"regex",value:function(e,r){return this._addCheck(t({kind:"regex",regex:e},iD.errToObj(r)))}},{key:"includes",value:function(e,r){return this._addCheck(t({kind:"includes",value:e,position:null==r?void 0:r.position},iD.errToObj(null==r?void 0:r.message)))}},{key:"startsWith",value:function(e,r){return this._addCheck(t({kind:"startsWith",value:e},iD.errToObj(r)))}},{key:"endsWith",value:function(e,r){return this._addCheck(t({kind:"endsWith",value:e},iD.errToObj(r)))}},{key:"min",value:function(e,r){return this._addCheck(t({kind:"min",value:e},iD.errToObj(r)))}},{key:"max",value:function(e,r){return this._addCheck(t({kind:"max",value:e},iD.errToObj(r)))}},{key:"length",value:function(e,r){return this._addCheck(t({kind:"length",value:e},iD.errToObj(r)))}},{key:"nonempty",value:function(e){return this.min(1,iD.errToObj(e))}},{key:"trim",value:function(){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[{kind:"trim"}])}))}},{key:"toLowerCase",value:function(){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[{kind:"toLowerCase"}])}))}},{key:"toUpperCase",value:function(){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[{kind:"toUpperCase"}])}))}},{key:"isDatetime",get:function(){return!!this._def.checks.find((function(e){return"datetime"===e.kind}))}},{key:"isDate",get:function(){return!!this._def.checks.find((function(e){return"date"===e.kind}))}},{key:"isTime",get:function(){return!!this._def.checks.find((function(e){return"time"===e.kind}))}},{key:"isDuration",get:function(){return!!this._def.checks.find((function(e){return"duration"===e.kind}))}},{key:"isEmail",get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))}},{key:"isURL",get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))}},{key:"isEmoji",get:function(){return!!this._def.checks.find((function(e){return"emoji"===e.kind}))}},{key:"isUUID",get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))}},{key:"isNANOID",get:function(){return!!this._def.checks.find((function(e){return"nanoid"===e.kind}))}},{key:"isCUID",get:function(){return!!this._def.checks.find((function(e){return"cuid"===e.kind}))}},{key:"isCUID2",get:function(){return!!this._def.checks.find((function(e){return"cuid2"===e.kind}))}},{key:"isULID",get:function(){return!!this._def.checks.find((function(e){return"ulid"===e.kind}))}},{key:"isIP",get:function(){return!!this._def.checks.find((function(e){return"ip"===e.kind}))}},{key:"isBase64",get:function(){return!!this._def.checks.find((function(e){return"base64"===e.kind}))}},{key:"minLength",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"maxLength",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return t}}]),n}(bD);BD.create=function(e){var r;return new BD(t({checks:[],typeName:RK.ZodString,coerce:null!==(r=null==e?void 0:e.coerce)&&void 0!==r&&r},wD(e)))};var DD=function(e){c(n,e);var r=g(n);function n(){var e;return o(this,n),(e=r.apply(this,arguments)).min=e.gte,e.max=e.lte,e.step=e.multipleOf,e}return s(n,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZB.number){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.number,received:t.parsedType}),uD}var r,n,i,o,a,s,u=void 0,c=new sD,l=E(this._def.checks);try{for(l.s();!(r=l.n()).done;){var d=r.value;if("int"===d.kind)AB.isInteger(e.data)||(nD(u=this._getOrReturnCtx(e,u),{code:JB.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty());else if("min"===d.kind){(d.inclusive?e.data<d.value:e.data<=d.value)&&(nD(u=this._getOrReturnCtx(e,u),{code:JB.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty())}else if("max"===d.kind){(d.inclusive?e.data>d.value:e.data>=d.value)&&(nD(u=this._getOrReturnCtx(e,u),{code:JB.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty())}else"multipleOf"===d.kind?0!=(n=e.data,i=d.value,o=void 0,a=void 0,s=void 0,o=(n.toString().split(".")[1]||"").length,a=(i.toString().split(".")[1]||"").length,s=o>a?o:a,parseInt(n.toFixed(s).replace(".",""))%parseInt(i.toFixed(s).replace(".",""))/Math.pow(10,s))&&(nD(u=this._getOrReturnCtx(e,u),{code:JB.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(e.data)||(nD(u=this._getOrReturnCtx(e,u),{code:JB.not_finite,message:d.message}),c.dirty()):AB.assertNever(d)}}catch(e){l.e(e)}finally{l.f()}return{status:c.value,value:e.data}}},{key:"gte",value:function(e,t){return this.setLimit("min",e,!0,iD.toString(t))}},{key:"gt",value:function(e,t){return this.setLimit("min",e,!1,iD.toString(t))}},{key:"lte",value:function(e,t){return this.setLimit("max",e,!0,iD.toString(t))}},{key:"lt",value:function(e,t){return this.setLimit("max",e,!1,iD.toString(t))}},{key:"setLimit",value:function(e,r,i,o){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[{kind:e,value:r,inclusive:i,message:iD.toString(o)}])}))}},{key:"_addCheck",value:function(e){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[e])}))}},{key:"int",value:function(e){return this._addCheck({kind:"int",message:iD.toString(e)})}},{key:"positive",value:function(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:iD.toString(e)})}},{key:"negative",value:function(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:iD.toString(e)})}},{key:"nonpositive",value:function(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:iD.toString(e)})}},{key:"nonnegative",value:function(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:iD.toString(e)})}},{key:"multipleOf",value:function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:iD.toString(t)})}},{key:"finite",value:function(e){return this._addCheck({kind:"finite",message:iD.toString(e)})}},{key:"safe",value:function(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:iD.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:iD.toString(e)})}},{key:"minValue",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"maxValue",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"isInt",get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind||"multipleOf"===e.kind&&AB.isInteger(e.value)}))}},{key:"isFinite",get:function(){var e,t=null,r=null,n=E(this._def.checks);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===r||i.value>r)&&(r=i.value):"max"===i.kind&&(null===t||i.value<t)&&(t=i.value)}}catch(e){n.e(e)}finally{n.f()}return Number.isFinite(r)&&Number.isFinite(t)}}]),n}(bD);DD.create=function(e){return new DD(t({checks:[],typeName:RK.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},wD(e)))};var KD=function(e){c(n,e);var r=g(n);function n(){var e;return o(this,n),(e=r.apply(this,arguments)).min=e.gte,e.max=e.lte,e}return s(n,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ZB.bigint){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.bigint,received:t.parsedType}),uD}var r,n=void 0,i=new sD,o=E(this._def.checks);try{for(o.s();!(r=o.n()).done;){var a=r.value;if("min"===a.kind)(a.inclusive?e.data<a.value:e.data<=a.value)&&(nD(n=this._getOrReturnCtx(e,n),{code:JB.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty());else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(nD(n=this._getOrReturnCtx(e,n),{code:JB.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(nD(n=this._getOrReturnCtx(e,n),{code:JB.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):AB.assertNever(a)}}catch(e){o.e(e)}finally{o.f()}return{status:i.value,value:e.data}}},{key:"gte",value:function(e,t){return this.setLimit("min",e,!0,iD.toString(t))}},{key:"gt",value:function(e,t){return this.setLimit("min",e,!1,iD.toString(t))}},{key:"lte",value:function(e,t){return this.setLimit("max",e,!0,iD.toString(t))}},{key:"lt",value:function(e,t){return this.setLimit("max",e,!1,iD.toString(t))}},{key:"setLimit",value:function(e,r,i,o){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[{kind:e,value:r,inclusive:i,message:iD.toString(o)}])}))}},{key:"_addCheck",value:function(e){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[e])}))}},{key:"positive",value:function(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:iD.toString(e)})}},{key:"negative",value:function(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:iD.toString(e)})}},{key:"nonpositive",value:function(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:iD.toString(e)})}},{key:"nonnegative",value:function(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:iD.toString(e)})}},{key:"multipleOf",value:function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:iD.toString(t)})}},{key:"minValue",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"maxValue",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return t}}]),n}(bD);KD.create=function(e){var r;return new KD(t({checks:[],typeName:RK.ZodBigInt,coerce:null!==(r=null==e?void 0:e.coerce)&&void 0!==r&&r},wD(e)))};var FD=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==ZB.boolean){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.boolean,received:t.parsedType}),uD}return lD(e.data)}}]),r}(bD);FD.create=function(e){return new FD(t({typeName:RK.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},wD(e)))};var jD=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZB.date){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.date,received:t.parsedType}),uD}if(isNaN(e.data.getTime()))return nD(this._getOrReturnCtx(e),{code:JB.invalid_date}),uD;var r,n=new sD,i=void 0,o=E(this._def.checks);try{for(o.s();!(r=o.n()).done;){var a=r.value;"min"===a.kind?e.data.getTime()<a.value&&(nD(i=this._getOrReturnCtx(e,i),{code:JB.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(nD(i=this._getOrReturnCtx(e,i),{code:JB.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):AB.assertNever(a)}}catch(e){o.e(e)}finally{o.f()}return{status:n.value,value:new Date(e.data.getTime())}}},{key:"_addCheck",value:function(e){return new n(t(t({},this._def),{},{checks:[].concat(k(this._def.checks),[e])}))}},{key:"min",value:function(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:iD.toString(t)})}},{key:"max",value:function(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:iD.toString(t)})}},{key:"minDate",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return null!=t?new Date(t):null}},{key:"maxDate",get:function(){var e,t=null,r=E(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(e){r.e(e)}finally{r.f()}return null!=t?new Date(t):null}}]),n}(bD);jD.create=function(e){return new jD(t({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:RK.ZodDate},wD(e)))};var qD=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(this._getType(e)!==ZB.symbol){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.symbol,received:t.parsedType}),uD}return lD(e.data)}}]),r}(bD);qD.create=function(e){return new qD(t({typeName:RK.ZodSymbol},wD(e)))};var GD=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(this._getType(e)!==ZB.undefined){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.undefined,received:t.parsedType}),uD}return lD(e.data)}}]),r}(bD);GD.create=function(e){return new GD(t({typeName:RK.ZodUndefined},wD(e)))};var WD=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(this._getType(e)!==ZB.null){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.null,received:t.parsedType}),uD}return lD(e.data)}}]),r}(bD);WD.create=function(e){return new WD(t({typeName:RK.ZodNull},wD(e)))};var HD=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments))._any=!0,e}return s(r,[{key:"_parse",value:function(e){return lD(e.data)}}]),r}(bD);HD.create=function(e){return new HD(t({typeName:RK.ZodAny},wD(e)))};var YD=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments))._unknown=!0,e}return s(r,[{key:"_parse",value:function(e){return lD(e.data)}}]),r}(bD);YD.create=function(e){return new YD(t({typeName:RK.ZodUnknown},wD(e)))};var VD=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.never,received:t.parsedType}),uD}}]),r}(bD);VD.create=function(e){return new VD(t({typeName:RK.ZodNever},wD(e)))};var zD=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(this._getType(e)!==ZB.undefined){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.void,received:t.parsedType}),uD}return lD(e.data)}}]),r}(bD);zD.create=function(e){return new zD(t({typeName:RK.ZodVoid},wD(e)))};var ZD=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.ctx,n=t.status,i=this._def;if(r.parsedType!==ZB.array)return nD(r,{code:JB.invalid_type,expected:ZB.array,received:r.parsedType}),uD;if(null!==i.exactLength){var o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(nD(r,{code:o?JB.too_big:JB.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&r.data.length<i.minLength.value&&(nD(r,{code:JB.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&r.data.length>i.maxLength.value&&(nD(r,{code:JB.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all(k(r.data).map((function(e,t){return i.type._parseAsync(new yD(r,e,r.path,t))}))).then((function(e){return sD.mergeArray(n,e)}));var s=k(r.data).map((function(e,t){return i.type._parseSync(new yD(r,e,r.path,t))}));return sD.mergeArray(n,s)}},{key:"element",get:function(){return this._def.type}},{key:"min",value:function(e,r){return new n(t(t({},this._def),{},{minLength:{value:e,message:iD.toString(r)}}))}},{key:"max",value:function(e,r){return new n(t(t({},this._def),{},{maxLength:{value:e,message:iD.toString(r)}}))}},{key:"length",value:function(e,r){return new n(t(t({},this._def),{},{exactLength:{value:e,message:iD.toString(r)}}))}},{key:"nonempty",value:function(e){return this.min(1,e)}}]),n}(bD);function QD(e){if(e instanceof JD){var r={};for(var n in e.shape){var i=e.shape[n];r[n]=vK.create(QD(i))}return new JD(t(t({},e._def),{},{shape:function(){return r}}))}return e instanceof ZD?new ZD(t(t({},e._def),{},{type:QD(e.element)})):e instanceof vK?vK.create(QD(e.unwrap())):e instanceof mK?mK.create(QD(e.unwrap())):e instanceof nK?nK.create(e.items.map((function(e){return QD(e)}))):e}ZD.create=function(e,r){return new ZD(t({type:e,minLength:null,maxLength:null,exactLength:null,typeName:RK.ZodArray},wD(r)))};var JD=function(e){c(n,e);var r=g(n);function n(){var e;return o(this,n),(e=r.apply(this,arguments))._cached=null,e.nonstrict=e.passthrough,e.augment=e.extend,e}return s(n,[{key:"_getCached",value:function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=AB.objectKeys(e);return this._cached={shape:e,keys:t}}},{key:"_parse",value:function(e){if(this._getType(e)!==ZB.object){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.object,received:t.parsedType}),uD}var r=this._processInputParams(e),n=r.status,o=r.ctx,a=this._getCached(),s=a.shape,u=a.keys,c=[];if(!(this._def.catchall instanceof VD&&"strip"===this._def.unknownKeys))for(var l in o.data)u.includes(l)||c.push(l);var d,f=[],h=E(u);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=s[p],m=o.data[p];f.push({key:{status:"valid",value:p},value:v._parse(new yD(o,m,o.path,p)),alwaysSet:p in o.data})}}catch(e){h.e(e)}finally{h.f()}if(this._def.catchall instanceof VD){var y=this._def.unknownKeys;if("passthrough"===y){var g,w=E(c);try{for(w.s();!(g=w.n()).done;){var k=g.value;f.push({key:{status:"valid",value:k},value:{status:"valid",value:o.data[k]}})}}catch(e){w.e(e)}finally{w.f()}}else if("strict"===y)c.length>0&&(nD(o,{code:JB.unrecognized_keys,keys:c}),n.dirty());else if("strip"!==y)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var b,S=this._def.catchall,P=E(c);try{for(P.s();!(b=P.n()).done;){var R=b.value,C=o.data[R];f.push({key:{status:"valid",value:R},value:S._parse(new yD(o,C,o.path,R)),alwaysSet:R in o.data})}}catch(e){P.e(e)}finally{P.f()}}return o.common.async?Promise.resolve().then(i(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=E(f),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=15;break}return i=n.value,e.next=8,i.key;case 8:return o=e.sent,e.next=11,i.value;case 11:a=e.sent,t.push({key:o,value:a,alwaysSet:i.alwaysSet});case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})))).then((function(e){return sD.mergeObjectSync(n,e)})):sD.mergeObjectSync(n,f)}},{key:"shape",get:function(){return this._def.shape()}},{key:"strict",value:function(e){var r=this;return iD.errToObj,new n(t(t({},this._def),{},{unknownKeys:"strict"},void 0!==e?{errorMap:function(t,n){var i,o,a,s,u=null!==(a=null===(o=(i=r._def).errorMap)||void 0===o?void 0:o.call(i,t,n).message)&&void 0!==a?a:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=iD.errToObj(e).message)&&void 0!==s?s:u}:{message:u}}}:{}))}},{key:"strip",value:function(){return new n(t(t({},this._def),{},{unknownKeys:"strip"}))}},{key:"passthrough",value:function(){return new n(t(t({},this._def),{},{unknownKeys:"passthrough"}))}},{key:"extend",value:function(e){var r=this;return new n(t(t({},this._def),{},{shape:function(){return t(t({},r._def.shape()),e)}}))}},{key:"merge",value:function(e){var r=this;return new n({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return t(t({},r._def.shape()),e._def.shape())},typeName:RK.ZodObject})}},{key:"setKey",value:function(e,t){return this.augment(u({},e,t))}},{key:"catchall",value:function(e){return new n(t(t({},this._def),{},{catchall:e}))}},{key:"pick",value:function(e){var r=this,i={};return AB.objectKeys(e).forEach((function(t){e[t]&&r.shape[t]&&(i[t]=r.shape[t])})),new n(t(t({},this._def),{},{shape:function(){return i}}))}},{key:"omit",value:function(e){var r=this,i={};return AB.objectKeys(this.shape).forEach((function(t){e[t]||(i[t]=r.shape[t])})),new n(t(t({},this._def),{},{shape:function(){return i}}))}},{key:"deepPartial",value:function(){return QD(this)}},{key:"partial",value:function(e){var r=this,i={};return AB.objectKeys(this.shape).forEach((function(t){var n=r.shape[t];e&&!e[t]?i[t]=n:i[t]=n.optional()})),new n(t(t({},this._def),{},{shape:function(){return i}}))}},{key:"required",value:function(e){var r=this,i={};return AB.objectKeys(this.shape).forEach((function(t){if(e&&!e[t])i[t]=r.shape[t];else{for(var n=r.shape[t];n instanceof vK;)n=n._def.innerType;i[t]=n}})),new n(t(t({},this._def),{},{shape:function(){return i}}))}},{key:"keyof",value:function(){return lK(AB.objectKeys(this.shape))}}]),n}(bD);JD.create=function(e,r){return new JD(t({shape:function(){return e},unknownKeys:"strip",catchall:VD.create(),typeName:RK.ZodObject},wD(r)))},JD.strictCreate=function(e,r){return new JD(t({shape:function(){return e},unknownKeys:"strict",catchall:VD.create(),typeName:RK.ZodObject},wD(r)))},JD.lazycreate=function(e,r){return new JD(t({shape:e,unknownKeys:"strip",catchall:VD.create(),typeName:RK.ZodObject},wD(r)))};var $D=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){var r=this._processInputParams(e).ctx,n=this._def.options;if(r.common.async)return Promise.all(n.map(function(){var e=i(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t(t({},r),{},{common:t(t({},r.common),{},{issues:[]}),parent:null}),e.next=3,n._parseAsync({data:r.data,path:r.path,parent:i});case 3:return e.t0=e.sent,e.t1=i,e.abrupt("return",{result:e.t0,ctx:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("valid"===i.result.status)return i.result}}catch(e){n.e(e)}finally{n.f()}var o,a=E(e);try{for(a.s();!(o=a.n()).done;){var s,u=o.value;if("dirty"===u.result.status)return(s=r.common.issues).push.apply(s,k(u.ctx.common.issues)),u.result}}catch(e){a.e(e)}finally{a.f()}var c=e.map((function(e){return new $B(e.ctx.common.issues)}));return nD(r,{code:JB.invalid_union,unionErrors:c}),uD}));var o,a,s=void 0,u=[],c=E(n);try{for(c.s();!(o=c.n()).done;){var l=o.value,d=t(t({},r),{},{common:t(t({},r.common),{},{issues:[]}),parent:null}),f=l._parseSync({data:r.data,path:r.path,parent:d});if("valid"===f.status)return f;"dirty"!==f.status||s||(s={result:f,ctx:d}),d.common.issues.length&&u.push(d.common.issues)}}catch(e){c.e(e)}finally{c.f()}if(s)return(a=r.common.issues).push.apply(a,k(s.ctx.common.issues)),s.result;var h=u.map((function(e){return new $B(e)}));return nD(r,{code:JB.invalid_union,unionErrors:h}),uD}},{key:"options",get:function(){return this._def.options}}]),n}(bD);$D.create=function(e,r){return new $D(t({options:e,typeName:RK.ZodUnion},wD(r)))};var XD=function e(t){return t instanceof uK?e(t.schema):t instanceof pK?e(t.innerType()):t instanceof cK?[t.value]:t instanceof dK?t.options:t instanceof fK?AB.objectValues(t.enum):t instanceof yK?e(t._def.innerType):t instanceof GD?[void 0]:t instanceof WD?[null]:t instanceof vK?[void 0].concat(k(e(t.unwrap()))):t instanceof mK?[null].concat(k(e(t.unwrap()))):t instanceof bK||t instanceof EK?e(t.unwrap()):t instanceof gK?e(t._def.innerType):[]},eK=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==ZB.object)return nD(t,{code:JB.invalid_type,expected:ZB.object,received:t.parsedType}),uD;var r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(nD(t,{code:JB.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),uD)}},{key:"discriminator",get:function(){return this._def.discriminator}},{key:"options",get:function(){return this._def.options}},{key:"optionsMap",get:function(){return this._def.optionsMap}}],[{key:"create",value:function(e,r,i){var o,a=new Map,s=E(r);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=XD(u.shape[e]);if(!c.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));var l,d=E(c);try{for(d.s();!(l=d.n()).done;){var f=l.value;if(a.has(f))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(f)));a.set(f,u)}}catch(e){d.e(e)}finally{d.f()}}}catch(e){s.e(e)}finally{s.f()}return new n(t({typeName:RK.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:a},wD(i)))}}]),n}(bD);function tK(e,r){var n=QB(e),i=QB(r);if(e===r)return{valid:!0,data:e};if(n===ZB.object&&i===ZB.object){var o,a=AB.objectKeys(r),s=AB.objectKeys(e).filter((function(e){return-1!==a.indexOf(e)})),u=t(t({},e),r),c=E(s);try{for(c.s();!(o=c.n()).done;){var l=o.value,d=tK(e[l],r[l]);if(!d.valid)return{valid:!1};u[l]=d.data}}catch(e){c.e(e)}finally{c.f()}return{valid:!0,data:u}}if(n===ZB.array&&i===ZB.array){if(e.length!==r.length)return{valid:!1};for(var f=[],h=0;h<e.length;h++){var p=tK(e[h],r[h]);if(!p.valid)return{valid:!1};f.push(p.data)}return{valid:!0,data:f}}return n===ZB.date&&i===ZB.date&&+e==+r?{valid:!0,data:e}:{valid:!1}}var rK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx,i=function(e,t){if(dD(e)||dD(t))return uD;var i=tK(e.value,t.value);return i.valid?((fD(e)||fD(t))&&r.dirty(),{status:r.value,value:i.data}):(nD(n,{code:JB.invalid_intersection_types}),uD)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((function(e){var t=w(e,2),r=t[0],n=t[1];return i(r,n)})):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}]),r}(bD);rK.create=function(e,r,n){return new rK(t({left:e,right:r,typeName:RK.ZodIntersection},wD(n)))};var nK=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e),n=r.status,i=r.ctx;if(i.parsedType!==ZB.array)return nD(i,{code:JB.invalid_type,expected:ZB.array,received:i.parsedType}),uD;if(i.data.length<this._def.items.length)return nD(i,{code:JB.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),uD;!this._def.rest&&i.data.length>this._def.items.length&&(nD(i,{code:JB.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());var o=k(i.data).map((function(e,r){var n=t._def.items[r]||t._def.rest;return n?n._parse(new yD(i,e,i.path,r)):null})).filter((function(e){return!!e}));return i.common.async?Promise.all(o).then((function(e){return sD.mergeArray(n,e)})):sD.mergeArray(n,o)}},{key:"items",get:function(){return this._def.items}},{key:"rest",value:function(e){return new n(t(t({},this._def),{},{rest:e}))}}]),n}(bD);nK.create=function(e,r){if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nK(t({items:e,typeName:RK.ZodTuple,rest:null},wD(r)))};var iK=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"keySchema",get:function(){return this._def.keyType}},{key:"valueSchema",get:function(){return this._def.valueType}},{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;if(n.parsedType!==ZB.object)return nD(n,{code:JB.invalid_type,expected:ZB.object,received:n.parsedType}),uD;var i=[],o=this._def.keyType,a=this._def.valueType;for(var s in n.data)i.push({key:o._parse(new yD(n,s,n.path,s)),value:a._parse(new yD(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?sD.mergeObjectAsync(r,i):sD.mergeObjectSync(r,i)}},{key:"element",get:function(){return this._def.valueType}}],[{key:"create",value:function(e,r,i){return new n(r instanceof bD?t({keyType:e,valueType:r,typeName:RK.ZodRecord},wD(i)):t({keyType:BD.create(),valueType:e,typeName:RK.ZodRecord},wD(r)))}}]),n}(bD),oK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"keySchema",get:function(){return this._def.keyType}},{key:"valueSchema",get:function(){return this._def.valueType}},{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;if(n.parsedType!==ZB.map)return nD(n,{code:JB.invalid_type,expected:ZB.map,received:n.parsedType}),uD;var o=this._def.keyType,a=this._def.valueType,s=k(n.data.entries()).map((function(e,t){var r=w(e,2),i=r[0],s=r[1];return{key:o._parse(new yD(n,i,n.path,[t,"key"])),value:a._parse(new yD(n,s,n.path,[t,"value"]))}}));if(n.common.async){var u=new Map;return Promise.resolve().then(i(regeneratorRuntime.mark((function e(){var t,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=E(s),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=17;break}return i=n.value,e.next=7,i.key;case 7:return o=e.sent,e.next=10,i.value;case 10:if(a=e.sent,"aborted"!==o.status&&"aborted"!==a.status){e.next=13;break}return e.abrupt("return",uD);case 13:"dirty"!==o.status&&"dirty"!==a.status||r.dirty(),u.set(o.value,a.value);case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),t.e(e.t0);case 22:return e.prev=22,t.f(),e.finish(22);case 25:return e.abrupt("return",{status:r.value,value:u});case 26:case"end":return e.stop()}}),e,null,[[1,19,22,25]])}))))}var c,l=new Map,d=E(s);try{for(d.s();!(c=d.n()).done;){var f=c.value,h=f.key,p=f.value;if("aborted"===h.status||"aborted"===p.status)return uD;"dirty"!==h.status&&"dirty"!==p.status||r.dirty(),l.set(h.value,p.value)}}catch(e){d.e(e)}finally{d.f()}return{status:r.value,value:l}}}]),r}(bD);oK.create=function(e,r,n){return new oK(t({valueType:r,keyType:e,typeName:RK.ZodMap},wD(n)))};var aK=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;if(n.parsedType!==ZB.set)return nD(n,{code:JB.invalid_type,expected:ZB.set,received:n.parsedType}),uD;var i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&(nD(n,{code:JB.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&(nD(n,{code:JB.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());var o=this._def.valueType;function a(e){var t,n=new Set,i=E(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if("aborted"===o.status)return uD;"dirty"===o.status&&r.dirty(),n.add(o.value)}}catch(e){i.e(e)}finally{i.f()}return{status:r.value,value:n}}var s=k(n.data.values()).map((function(e,t){return o._parse(new yD(n,e,n.path,t))}));return n.common.async?Promise.all(s).then((function(e){return a(e)})):a(s)}},{key:"min",value:function(e,r){return new n(t(t({},this._def),{},{minSize:{value:e,message:iD.toString(r)}}))}},{key:"max",value:function(e,r){return new n(t(t({},this._def),{},{maxSize:{value:e,message:iD.toString(r)}}))}},{key:"size",value:function(e,t){return this.min(e,t).max(e,t)}},{key:"nonempty",value:function(e){return this.min(1,e)}}]),n}(bD);aK.create=function(e,r){return new aK(t({valueType:e,minSize:null,maxSize:null,typeName:RK.ZodSet},wD(r)))};var sK=function(e){c(n,e);var r=g(n);function n(){var e;return o(this,n),(e=r.apply(this,arguments)).validate=e.implement,e}return s(n,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==ZB.function)return nD(t,{code:JB.invalid_type,expected:ZB.function,received:t.parsedType}),uD;function r(e,r){return rD({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tD(),XB].filter((function(e){return!!e})),issueData:{code:JB.invalid_arguments,argumentsError:r}})}function n(e,r){return rD({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tD(),XB].filter((function(e){return!!e})),issueData:{code:JB.invalid_return_type,returnTypeError:r}})}var o={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof hK){var s=this;return lD(i(regeneratorRuntime.mark((function e(){var t,i,u,c,l,d,f,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=h.length,i=new Array(t),u=0;u<t;u++)i[u]=h[u];return c=new $B([]),e.next=4,s._def.args.parseAsync(i,o).catch((function(e){throw c.addIssue(r(i,e)),c}));case 4:return l=e.sent,e.next=7,Reflect.apply(a,this,l);case 7:return d=e.sent,e.next=10,s._def.returns._def.type.parseAsync(d,o).catch((function(e){throw c.addIssue(n(d,e)),c}));case 10:return f=e.sent,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e,this)}))))}var u=this;return lD((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=u._def.args.safeParse(t,o);if(!s.success)throw new $B([r(t,s.error)]);var c=Reflect.apply(a,this,s.data),l=u._def.returns.safeParse(c,o);if(!l.success)throw new $B([n(c,l.error)]);return l.data}))}},{key:"parameters",value:function(){return this._def.args}},{key:"returnType",value:function(){return this._def.returns}},{key:"args",value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return new n(t(t({},this._def),{},{args:nK.create(r).rest(YD.create())}))}},{key:"returns",value:function(e){return new n(t(t({},this._def),{},{returns:e}))}},{key:"implement",value:function(e){return this.parse(e)}},{key:"strictImplement",value:function(e){return this.parse(e)}}],[{key:"create",value:function(e,r,i){return new n(t({args:e||nK.create([]).rest(YD.create()),returns:r||YD.create(),typeName:RK.ZodFunction},wD(i)))}}]),n}(bD),uK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"schema",get:function(){return this._def.getter()}},{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx;return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}]),r}(bD);uK.create=function(e,r){return new uK(t({getter:e,typeName:RK.ZodLazy},wD(r)))};var cK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(e.data!==this._def.value){var t=this._getOrReturnCtx(e);return nD(t,{received:t.data,code:JB.invalid_literal,expected:this._def.value}),uD}return{status:"valid",value:e.data}}},{key:"value",get:function(){return this._def.value}}]),r}(bD);function lK(e,r){return new dK(t({values:e,typeName:RK.ZodEnum},wD(r)))}cK.create=function(e,r){return new cK(t({value:e,typeName:RK.ZodLiteral},wD(r)))};var dK=function(e){c(n,e);var r=g(n);function n(){var e;return o(this,n),e=r.apply(this,arguments),oD.set(m(e),void 0),e}return s(n,[{key:"_parse",value:function(e){if("string"!=typeof e.data){var t=this._getOrReturnCtx(e),r=this._def.values;return nD(t,{expected:AB.joinValues(r),received:t.parsedType,code:JB.invalid_type}),uD}if(vD(this,oD,"f")||mD(this,oD,new Set(this._def.values),"f"),!vD(this,oD,"f").has(e.data)){var n=this._getOrReturnCtx(e),i=this._def.values;return nD(n,{received:n.data,code:JB.invalid_enum_value,options:i}),uD}return lD(e.data)}},{key:"options",get:function(){return this._def.values}},{key:"enum",get:function(){var e,t={},r=E(this._def.values);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=n}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"Values",get:function(){var e,t={},r=E(this._def.values);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=n}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"Enum",get:function(){var e,t={},r=E(this._def.values);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=n}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"extract",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return n.create(e,t(t({},this._def),r))}},{key:"exclude",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return n.create(this.options.filter((function(t){return!e.includes(t)})),t(t({},this._def),r))}}]),n}(bD);oD=new WeakMap,dK.create=lK;var fK=function(e){c(r,e);var t=g(r);function r(){var e;return o(this,r),e=t.apply(this,arguments),aD.set(m(e),void 0),e}return s(r,[{key:"_parse",value:function(e){var t=AB.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ZB.string&&r.parsedType!==ZB.number){var n=AB.objectValues(t);return nD(r,{expected:AB.joinValues(n),received:r.parsedType,code:JB.invalid_type}),uD}if(vD(this,aD,"f")||mD(this,aD,new Set(AB.getValidEnumValues(this._def.values)),"f"),!vD(this,aD,"f").has(e.data)){var i=AB.objectValues(t);return nD(r,{received:r.data,code:JB.invalid_enum_value,options:i}),uD}return lD(e.data)}},{key:"enum",get:function(){return this._def.values}}]),r}(bD);aD=new WeakMap,fK.create=function(e,r){return new fK(t({values:e,typeName:RK.ZodNativeEnum},wD(r)))};var hK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"unwrap",value:function(){return this._def.type}},{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e).ctx;if(r.parsedType!==ZB.promise&&!1===r.common.async)return nD(r,{code:JB.invalid_type,expected:ZB.promise,received:r.parsedType}),uD;var n=r.parsedType===ZB.promise?r.data:Promise.resolve(r.data);return lD(n.then((function(e){return t._def.type.parseAsync(e,{path:r.path,errorMap:r.common.contextualErrorMap})})))}}]),r}(bD);hK.create=function(e,r){return new hK(t({type:e,typeName:RK.ZodPromise},wD(r)))};var pK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"innerType",value:function(){return this._def.schema}},{key:"sourceType",value:function(){return this._def.schema._def.typeName===RK.ZodEffects?this._def.schema.sourceType():this._def.schema}},{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e),n=r.status,o=r.ctx,a=this._def.effect||null,s={addIssue:function(e){nD(o,e),e.fatal?n.abort():n.dirty()},get path(){return o.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===a.type){var u=a.transform(o.data,s);if(o.common.async)return Promise.resolve(u).then(function(){var e=i(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("aborted"!==n.value){e.next=2;break}return e.abrupt("return",uD);case 2:return e.next=4,t._def.schema._parseAsync({data:r,path:o.path,parent:o});case 4:if("aborted"!==(i=e.sent).status){e.next=7;break}return e.abrupt("return",uD);case 7:if("dirty"!==i.status){e.next=9;break}return e.abrupt("return",cD(i.value));case 9:if("dirty"!==n.value){e.next=11;break}return e.abrupt("return",cD(i.value));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());if("aborted"===n.value)return uD;var c=this._def.schema._parseSync({data:u,path:o.path,parent:o});return"aborted"===c.status?uD:"dirty"===c.status||"dirty"===n.value?cD(c.value):c}if("refinement"===a.type){var l=function(e){var t=a.refinement(e,s);if(o.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===o.common.async){var d=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return"aborted"===d.status?uD:("dirty"===d.status&&n.dirty(),l(d.value),{status:n.value,value:d.value})}return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then((function(e){return"aborted"===e.status?uD:("dirty"===e.status&&n.dirty(),l(e.value).then((function(){return{status:n.value,value:e.value}})))}))}if("transform"===a.type){if(!1===o.common.async){var f=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!hD(f))return f;var h=a.transform(f.value,s);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then((function(e){return hD(e)?Promise.resolve(a.transform(e.value,s)).then((function(e){return{status:n.value,value:e}})):e}))}AB.assertNever(a)}}]),r}(bD);pK.create=function(e,r,n){return new pK(t({schema:e,typeName:RK.ZodEffects,effect:r},wD(n)))},pK.createWithPreprocess=function(e,r,n){return new pK(t({schema:r,effect:{type:"preprocess",transform:e},typeName:RK.ZodEffects},wD(n)))};var vK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){return this._getType(e)===ZB.undefined?lD(void 0):this._def.innerType._parse(e)}},{key:"unwrap",value:function(){return this._def.innerType}}]),r}(bD);vK.create=function(e,r){return new vK(t({innerType:e,typeName:RK.ZodOptional},wD(r)))};var mK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){return this._getType(e)===ZB.null?lD(null):this._def.innerType._parse(e)}},{key:"unwrap",value:function(){return this._def.innerType}}]),r}(bD);mK.create=function(e,r){return new mK(t({innerType:e,typeName:RK.ZodNullable},wD(r)))};var yK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx,r=t.data;return t.parsedType===ZB.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}},{key:"removeDefault",value:function(){return this._def.innerType}}]),r}(bD);yK.create=function(e,r){return new yK(t({innerType:e,typeName:RK.ZodDefault,defaultValue:"function"==typeof r.default?r.default:function(){return r.default}},wD(r)))};var gK=function(e){c(n,e);var r=g(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"_parse",value:function(e){var r=this,n=this._processInputParams(e).ctx,i=t(t({},n),{},{common:t(t({},n.common),{},{issues:[]})}),o=this._def.innerType._parse({data:i.data,path:i.path,parent:t({},i)});return pD(o)?o.then((function(e){return{status:"valid",value:"valid"===e.status?e.value:r._def.catchValue({get error(){return new $B(i.common.issues)},input:i.data})}})):{status:"valid",value:"valid"===o.status?o.value:this._def.catchValue({get error(){return new $B(i.common.issues)},input:i.data})}}},{key:"removeCatch",value:function(){return this._def.innerType}}]),n}(bD);gK.create=function(e,r){return new gK(t({innerType:e,typeName:RK.ZodCatch,catchValue:"function"==typeof r.catch?r.catch:function(){return r.catch}},wD(r)))};var wK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){if(this._getType(e)!==ZB.nan){var t=this._getOrReturnCtx(e);return nD(t,{code:JB.invalid_type,expected:ZB.nan,received:t.parsedType}),uD}return{status:"valid",value:e.data}}}]),r}(bD);wK.create=function(e){return new wK(t({typeName:RK.ZodNaN},wD(e)))};var kK=Symbol("zod_brand"),bK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx,r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}},{key:"unwrap",value:function(){return this._def.type}}]),r}(bD),SK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e),n=r.status,o=r.ctx;if(o.common.async){var a=function(){var e=i(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._def.in._parseAsync({data:o.data,path:o.path,parent:o});case 2:if("aborted"!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",uD);case 5:if("dirty"!==r.status){e.next=10;break}return n.dirty(),e.abrupt("return",cD(r.value));case 10:return e.abrupt("return",t._def.out._parseAsync({data:r.value,path:o.path,parent:o}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a()}var s=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return"aborted"===s.status?uD:"dirty"===s.status?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:o.path,parent:o})}}],[{key:"create",value:function(e,t){return new r({in:e,out:t,typeName:RK.ZodPipeline})}}]),r}(bD),EK=function(e){c(r,e);var t=g(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"_parse",value:function(e){var t=this._def.innerType._parse(e);return hD(t)&&(t.value=Object.freeze(t.value)),t}},{key:"unwrap",value:function(){return this._def.innerType}}]),r}(bD);function PK(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?HD.create().superRefine((function(i,o){var a,s;if(!e(i)){var u="function"==typeof r?r(i):"string"==typeof r?{message:r}:r,c=null===(s=null!==(a=u.fatal)&&void 0!==a?a:n)||void 0===s||s,l="string"==typeof u?{message:u}:u;o.addIssue(t(t({code:"custom"},l),{},{fatal:c}))}})):HD.create()}EK.create=function(e,r){return new EK(t({innerType:e,typeName:RK.ZodReadonly},wD(r)))};var RK,CK={object:JD.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(RK||(RK={}));var IK=BD.create,AK=DD.create,TK=wK.create,xK=KD.create,_K=FD.create,NK=jD.create,OK=qD.create,MK=GD.create,LK=WD.create,UK=HD.create,BK=YD.create,DK=VD.create,KK=zD.create,FK=ZD.create,jK=JD.create,qK=JD.strictCreate,GK=$D.create,WK=eK.create,HK=rK.create,YK=nK.create,VK=iK.create,zK=oK.create,ZK=aK.create,QK=sK.create,JK=uK.create,$K=cK.create,XK=dK.create,eF=fK.create,tF=hK.create,rF=pK.create,nF=vK.create,iF=mK.create,oF=pK.createWithPreprocess,aF=SK.create,sF={string:function(e){return BD.create(t(t({},e),{},{coerce:!0}))},number:function(e){return DD.create(t(t({},e),{},{coerce:!0}))},boolean:function(e){return FD.create(t(t({},e),{},{coerce:!0}))},bigint:function(e){return KD.create(t(t({},e),{},{coerce:!0}))},date:function(e){return jD.create(t(t({},e),{},{coerce:!0}))}},uF=uD,cF=Object.freeze({__proto__:null,defaultErrorMap:XB,setErrorMap:function(e){eD=e},getErrorMap:tD,makeIssue:rD,EMPTY_PATH:[],addIssueToContext:nD,ParseStatus:sD,INVALID:uD,DIRTY:cD,OK:lD,isAborted:dD,isDirty:fD,isValid:hD,isAsync:pD,get util(){return AB},get objectUtil(){return TB},ZodParsedType:ZB,getParsedType:QB,ZodType:bD,datetimeRegex:LD,ZodString:BD,ZodNumber:DD,ZodBigInt:KD,ZodBoolean:FD,ZodDate:jD,ZodSymbol:qD,ZodUndefined:GD,ZodNull:WD,ZodAny:HD,ZodUnknown:YD,ZodNever:VD,ZodVoid:zD,ZodArray:ZD,ZodObject:JD,ZodUnion:$D,ZodDiscriminatedUnion:eK,ZodIntersection:rK,ZodTuple:nK,ZodRecord:iK,ZodMap:oK,ZodSet:aK,ZodFunction:sK,ZodLazy:uK,ZodLiteral:cK,ZodEnum:dK,ZodNativeEnum:fK,ZodPromise:hK,ZodEffects:pK,ZodTransformer:pK,ZodOptional:vK,ZodNullable:mK,ZodDefault:yK,ZodCatch:gK,ZodNaN:wK,BRAND:kK,ZodBranded:bK,ZodPipeline:SK,ZodReadonly:EK,custom:PK,Schema:bD,ZodSchema:bD,late:CK,get ZodFirstPartyTypeKind(){return RK},coerce:sF,any:UK,array:FK,bigint:xK,boolean:_K,date:NK,discriminatedUnion:WK,effect:rF,enum:XK,function:QK,instanceof:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return PK((function(t){return t instanceof e}),t)},intersection:HK,lazy:JK,literal:$K,map:zK,nan:TK,nativeEnum:eF,never:DK,null:LK,nullable:iF,number:AK,object:jK,oboolean:function(){return _K().optional()},onumber:function(){return AK().optional()},optional:nF,ostring:function(){return IK().optional()},pipeline:aF,preprocess:oF,promise:tF,record:VK,set:ZK,strictObject:qK,string:IK,symbol:OK,transformer:rF,tuple:YK,undefined:MK,union:GK,unknown:BK,void:KK,NEVER:uF,ZodIssueCode:JB,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:$B}),lF=Object.defineProperty,dF={};function fF(e,t){return cF.union([cF.object({result:cF.literal("SUCCESS"),data:e,error:cF.null()}),cF.object({result:cF.literal("ERROR"),data:cF.null(),error:cF.object({code:cF.string(),data:null!=t?t:cF.any(),message:cF.string()})})])}function hF(e){return e instanceof $B}function pF(e){return cF.object({hasMore:cF.boolean(),items:e.array(),offset:cF.number(),page:cF.number(),size:cF.number(),totalCount:cF.number()})}function vF(e){return cF.object({hasMore:cF.boolean(),items:cF.array(e),nextCursor:cF.string().nullable(),size:cF.number()})}!function(e,t){for(var r in t)lF(e,r,{get:t[r],enumerable:!0})}(dF,{SchemaError:function(){return $B},any:function(){return bF},apiResponse:function(){return fF},array:function(){return SF},bigint:function(){return EF},boolean:function(){return PF},booleanString:function(){return yF},coerce:function(){return RF},cursorBasedPagination:function(){return vF},custom:function(){return CF},date:function(){return IF},dateTimeRegex:function(){return AF},discriminatedUnion:function(){return TF},effect:function(){return xF},enum:function(){return _F},formData:function(){return kF},function:function(){return NF},instanceof:function(){return OF},intersection:function(){return MF},isSchemaError:function(){return hF},issueCode:function(){return rj},lazy:function(){return LF},literal:function(){return UF},map:function(){return BF},nan:function(){return DF},nativeEnum:function(){return KF},never:function(){return FF},null:function(){return qF},nullable:function(){return jF},number:function(){return GF},numericString:function(){return gF},object:function(){return WF},optional:function(){return HF},pagination:function(){return pF},preprocess:function(){return YF},promise:function(){return VF},record:function(){return zF},set:function(){return ZF},string:function(){return mF},symbol:function(){return QF},tuple:function(){return JF},undefined:function(){return $F},union:function(){return XF},unknown:function(){return ej},void:function(){return tj}});var mF=cF.string;function yF(){return cF.enum(["true","false"]).transform((function(e){return null!=e&&"true"===e}))}function gF(){return cF.string.apply(cF,arguments).regex(/^\d+$/)}function wF(e){return function(t){return Array.from(null!=e?e:t.keys()).reduce((function(e,r){var n=t.getAll(r).map((function(e){return e instanceof File?e:function(e){try{return JSON.parse(e)}catch(t){return e}}(e)}));return e[r]=n.length>1?n:n[0],e}),{})}}function kF(e){var t="strip"===e._def.unknownKeys?Object.keys(e.shape):void 0;return cF.instanceof(FormData).transform(wF(t)).pipe(e).transform((function(e){for(var t=new FormData,r=0,n=Object.entries(e);r<n.length;r++){var i=w(n[r],2),o=i[0],a=i[1];t.append(o,a)}return t}))}var bF=cF.any,SF=cF.array,EF=cF.bigint,PF=cF.boolean,RF=cF.coerce,CF=cF.custom,IF=cF.date,AF=cF.datetimeRegex,TF=cF.discriminatedUnion,xF=cF.effect,_F=cF.enum,NF=cF.function,OF=cF.instanceof,MF=cF.intersection,LF=cF.lazy,UF=cF.literal,BF=cF.map,DF=cF.nan,KF=cF.nativeEnum,FF=cF.never,jF=cF.nullable,qF=cF.null,GF=cF.number,WF=cF.object,HF=cF.optional,YF=cF.preprocess,VF=cF.promise,zF=cF.record,ZF=cF.set,QF=cF.symbol,JF=cF.tuple,$F=cF.undefined,XF=cF.union,ej=cF.unknown,tj=cF.void,rj=cF.ZodIssueCode;function nj(e,t){return function(r,n,i){var o=i.value;return i.value=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];try{e.parse(n[0])}catch(e){if(dF.isSchemaError(e)){var a=oj(e);throw new t(a)}}return o.apply(this,n)},i}}var ij=Object.assign({},dF.issueCode,{missing_required_parameters:"missing_required_parameters",unexpected_parameter_in_method:"unexpected_parameter_in_method"});function oj(e){var t,r,n=(t=e.issues,r=function(e){return e.code===ij.invalid_type&&"undefined"===e.received?ij.missing_required_parameters:e.code===ij.invalid_type&&"undefined"===e.expected?ij.unexpected_parameter_in_method:e.code},t.reduce((function(e,t){var n=r(t);return e[n]||(e[n]=[]),e[n].push(t),e}),{})),i=Object.keys(n)[0],o=n[i].map((function(e){return function(e){switch(e.code){case dF.issueCode.invalid_type:return e.path.findLast((function(e){return Number.isNaN(Number(e))}));case dF.issueCode.unrecognized_keys:return e.keys.join(", ");case dF.issueCode.invalid_union_discriminator:case dF.issueCode.invalid_enum_value:case dF.issueCode.invalid_literal:return e.path.findLast((function(e){return Number.isNaN(Number(e))}));default:return""}}(e)})).join(", ");switch(i){case ij.invalid_type:return"".concat(o," 파라미터의 타입이 올바르지 않습니다.");case ij.unrecognized_keys:return"".concat(o,"는 정의되지 않은 파라미터입니다.");case ij.invalid_union_discriminator:return"".concat(o," 파라미터에 사용할 수 없는 enum 값입니다.");case ij.invalid_enum_value:case ij.invalid_literal:return"".concat(o," 파라미터의 값이 올바르지 않습니다.");case ij.missing_required_parameters:return"".concat(o," 필수 파라미터가 누락되었습니다.");case ij.unexpected_parameter_in_method:return"파라미터가 없는 메서드입니다.";default:return"파라미터가 올바르지 않습니다."}}var aj,sj,uj,cj,lj,dj,fj,hj,pj,vj,mj,yj,gj,wj,kj,bj,Sj,Ej,Pj,Rj,Cj,Ij,Aj,Tj,xj,_j,Nj,Oj=dF.object({amount:dF.object({value:dF.number(),currency:dF.string()}).strict().extend({currency:dF.literal("KRW")}).strict(),orderId:dF.string(),orderName:dF.string(),customerEmail:dF.string().nullable().optional(),customerName:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),methodId:dF.string().nullable().optional(),metadata:dF.unknown(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),Mj=dF.undefined(),Lj=dF.undefined(),Uj=dF.undefined(),Bj=dF.undefined(),Dj=dF.undefined(),Kj=dF.discriminatedUnion("method",[dF.object({method:dF.literal("CARD"),card:dF.object({useEscrow:dF.boolean().nullable().optional(),taxExemptionAmount:dF.number().nullable().optional(),flowMode:dF.enum(["DIRECT","DEFAULT"]).nullable().optional(),cardCompany:dF.string().nullable().optional(),easyPay:dF.string().nullable().optional(),cardInstallmentPlan:dF.number().nullable().optional(),maxCardInstallmentPlan:dF.number().nullable().optional(),freeInstallmentPlans:dF.array(dF.object({company:dF.string(),months:dF.array(dF.number())}).strict()).nullable().optional(),useCardPoint:dF.boolean().nullable().optional(),useAppCardOnly:dF.boolean().nullable().optional(),discountCode:dF.string().nullable().optional(),validHours:dF.number().nullable().optional(),dueDate:dF.string().nullable().optional(),escrowProducts:dF.array(dF.object({id:dF.string().nullable().optional(),name:dF.string().nullable().optional(),code:dF.string().nullable().optional(),unitPrice:dF.number().nullable().optional(),quantity:dF.number().nullable().optional()}).strict()).nullable().optional(),useInternationalCardOnly:dF.boolean().nullable().optional(),appScheme:dF.string().nullable().optional()}).strict().nullable().optional(),amount:dF.object({value:dF.number(),currency:dF.string()}).strict(),orderName:dF.string(),orderId:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),dF.object({method:dF.literal("VIRTUAL_ACCOUNT"),virtualAccount:dF.object({taxExemptionAmount:dF.number().nullable().optional(),cashReceipt:dF.object({type:dF.enum(["소득공제","지출증빙","미발행"])}).strict().nullable().optional(),useEscrow:dF.boolean().nullable().optional(),escrowProducts:dF.array(dF.object({id:dF.string().nullable().optional(),name:dF.string().nullable().optional(),code:dF.string().nullable().optional(),unitPrice:dF.number().nullable().optional(),quantity:dF.number().nullable().optional()}).strict()).nullable().optional(),validHours:dF.number().nullable().optional(),dueDate:dF.string().nullable().optional()}).strict().nullable().optional(),amount:dF.object({value:dF.number(),currency:dF.string()}).strict(),orderName:dF.string(),orderId:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),dF.object({method:dF.literal("TRANSFER"),transfer:dF.object({taxExemptionAmount:dF.number().nullable().optional(),cashReceipt:dF.object({type:dF.enum(["소득공제","지출증빙","미발행"])}).strict().nullable().optional(),useEscrow:dF.boolean().nullable().optional(),escrowProducts:dF.array(dF.object({id:dF.string().nullable().optional(),name:dF.string().nullable().optional(),code:dF.string().nullable().optional(),unitPrice:dF.number().nullable().optional(),quantity:dF.number().nullable().optional()}).strict()).nullable().optional(),validHours:dF.number().nullable().optional(),dueDate:dF.string().nullable().optional()}).strict().nullable().optional(),amount:dF.object({value:dF.number(),currency:dF.string()}).strict(),orderName:dF.string(),orderId:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),dF.object({method:dF.literal("MOBILE_PHONE"),amount:dF.object({value:dF.number(),currency:dF.string()}).strict(),orderName:dF.string(),orderId:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),dF.object({method:dF.enum(["CULTURE_GIFT_CERTIFICATE","BOOK_GIFT_CERTIFICATE","GAME_GIFT_CERTIFICATE"]),amount:dF.object({value:dF.number(),currency:dF.string()}).strict(),orderName:dF.string(),orderId:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),dF.object({method:dF.literal("FOREIGN_EASY_PAY"),foreignEasyPay:dF.object({provider:dF.enum(["PAYPAL","GCASH","TOUCHNGO","BOOST","BPI","BILLEASE","DANA","ALIPAYHK","TRUEMONEY","RABBIT_LINE_PAY","ALIPAY"]),country:dF.string(),products:dF.array(dF.object({name:dF.string(),quantity:dF.number(),unitAmount:dF.number(),currency:dF.string(),description:dF.string()}).strict()).nullable().optional(),shipping:dF.object({fullName:dF.string().nullable().optional(),address:dF.object({country:dF.string(),line1:dF.string().nullable().optional(),line2:dF.string().nullable().optional(),area1:dF.string().nullable().optional(),area2:dF.string(),postalCode:dF.string().nullable().optional()}).strict().nullable().optional()}).strict().nullable().optional(),paymentMethodOptions:dF.object({paypal:dF.object({setTransactionContext:dF.unknown().optional()}).strict().nullable().optional()}).strict().nullable().optional()}).strict(),amount:dF.object({value:dF.number(),currency:dF.string()}).strict(),orderName:dF.string(),orderId:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict()]),Fj=dF.object({method:dF.literal("CARD"),successUrl:dF.string(),failUrl:dF.string(),customerName:dF.string().nullable().optional(),customerEmail:dF.string().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional()}).strict(),jj=dF.object({selector:dF.string(),variantKey:dF.string().optional()}).strict(),qj=dF.object({selector:dF.string(),variantKey:dF.string().optional()}).strict(),Gj=dF.object({orderId:dF.string(),orderName:dF.string(),customerEmail:dF.string().nullable().optional(),customerName:dF.string().nullable().optional(),customerMobilePhone:dF.string().nullable().optional(),taxFreeAmount:dF.number().nullable().optional(),windowTarget:dF.enum(["iframe","self"]).nullable().optional(),pendingUrl:dF.string().nullable().optional(),metadata:dF.unknown(),sandbox:dF.object({paymentResult:dF.enum(["SUCCESS","FAIL"])}).strict().optional(),card:dF.object({taxExemptionAmount:dF.number().nullable().optional(),appScheme:dF.string().nullable().optional()}).strict().nullable().optional(),transfer:dF.object({useEscrow:dF.boolean().nullable().optional(),escrowProducts:dF.array(dF.object({id:dF.string().nullable().optional(),name:dF.string().nullable().optional(),code:dF.string().nullable().optional(),unitPrice:dF.number().nullable().optional(),quantity:dF.number().nullable().optional()}).strict()).nullable().optional()}).strict().nullable().optional(),virtualAccount:dF.object({useEscrow:dF.boolean().nullable().optional(),escrowProducts:dF.array(dF.object({id:dF.string().nullable().optional(),name:dF.string().nullable().optional(),code:dF.string().nullable().optional(),unitPrice:dF.number().nullable().optional(),quantity:dF.number().nullable().optional()}).strict()).nullable().optional(),cashReceipt:dF.object({type:dF.enum(["소득공제","지출증빙","미발행"])}).strict().nullable().optional()}).strict().nullable().optional(),foreignEasyPay:dF.object({country:dF.string(),products:dF.array(dF.object({name:dF.string(),quantity:dF.number(),unitAmount:dF.number(),currency:dF.string(),description:dF.string()}).strict()).nullable().optional(),shipping:dF.object({fullName:dF.string().nullable().optional(),address:dF.object({country:dF.string(),line1:dF.string().nullable().optional(),line2:dF.string().nullable().optional(),area1:dF.string().nullable().optional(),area2:dF.string(),postalCode:dF.string().nullable().optional()}).strict().nullable().optional()}).strict().nullable().optional(),paymentMethodOptions:dF.object({paypal:dF.object({setTransactionContext:dF.unknown().optional()}).strict().nullable().optional()}).strict().nullable().optional()}).strict().nullable().optional(),successUrl:dF.string().nullable().optional(),failUrl:dF.string().nullable().optional()}).strict(),Wj=dF.object({value:dF.number(),currency:dF.string()}).strict(),Hj=["amount"],Yj=(aj=gU(1373474),sj=nj(Oj,sL.Errors.InvalidParametersError),uj=gU(1373466),cj=nj(Dj,sL.Errors.InvalidParametersError),lj=gU(1373464),dj=nj(Bj,sL.Errors.InvalidParametersError),fj=gU(1373468),hj=nj(Uj,sL.Errors.InvalidParametersError),pj=gU(1373472),vj=nj(Lj,sL.Errors.InvalidParametersError),mj=gU(1373470),yj=nj(Mj,sL.Errors.InvalidParametersError),gj=function(){function e(t,r,n,i){o(this,e),this.sdkConstructorParams=t,this.dependencyConfigurations=r,this.debugLogger=n,this.activationLogger=i;try{var a=this.dependencyConfigurations.BrandpayStartCustomerSessionService.execute({clientKey:new ox.ClientKey(this.sdkConstructorParams.clientKey),customerKey:new ox.CustomerKey(this.sdkConstructorParams.customerKey),redirectURL:this.sdkConstructorParams.redirectUrl,windowTarget:"iframe",gtid:this.sdkConstructorParams.gtid});this.activationLogger.setContext({deploymentId:this.sdkConstructorParams.deployVersion,phase:this.sdkConstructorParams.stage,clientKey:this.sdkConstructorParams.clientKey,customerKey:a.getCustomerKey().value,sessionId:a.getSessionId(),merchantBrowserId:a.getMerchantBrowserId(),globalTraceId:a.getGlobalTraceId()}),this.debugLogger.setGlobalTraceId(a.getGlobalTraceId()),this.debugLogger.setCustomerKey(a.getCustomerKey().value)}catch(e){throw wU(e).with(ox.InvalidClientKeyError,(function(){return new sL.Errors.InvalidClientKeyError})).with(ox.NotSupportedWidgetKeyError,(function(){return new sL.Errors.NotSupportedWidgetKeyError})).with(ox.InvalidCustomerKeyError,(function(){return new sL.Errors.InvalidCustomerKeyError})).with(ox.InsecureKeyUsageError,(function(){return new sL.Errors.InsecureKeyUsageError})).otherwise((function(){return new sL.Errors.UnknownError}))}}var r,n,a,u,c,l;return s(e,[{key:"requestPayment",value:(l=i(regeneratorRuntime.mark((function e(r){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.debugLogger.setOrderId(r.orderId),!("failUrl"in r)||void 0===r.failUrl||"successUrl"in r&&void 0!==r.successUrl){e.next=3;break}throw new sL.Errors.InvalidParametersError("successUrl이 누락되었습니다.");case 3:if(!("successUrl"in r)||void 0===r.successUrl||"failUrl"in r&&void 0!==r.failUrl){e.next=5;break}throw new sL.Errors.InvalidParametersError("failUrl이 누락되었습니다.");case 5:return e.prev=5,e.next=8,this.dependencyConfigurations.BrandpayRequestPaymentService.execute(t(t({},r),{},{amount:ox.DomesticAmount.of({value:r.amount.value})}));case 8:return n=e.sent,i=n.amount,o=v(n,Hj),vU(ox.DomesticAmount.isDomestic(i),new ox.UnknownError("브랜드페이 임에도 불구하고 amount가 DomesticAmount가 아닙니다.")),e.abrupt("return",t(t({},o),{},{amount:{value:i.value,currency:i.currency}}));case 15:throw e.prev=15,e.t0=e.catch(5),wU(e.t0).with(ox.UserCancelError,(function(){return new sL.Errors.UserCancelError})).with(ox.InvalidAmountValueError,(function(){return new sL.Errors.InvalidAmountValueError})).with(ox.BelowZeroAmountError,(function(){return new sL.Errors.BelowZeroAmountError})).with(ox.IncorrectSuccessUrlFormatError,(function(){return new sL.Errors.IncorrectSuccessUrlFormatError})).with(ox.IncorrectFailUrlFormatError,(function(){return new sL.Errors.IncorrectFailUrlFormatError})).with(ox.InvalidMetadataError,(function(){return new sL.Errors.InvalidMetadataError})).with(ox.PaymentRequestFailError,(function(e){return new sL.Errors.PaymentRequestFailError(e.message,{code:e.code,orderId:e.orderId})})).with(ox.NotRegisteredRedirectUrlError,(function(){return new sL.Errors.NotRegisteredRedirectUrlError})).with(ox.InvalidMethodTransactionError,(function(){return new sL.Errors.InvalidMethodTransactionError})).with(ox.InvalidPaymentAuthenticationRequestError,(function(e){var t=e.message;return new sL.Errors.InvalidParametersError(t)})).otherwise((function(){return new sL.Errors.UnknownError}));case 18:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return l.apply(this,arguments)})},{key:"changePassword",value:(c=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.BrandpayChangePasswordService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),wU(e.t0).with(ox.UserCancelError,(function(){return new sL.Errors.UserCancelError})).with(ox.NotRegisteredRedirectUrlError,(function(){return new sL.Errors.NotRegisteredRedirectUrlError})).with(ox.InvalidMethodTransactionError,(function(){return new sL.Errors.InvalidMethodTransactionError})).otherwise((function(){return new sL.Errors.UnknownError}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return c.apply(this,arguments)})},{key:"openSettings",value:(u=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.BrandpayChangeSettingsService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),wU(e.t0).with(ox.UserCancelError,(function(){return new sL.Errors.UserCancelError})).with(ox.NotRegisteredRedirectUrlError,(function(){return new sL.Errors.NotRegisteredRedirectUrlError})).with(ox.InvalidMethodTransactionError,(function(){return new sL.Errors.InvalidMethodTransactionError})).otherwise((function(){return new sL.Errors.UnknownError}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return u.apply(this,arguments)})},{key:"addPaymentMethod",value:(a=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.BrandpayAddPaymentMethodService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),wU(e.t0).with(ox.UserCancelError,(function(){return new sL.Errors.UserCancelError})).with(ox.NotRegisteredRedirectUrlError,(function(){return new sL.Errors.NotRegisteredRedirectUrlError})).with(ox.InvalidMethodTransactionError,(function(){return new sL.Errors.InvalidMethodTransactionError})).otherwise((function(){return new sL.Errors.UnknownError}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return a.apply(this,arguments)})},{key:"changeOneTouchPay",value:(n=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.BrandpayChangeOneTouchPaySettingsService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),wU(e.t0).with(ox.UserCancelError,(function(){return new sL.Errors.UserCancelError})).with(ox.NeedMerchantOneTouchSettingError,(function(){return new sL.Errors.NeedMerchantOneTouchSettingError})).with(ox.NotRegisteredRedirectUrlError,(function(){return new sL.Errors.NotRegisteredRedirectUrlError})).with(ox.InvalidMethodTransactionError,(function(){return new sL.Errors.InvalidMethodTransactionError})).otherwise((function(){return new sL.Errors.UnknownError}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return n.apply(this,arguments)})},{key:"isOneTouchPayEnabled",value:(r=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.BrandpayGetIsOneTouchPayEnabledService.execute();case 3:return t=e.sent,e.abrupt("return",{isEnabled:t});case 7:throw e.prev=7,e.t0=e.catch(0),wU(e.t0).with(ox.NeedAgreementWithTermsError,(function(){return new sL.Errors.NeedAgreementWithTermsError})).with(ox.NeedMerchantOneTouchSettingError,(function(){return new sL.Errors.NeedMerchantOneTouchSettingError})).with(ox.NotRegisteredRedirectUrlError,(function(){return new sL.Errors.NotRegisteredRedirectUrlError})).with(ox.InvalidMethodTransactionError,(function(){return new sL.Errors.InvalidMethodTransactionError})).otherwise((function(){return new sL.Errors.UnknownError}));case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)})},{key:"setupPassword",value:function(){throw new sL.Errors.V1MethodNotSupportedError}},{key:"setupOneTouchPay",value:function(){throw new sL.Errors.V1MethodNotSupportedError}},{key:"toggleOneTouchPay",value:function(){throw new sL.Errors.V1MethodNotSupportedError}},{key:"getPaymentMethods",value:function(){throw new sL.Errors.V1MethodNotSupportedError}},{key:"requestAgreement",value:function(){throw new sL.Errors.V1MethodNotSupportedError}}]),e}(),P(gj.prototype,"requestPayment",[aj,sj],Object.getOwnPropertyDescriptor(gj.prototype,"requestPayment"),gj.prototype),P(gj.prototype,"changePassword",[uj,cj],Object.getOwnPropertyDescriptor(gj.prototype,"changePassword"),gj.prototype),P(gj.prototype,"openSettings",[lj,dj],Object.getOwnPropertyDescriptor(gj.prototype,"openSettings"),gj.prototype),P(gj.prototype,"addPaymentMethod",[fj,hj],Object.getOwnPropertyDescriptor(gj.prototype,"addPaymentMethod"),gj.prototype),P(gj.prototype,"changeOneTouchPay",[pj,vj],Object.getOwnPropertyDescriptor(gj.prototype,"changeOneTouchPay"),gj.prototype),P(gj.prototype,"isOneTouchPayEnabled",[mj,yj],Object.getOwnPropertyDescriptor(gj.prototype,"isOneTouchPayEnabled"),gj.prototype),gj),Vj=["card"],zj=["transfer"],Zj=["virtualAccount"],Qj=["foreignEasyPay"],Jj=["method"],$j=(wj=gU(1374504),kj=nj(Kj,AL.Errors.InvalidParametersError),bj=gU(1375258),Sj=nj(Fj,AL.Errors.InvalidParametersError),Ej=function(){function e(t,r,n,i){o(this,e),this.sdkConstructorParams=t,this.dependencyConfigurations=r,this.debugLogger=n,this.activationLogger=i;try{var a=this.dependencyConfigurations.PaymentGatewayStartCustomerSessionService.execute({clientKey:new ox.ClientKey(this.sdkConstructorParams.clientKey),customerKey:new ox.CustomerKey(this.sdkConstructorParams.customerKey),gtid:this.sdkConstructorParams.gtid});this.activationLogger.setContext({deploymentId:this.sdkConstructorParams.deployVersion,phase:this.sdkConstructorParams.stage,clientKey:this.sdkConstructorParams.clientKey,customerKey:a.getCustomerKey().value,sessionId:a.getSessionId(),merchantBrowserId:a.getMerchantBrowserId(),globalTraceId:a.getGlobalTraceId()}),this.debugLogger.setGlobalTraceId(a.getGlobalTraceId()),this.debugLogger.setCustomerKey(a.getCustomerKey().value),new ox.ClientKey(this.sdkConstructorParams.clientKey).isWidgetKey()&&this.debugLogger.info("위젯키로 StandardPaymentSDK를 초기화하였습니다.")}catch(e){throw wU(e).with(ox.InvalidClientKeyError,(function(){return new AL.Errors.InvalidClientKeyError})).with(ox.InvalidCustomerKeyError,(function(){return new AL.Errors.InvalidCustomerKeyError})).with(ox.NotSupportedWidgetKeyError,(function(){return new AL.Errors.NotSupportedWidgetKeyError})).with(ox.InsecureKeyUsageError,(function(){return new AL.Errors.InsecureKeyUsageError})).otherwise((function(){return new AL.Errors.UnknownError}))}}var r,n;return s(e,[{key:"requestPayment",value:(n=i(regeneratorRuntime.mark((function e(r){var n,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.debugLogger.setOrderId(r.orderId),!("failUrl"in r)||void 0===r.failUrl||"successUrl"in r&&void 0!==r.successUrl){e.next=3;break}throw new AL.Errors.InvalidParametersError("successUrl이 누락되었습니다.");case 3:if(!("successUrl"in r)||void 0===r.successUrl||"failUrl"in r&&void 0!==r.failUrl){e.next=5;break}throw new AL.Errors.InvalidParametersError("failUrl이 누락되었습니다.");case 5:if(!("method"in r)||"CARD"!==r.method||!0!==(null===(n=r.card)||void 0===n?void 0:n.useInternationalCardOnly)||"DIRECT"!==(null===(i=r.card)||void 0===i?void 0:i.flowMode)){e.next=7;break}throw new AL.Errors.InvalidParametersError('useInternationalCardOnly: true 와 flowMode: "DIRECT" 는 함께 사용할 수 없습니다.');case 7:if("method"in r&&"FOREIGN_EASY_PAY"===r.method&&!["PAYPAL","GCASH","TOUCHNGO","BOOST","BPI","BILLEASE","DANA","ALIPAYHK","TRUEMONEY","RABBIT_LINE_PAY","ALIPAY"].includes(r.foreignEasyPay.provider)&&this.debugLogger.info("paymentRequest.foreignEasyPay.provider 파라미터의 값이 올바르지 않습니다. ".concat(r.foreignEasyPay.provider)),e.prev=8,"method"in r){e.next=13;break}throw new AL.Errors.InvalidParametersError("method가 누락되었습니다.");case 13:return o=function(){switch(r.method){case"CARD":var e=r.card,n=v(r,Vj);return t(t({},e),n);case"TRANSFER":var i=r.transfer,o=v(r,zj);return t(t({},i),o);case"VIRTUAL_ACCOUNT":var a=r.virtualAccount,s=v(r,Zj);return t(t({},a),s);case"FOREIGN_EASY_PAY":var u=r.foreignEasyPay,c=v(r,Qj);return t(t({},u),c);default:return r}}(),a=v(o,Jj),e.next=17,this.dependencyConfigurations.PaymentGatewayRequestPaymentService.execute(o.method,t(t({},a),{},{amount:ox.DomesticAmount.isDomestic(r.amount)?ox.DomesticAmount.of({value:r.amount.value}):ox.OverseasAmount.of(r.amount)}));case 17:return s=e.sent,e.abrupt("return",t(t({},s),{},{amount:{value:s.amount.value,currency:s.amount.currency}}));case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(8),wU(e.t0).with(ox.UserCancelError,(function(){return new AL.Errors.UserCancelError})).with(ox.InvalidAmountValueError,(function(){return new AL.Errors.InvalidAmountValueError})).with(ox.InvalidAmountCurrencyError,(function(){return new AL.Errors.InvalidAmountCurrencyError})).with(ox.BelowZeroAmountError,(function(){return new AL.Errors.BelowZeroAmountError})).with(ox.NotSupportedMethodError,(function(){return new AL.Errors.NotSupportedMethodError})).with(ox.IncorrectSuccessUrlFormatError,(function(){return new AL.Errors.IncorrectSuccessUrlFormatError})).with(ox.IncorrectFailUrlFormatError,(function(){return new AL.Errors.IncorrectFailUrlFormatError})).with(ox.InvalidMetadataError,(function(){return new sL.Errors.InvalidMetadataError})).with(ox.PaymentRequestFailError,(function(e){var t=e.message,r=e.orderId,n=e.code;return new AL.Errors.PaymentRequestFailError(t,{orderId:r,code:n})})).with(ox.InvalidMethodTransactionError,(function(){return new AL.Errors.InvalidMethodTransactionError})).with(ox.InvalidPaymentAuthenticationRequestError,(function(e){var t=e.message;return new AL.Errors.InvalidParametersError(t)})).with(ox.IncorrectPendingUrlFormatError,(function(){return new EM.Errors.IncorrectPendingUrlFormatError})).with(ox.MissingRequiredPendingUrlParameterError,(function(){return new EM.Errors.InvalidParametersError("pendingUrl 파라미터가 누락되었습니다.")})).with(ox.NotSupportedPromiseError,(function(e){var t=e.message;return new EM.Errors.InvalidParametersError(t)})).with(ox.SandboxParameterNotAllowedError,(function(e){var t=e.message;return new EM.Errors.InvalidParametersError(t)})).otherwise((function(){return new AL.Errors.UnknownError}));case 24:case"end":return e.stop()}}),e,this,[[8,21]])}))),function(e){return n.apply(this,arguments)})},{key:"requestBillingAuth",value:(r=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={successUrl:t.successUrl,failUrl:t.failUrl,method:t.method,customerName:t.customerName,customerEmail:t.customerEmail,windowTarget:null!==(r=t.windowTarget)&&void 0!==r?r:"iframe"},e.next=4,this.dependencyConfigurations.PaymentGatewayRequestBillingAuthService.execute({request:n});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),wU(e.t0).with(ox.UserCancelError,(function(){return new AL.Errors.UserCancelError})).with(ox.NotSupportedMethodError,(function(){return new AL.Errors.NotSupportedMethodError})).with(ox.IncorrectSuccessUrlFormatError,(function(){return new AL.Errors.IncorrectSuccessUrlFormatError})).with(ox.IncorrectFailUrlFormatError,(function(){return new AL.Errors.IncorrectFailUrlFormatError})).with(ox.InvalidMethodTransactionError,(function(){return new AL.Errors.InvalidMethodTransactionError})).otherwise((function(){return new AL.Errors.UnknownError}));case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return r.apply(this,arguments)})},{key:"cancelPayment",value:function(){throw new AL.Errors.V1MethodNotSupportedError}}]),e}(),P(Ej.prototype,"requestPayment",[wj,kj],Object.getOwnPropertyDescriptor(Ej.prototype,"requestPayment"),Ej.prototype),P(Ej.prototype,"requestBillingAuth",[bj,Sj],Object.getOwnPropertyDescriptor(Ej.prototype,"requestBillingAuth"),Ej.prototype),Ej),Xj=["card","transfer","virtualAccount","foreignEasyPay"],eq=(Pj=gU(1374312),Rj=nj(Wj,EM.Errors.InvalidParametersError),Cj=gU(1374358),Ij=nj(jj,EM.Errors.InvalidParametersError),Aj=gU(1374498),Tj=nj(Gj,EM.Errors.InvalidParametersError),xj=gU(1374490),_j=nj(qj,EM.Errors.InvalidParametersError),Nj=function(){function e(t,r,n,i){o(this,e),this.sdkConstructorParams=t,this.dependencyConfigurations=r,this.debugLogger=n,this.activationLogger=i;try{var a;this.checkout=new ox.WidgetCheckout,this.widgets={paymentMethodsWidget:null,agreementWidget:null};var s=this.dependencyConfigurations.PaymentWidgetStartCustomerSessionService.execute({clientKey:new ox.ClientKey(this.sdkConstructorParams.clientKey),customerKey:new ox.CustomerKey(this.sdkConstructorParams.customerKey),brandpay:{redirectUrl:null===(a=this.sdkConstructorParams.brandpay)||void 0===a?void 0:a.redirectUrl},gtid:this.sdkConstructorParams.gtid});this.activationLogger.setContext({deploymentId:this.sdkConstructorParams.deployVersion,phase:this.sdkConstructorParams.stage,clientKey:this.sdkConstructorParams.clientKey,customerKey:s.getCustomerKey().value,sessionId:s.getSessionId(),merchantBrowserId:s.getMerchantBrowserId(),globalTraceId:s.getGlobalTraceId()}),this.debugLogger.setGlobalTraceId(s.getGlobalTraceId()),this.debugLogger.setCustomerKey(s.getCustomerKey().value)}catch(e){throw wU(e).with(ox.InvalidClientKeyError,(function(){return new EM.Errors.InvalidClientKeyError})).with(ox.NotSupportedAPIIndividualKeyError,(function(){return new EM.Errors.NotSupportedAPIIndividualKeyError})).with(ox.InvalidCustomerKeyError,(function(){return new EM.Errors.InvalidCustomerKeyError})).with(ox.InsecureKeyUsageError,(function(){return new EM.Errors.InsecureKeyUsageError})).otherwise((function(){return new EM.Errors.UnknownError}))}}var r,n,a,u;return s(e,[{key:"setAmount",value:(u=i(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=ox.DomesticAmount.isDomestic(t)?ox.DomesticAmount.of(t):ox.OverseasAmount.of(t),e.next=4,this.dependencyConfigurations.PaymentWidgetUpdateAmountService.execute(this.checkout,r);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),wU(e.t0).with(ox.InvalidAmountValueError,(function(){return new EM.Errors.InvalidAmountValueError})).with(ox.InvalidAmountCurrencyError,(function(){return new EM.Errors.InvalidAmountCurrencyError})).with(ox.BelowZeroAmountError,(function(){return new EM.Errors.BelowZeroAmountError})).otherwise((function(){return new EM.Errors.UnknownError}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return u.apply(this,arguments)})},{key:"renderPaymentMethods",value:(a=i(regeneratorRuntime.mark((function e(t){var r,n,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.selector,n=t.variantKey,e.prev=1,null==this.widgets.paymentMethodsWidget){e.next=4;break}throw new ox.AlreadyWidgetRenderedError;case 4:return this.widgets.paymentMethodsWidget=tq,e.next=7,this.dependencyConfigurations.PaymentWidgetRenderPaymentMethods.execute({selector:r,variantKey:n,checkout:this.checkout});case 7:return o=e.sent,this.checkout.addSubscriber(o),this.widgets.paymentMethodsWidget=o,e.abrupt("return",{getSelectedPaymentMethod:this.activationLogger.wrap(1374484,i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.getSelectedPaymentMethod();case 3:if("OPENBANKING"!==(t=e.sent).code){e.next=6;break}return e.abrupt("return",{code:"TOSS_PAYMENTS"});case 6:if("BRANDPAY"!==t.code){e.next=8;break}return e.abrupt("return",{code:"BRANDPAY",methodId:t.methodId});case 8:return e.abrupt("return",{code:t.code});case 11:throw e.prev=11,e.t0=e.catch(0),wU(e.t0).otherwise((function(){return new EM.Errors.UnknownError}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))),on:function(){var e=i(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,"paymentMethodSelect"===t&&o.on(t,(function(e){"BRANDPAY"===e.code?r({code:e.code,methodId:e.methodId}):r({code:e.code})})),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),wU(e.t0).with(ox.InvalidEventParameterError,(function(){return new EM.Errors.InvalidEventParameterError})).with(ox.InvalidCallbackParameterError,(function(){return new EM.Errors.InvalidCallbackParameterError})).otherwise((function(){return new EM.Errors.UnknownError}));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,r){return e.apply(this,arguments)}}(),destroy:this.activationLogger.wrap(1374486,i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.destroy();case 3:a.widgets.paymentMethodsWidget=null,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),wU(e.t0).otherwise((function(){return new EM.Errors.UnknownError}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))))});case 13:throw e.prev=13,e.t0=e.catch(1),this.widgets.paymentMethodsWidget===tq&&(this.widgets.paymentMethodsWidget=null),wU(e.t0).with(ox.UserCancelError,(function(){return new EM.Errors.UserCancelError})).with(ox.AlreadyWidgetRenderedError,(function(){return new EM.Errors.PaymentMethodsWidgetAlreadyRenderedError})).with(ox.NotSetupAmountError,(function(){return new EM.Errors.NotSetupAmountError})).with(ox.InvalidSelectorError,(function(){return new EM.Errors.InvalidSelectorError})).with(ox.InvalidVariantKeyError,(function(){return new EM.Errors.InvalidVariantKeyError})).with(ox.InvalidMethodTransactionError,(function(){return new EM.Errors.InvalidMethodTransactionError})).otherwise((function(){return new EM.Errors.UnknownError}));case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return a.apply(this,arguments)})},{key:"requestPayment",value:(n=i(regeneratorRuntime.mark((function e(r){var n,i,o,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.debugLogger.setOrderId(r.orderId),null!=(n=this.widgets.paymentMethodsWidget)){e.next=4;break}throw new EM.Errors.NotSelectedPaymentMethodError;case 4:if(!("failUrl"in r)||void 0===r.failUrl||"successUrl"in r&&void 0!==r.successUrl){e.next=6;break}throw new EM.Errors.InvalidParametersError("successUrl이 누락되었습니다.");case 6:if(!("successUrl"in r)||void 0===r.successUrl||"failUrl"in r&&void 0!==r.failUrl){e.next=8;break}throw new EM.Errors.InvalidParametersError("failUrl이 누락되었습니다.");case 8:return e.next=10,this.checkout.getAmount();case 10:if(null!=(i=e.sent)){e.next=13;break}throw new EM.Errors.NotSetupAmountError;case 13:return e.prev=13,a=r.card,s=r.transfer,u=r.virtualAccount,c=r.foreignEasyPay,l=v(r,Xj),d=t(t(t(t(t({},a),s),u),c),l),e.next=18,this.dependencyConfigurations.PaymentWidgetRequestPaymentService.execute(d,i,{paymentMethodsWidget:n,agreementWidget:null!==(o=this.widgets.agreementWidget)&&void 0!==o?o:void 0});case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(13),wU(e.t0).with(ox.InvalidAmountCurrencyError,(function(){return new EM.Errors.InvalidAmountCurrencyError})).with(ox.UserCancelError,(function(){return new EM.Errors.UserCancelError})).with(ox.NotSelectedPaymentMethodError,(function(){return new EM.Errors.NotSelectedPaymentMethodError})).with(ox.BelowZeroAmountError,(function(){return new EM.Errors.BelowZeroAmountError})).with(ox.ProviderStatusUnhealthyError,(function(){return new EM.Errors.ProviderStatusUnhealthyError})).with(ox.NeedAgreementWithRequiredTermsError,(function(){return new EM.Errors.NeedAgreementWithRequiredTermsError})).with(ox.NeedCardPaymentDetailError,(function(){return new EM.Errors.NeedCardPaymentDetailError})).with(ox.NeedRefundAccountDetailError,(function(){return new EM.Errors.NeedRefundAccountDetailError})).with(ox.ExceedDepositAmountLimitError,(function(){return new EM.Errors.ExceedDepositAmountLimitError})).with(ox.ExceedMaxDueDateError,(function(){return new EM.Errors.ExceedMaxDueDateError})).with(ox.UnsupportedTestPhasePaymentMethodError,(function(){return new EM.Errors.UnsupportedTestPhasePaymentMethodError})).with(ox.IncorrectSuccessUrlFormatError,(function(){return new EM.Errors.IncorrectSuccessUrlFormatError})).with(ox.IncorrectFailUrlFormatError,(function(){return new EM.Errors.IncorrectFailUrlFormatError})).with(ox.InvalidMetadataError,(function(){return new EM.Errors.InvalidMetadataError})).with(ox.PaymentRequestFailError,(function(e){var t=e.message,r=e.orderId,n=e.code;return new EM.Errors.PaymentRequestFailError(t,{orderId:r,code:n})})).with(ox.CustomPaymentMethodUnableToPayError,(function(){return new EM.Errors.CustomPaymentMethodUnableToPayError})).with(ox.NotSupportedPromiseError,(function(){return new EM.Errors.NotSupportedPromiseError})).with(ox.InvalidMethodTransactionError,(function(){return new EM.Errors.InvalidMethodTransactionError})).with(ox.InvalidPaymentAuthenticationRequestError,(function(e){var t=e.message;return new EM.Errors.InvalidParametersError(t)})).with(ox.IncorrectPendingUrlFormatError,(function(){return new EM.Errors.IncorrectPendingUrlFormatError})).with(ox.MissingRequiredPendingUrlParameterError,(function(){return new EM.Errors.InvalidParametersError("pendingUrl 파라미터가 누락되었습니다.")})).with(ox.SandboxParameterNotAllowedError,(function(e){var t=e.message;return new EM.Errors.InvalidParametersError(t)})).otherwise((function(){return new EM.Errors.UnknownError}));case 24:case"end":return e.stop()}}),e,this,[[13,21]])}))),function(e){return n.apply(this,arguments)})},{key:"renderAgreement",value:(r=i(regeneratorRuntime.mark((function e(t){var r,n,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.selector,n=t.variantKey,null==this.widgets.agreementWidget){e.next=3;break}throw new EM.Errors.AgreementWidgetAlreadyRenderedError;case 3:return e.prev=3,this.widgets.agreementWidget=tq,e.next=7,this.dependencyConfigurations.PaymentWidgetRenderAgreementService.execute({selector:r,variantKey:n});case 7:return o=e.sent,this.widgets.agreementWidget=o,e.abrupt("return",{on:function(){var e=i(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.on(t,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),wU(e.t0).with(ox.InvalidEventParameterError,(function(){return new EM.Errors.InvalidEventParameterError})).with(ox.InvalidCallbackParameterError,(function(){return new EM.Errors.InvalidCallbackParameterError})).otherwise((function(){return new EM.Errors.UnknownError}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),destroy:this.activationLogger.wrap(1374492,i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.destroy();case 2:a.widgets.agreementWidget=null;case 3:case"end":return e.stop()}}),e)}))))});case 12:throw e.prev=12,e.t0=e.catch(3),this.widgets.agreementWidget===tq&&(this.widgets.agreementWidget=null),wU(e.t0).with(ox.UserCancelError,(function(){return new EM.Errors.UserCancelError})).with(ox.AlreadyWidgetRenderedError,(function(){return new EM.Errors.AgreementWidgetAlreadyRenderedError})).with(ox.InvalidSelectorError,(function(){return new EM.Errors.InvalidSelectorError})).with(ox.InvalidVariantKeyError,(function(){return new EM.Errors.InvalidVariantKeyError})).with(ox.InvalidMethodTransactionError,(function(){return new EM.Errors.InvalidMethodTransactionError})).otherwise((function(){return new EM.Errors.UnknownError}));case 16:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(e){return r.apply(this,arguments)})},{key:"updateAmount",value:function(){throw new EM.Errors.V1MethodNotSupportedError}}]),e}(),P(Nj.prototype,"setAmount",[Pj,Rj],Object.getOwnPropertyDescriptor(Nj.prototype,"setAmount"),Nj.prototype),P(Nj.prototype,"renderPaymentMethods",[Cj,Ij],Object.getOwnPropertyDescriptor(Nj.prototype,"renderPaymentMethods"),Nj.prototype),P(Nj.prototype,"requestPayment",[Aj,Tj],Object.getOwnPropertyDescriptor(Nj.prototype,"requestPayment"),Nj.prototype),P(Nj.prototype,"renderAgreement",[xj,_j],Object.getOwnPropertyDescriptor(Nj.prototype,"renderAgreement"),Nj.prototype),Nj),tq="DRAFT",rq=["error"],nq=function(){function e(t){o(this,e),u(this,"context",{}),this.transport=t}return s(e,[{key:"setContext",value:function(e){this.context=e}},{key:"request",value:function(e,t){this.send(e,t)}},{key:"start",value:function(e,r){this.send(e,t(t({},r),{},{status:"START"}))}},{key:"fail",value:function(e,n){var i=n.error,o=v(n,rq);this.send(e,t(t({},o),{},{status:"FAIL",error:"object"===r(i)&&null!=i?{code:sq(i),message:uq(i)}:{}}))}},{key:"success",value:function(e,r){this.send(e,t(t({},r),{},{status:"SUCCESS"}))}},{key:"send",value:function(e,r){var n=this.getDefaultLogParams(),i=this.formatLogConvention(t(t(t({},n),this.context),r));this.transport.send({schemaId:e,params:i}).catch(oq)}},{key:"wrap",value:function(e,t){var r=this;return new Proxy(t,{apply:function(t,n,i){var o=i[0];r.start(e,{params:o});try{var a=Reflect.apply(t,n,i);return a instanceof Promise?a.then((function(t){return r.success(e,{params:o}),t})).catch((function(t){throw r.fail(e,{params:o,error:t}),t})):(r.success(e),a)}catch(t){throw r.fail(e,{error:t}),t}}})}},{key:"formatLogConvention",value:function(e){return function(e){return Object.keys(e).reduce((function(r,n){var i=e[n],o=Array.isArray(i)?n+"_list":n;return t(t({},r),{},u({},o,i))}),{})}(aq(function(e){return Object.entries(e).reduce((function(e,r){var n,i=w(r,2),o=i[0],a=i[1];return null==a||(null==(n=a)||0===Object.keys(n).length&&n.constructor===Object)||function(e){return null==e||Array.isArray(e)&&0===e.length}(a)?t(t({},e),{},u({},o,"")):t(t({},e),{},u({},o,"boolean"==typeof a?a?"1":"0":a))}),{})}((r=e,Object.keys(r).reduce((function(e,n){var i=r[n];return t(t({},e),{},"phase"===n?{phase:"alpha"===i?"dev":"beta"===i?"staging":"v2"===i?"live":"unknown"}:u({},n,i))}),{})))));var r}},{key:"getDefaultLogParams",value:function(){var e,t,r,n,i,o,a,s,u;return{referrer:null!==(e=null===(t=iq())||void 0===t||null===(r=t.location)||void 0===r?void 0:r.href)&&void 0!==e?e:null,uri:null!==(n=null===(i=iq())||void 0===i||null===(o=i.location)||void 0===o?void 0:o.href)&&void 0!==n?n:null,timestamp:(a=Date.now(),s=6e4*(new Date).getTimezoneOffset(),u=a instanceof Date?a.getTime():a,new Date(u-s).toISOString().slice(0,-1)),highResTimestamp:(performance.timeOrigin+performance.now()).toFixed(3)}}}],[{key:"of",value:function(t){return new e(t.transport)}}]),e}();function iq(){return"undefined"!=typeof window?window:null}function oq(){}function aq(e){return Object.keys(e).reduce((function(n,i){var o=e[i],a=i.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}));return t(t({},n),{},u({},a,null==o||"object"!==r(o)||Array.isArray(o)?o:aq(o)))}),{})}function sq(e){return"code"in e&&"string"==typeof e.code&&!yU(e.code)?e.code:"UNKNOWN"}function uq(e){return"message"in e&&"string"==typeof e.message&&!yU(e.message)?e.message:null}var cq=function(){function e(){o(this,e)}var t;return s(e,[{key:"send",value:(t=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.schemaId,n=t.params,console.groupCollapsed("%c[LOG]%cschema_id: ".concat(r),"color: white; font-weight: normal; background-color: #47556c; padding: 2px;","color: white; font-weight: normal; background-color: #64ad0d; padding: 2px;"),console.table(n),console.groupEnd();case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),lq=["referrer","deploymentsId","globalTraceId","sessionId","merchantBrowserId"],dq=function(){function e(t){o(this,e),this.url="v2"===t?"https://event.tosspayments.com/api/v1/logs":"beta"===t?"https://event-staging.tosspayments.com/api/v1/logs":"https://event-dev.tosspayments.com/api/v1/logs"}var r;return s(e,[{key:"send",value:(r=i(regeneratorRuntime.mark((function e(r){var n,i,o,a,s,u,c,l,d,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.schemaId,i=r.params,a=(o=null!=i?i:{}).referrer,s=o.deploymentsId,u=o.globalTraceId,c=o.sessionId,l=o.merchantBrowserId,d=v(o,lq),f={"x-tosspayments-referrer":null!=a?a:null,"x-client-deployments-id":null!=s?s:null,"x-tosspayments-global-trace-id":null!=u?u:null,"x-tosspayments-session-id":null!=c?c:null,"x-tosspayments-merchant-browser-id":null!=l?l:null},h=t({schema_id:n},d),e.next=6,fq("POST",this.url,{headers:f,body:h});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),e}();function fq(e,t,r){return new Promise((function(n,i){var o,a,s,u=new XMLHttpRequest;u.open(e,t,!0),u.withCredentials=null!==(o=null==r?void 0:r.credentials)&&void 0!==o&&o,null==(null==r||null===(a=r.headers)||void 0===a?void 0:a["Content-Type"])&&u.setRequestHeader("Content-Type","application/json"),null!=(null==r?void 0:r.timeout)&&(u.timeout=r.timeout),Object.keys(null!==(s=null==r?void 0:r.headers)&&void 0!==s?s:{}).forEach((function(e){u.setRequestHeader(e,r.headers[e])})),"GET"===e?u.send():u.send(JSON.stringify(null==r?void 0:r.body)),u.addEventListener("error",(function(e){i(e)})),u.addEventListener("timeout",(function(e){i(e)})),u.addEventListener("load",(function(){if(u.status>=400)return i(new Error(u.responseText));n(function(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}(u.response))}))}))}var hq="sandbox",pq="staging",vq="dev",mq=Object.defineProperty,yq=Object.defineProperties,gq=Object.getOwnPropertyDescriptors,wq=Object.getOwnPropertySymbols,kq=Object.prototype.hasOwnProperty,bq=Object.prototype.propertyIsEnumerable,Sq=function(e,t,r){return t in e?mq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Eq=function(e,t){for(var r in t||(t={}))kq.call(t,r)&&Sq(e,r,t[r]);if(wq){var n,i=E(wq(t));try{for(i.s();!(n=i.n()).done;){r=n.value;bq.call(t,r)&&Sq(e,r,t[r])}}catch(e){i.e(e)}finally{i.f()}}return e},Pq=function(e,t){return yq(e,gq(t))},Rq=function(e,t,r){return new Promise((function(n,i){var o=function(e){try{s(r.next(e))}catch(e){i(e)}},a=function(e){try{s(r.throw(e))}catch(e){i(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(o,a)};s((r=r.apply(e,t)).next())}))};function Cq(e){return function(t){return(null==t?void 0:t.toLowerCase())===e}}var Iq=Cq(hq),Aq=Cq(pq),Tq=Cq(vq),xq=Cq("test"),_q=Cq("local");function Nq(e){return Object.keys(e).reduce((function(t,r){return Pq(Eq({},t),u({},r,function(e){if("string"==typeof e)return e;if("number"==typeof e)return"".concat(e);return JSON.stringify(e)}(e[r])))}),{})}var Oq=function(){function e(t,r){o(this,e),this.phase=t,this.internal=r}return s(e,[{key:"requestLog",value:function(e){return Rq(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.internal?Lq(this.phase):Mq(this.phase),"/v1/log"),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"log=".concat(Uq(JSON.stringify(Nq(e))))});case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t,this)})))}}]),e}();function Mq(e){return Tq(e)?"https://log-dev.tosspayments.com":Aq(e)?"https://log-staging.tosspayments.com":Iq(e)?"https://log-sandbox.tosspayments.com":"https://log.tosspayments.com"}function Lq(e){return Tq(e)?"https://log.dev.rnd-tosspayments.bz":Aq(e)?"https://log.staging.tosspayments.bz":Iq(e)?"https://log.sandbox.tosspayments.bz":"https://log.live.tosspayments.bz"}function Uq(e){try{return encodeURIComponent(e)}catch(e){return"encode fail"}}var Bq=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.options={debug:null!=(t=r.debug)&&t}}return s(e,[{key:"init",value:function(e){}},{key:"updateContext",value:function(e){}},{key:"log",value:function(e){return this.options.debug&&console.log("[HappyLogger:DebugMode] ",e),Promise.resolve()}},{key:"info",value:function(e){return this.log(e)}},{key:"error",value:function(e){return this.log(e)}},{key:"warn",value:function(e){return this.log(e)}}]),e}(),Dq=function(){function e(t,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.logClient=t,this.deviceNameParser=r,this.context={},this.options={debug:null!=(n=i.debug)&&n}}return s(e,[{key:"init",value:function(e){this.context=e,null!=this.context&&null==this.context.deviceName&&(this.context.deviceName=this.deviceNameParser.parse())}},{key:"updateContext",value:function(e){this.context=Eq(Eq({},this.context),e)}},{key:"log",value:function(e){return Rq(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Pq(Eq(Eq({},this.context),e),{eventTimestamp:(i=null!=(r=e.eventTimeStamp)?r:Date.now(),o=void 0,a=void 0,o=6e4*(new Date).getTimezoneOffset(),a=i instanceof Date?i.getTime():i,new Date(a-o).toISOString().slice(0,-1))}),this.options.debug&&console.log("[HappyLogger:DebugMode] ",n),t.next=5,this.logClient.requestLog(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.options.debug&&console.log("[HappyLogger:DebugMode] fail to send log",t.t0);case 10:return t.abrupt("return");case 11:case"end":return t.stop()}var i,o,a}),t,this,[[0,7]])})))}},{key:"info",value:function(e){return Rq(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(Eq({level:"info"},e)));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"error",value:function(e){return Rq(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(Eq({level:"error"},e)));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"warn",value:function(e){return Rq(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(Eq({level:"warn"},e)));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}();var Kq=function(){function e(){o(this,e)}return s(e,[{key:"parse",value:function(){return"node"}}]),e}(),Fq="PCChrome",jq="PCSafari",qq="MobileChrome",Gq="MobileSafari",Wq="AndroidWebView",Hq="iOSWebView",Yq="unknown";function Vq(e){var t=e.userAgentString.toLowerCase(),r=Yq,n=Yq;return/mobile/i.test(t)?/android/i.test(t)?t.includes(" wv")?(r=Wq,n=Zq(t)):t.includes("chrome")&&(r=qq,n=Zq(t)):/iphone|ipad|ipod/i.test(t)&&(e.isSafariWebview?(r=Hq,n=Qq(t)):t.includes("crios")?(r=qq,n=function(e){return zq(e,/crios\/(\d+)/)}(t)):t.includes("safari")&&(r=Gq,n=Qq(t))):t.includes("chrome")?(r=Fq,n=Zq(t)):t.includes("safari")&&!t.includes("chrome")&&(r=jq,n=Qq(t)),{type:r,version:n}}function zq(e,t){var r=e.match(t);return r?r[1]:Yq}function Zq(e){return zq(e,/chrome\/(\d+)/)}function Qq(e){return zq(e,/version\/(\d+)/)}var Jq=function(){function e(){o(this,e)}return s(e,[{key:"parse",value:function(){var e,t;try{var r=null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent;if(null==r)return"".concat(Yq," - emptyUserAgent");var n=Vq({userAgentString:r,isSafariWebview:null!=(null==(t=window.webkit)?void 0:t.messageHandlers)}),i=n.type,o=n.version;return"".concat(i," - ").concat(o)}catch(e){return"".concat(Yq," - ").concat(null==e?void 0:e.message)}}}]),e}();function $q(e){var t=e.phase,r=e.debug,n=e.internal,i=void 0!==n&&n;if(xq(t)||_q(t))return new Bq({debug:r});try{return new Dq(new Oq(t,i),null==window?new Kq:new Jq,{debug:r})}catch(e){return new Bq({debug:r})}}var Xq=["tag"],eG=["tag"],tG=["tag"],rG=["tag"],nG=["tag"],iG=function(){function e(t,r){var n=this;o(this,e),u(this,"infoLogQueue",[]),u(this,"performanceTracker",new aG),this.logger=t,this.flushInterval=r,setInterval((function(){n.flush()}),this.flushInterval)}return s(e,[{key:"startTransaction",value:function(e,t,r,n){var i=null!=r?r:{},o=i.tag,a=v(i,Xq);this.performanceTracker.start(e),this.logger.info({message:t,tag:o,context:null!=r?oG(a):void 0,transaction:e,eventTimeStamp:n}).catch(mU)}},{key:"successTransaction",value:function(e,t,r){var n=null!=r?r:{},i=n.tag,o=v(n,eG);this.logger.info({message:t,tag:i,context:null!=r?oG(o):void 0,transaction:e}).catch(mU)}},{key:"failureTransaction",value:function(e,t,r){var n=null!=r?r:{},i=n.tag,o=v(n,tG);this.logger.error({message:t,tag:i,context:null!=r?oG(o):void 0,transaction:e}).catch(mU)}},{key:"endTransaction",value:function(e,t,r,n){var i=null!=r?r:{},o=i.tag,a=v(i,rG),s=this.performanceTracker.end(e);this.logger.info({message:t,tag:o,context:null!=r?oG(a):void 0,transaction:e,processingTime:s,eventTimeStamp:n}).catch(mU),this.flush()}},{key:"error",value:function(e,t){var r=null!=t?t:{},n=r.tag,i=v(r,nG);this.logger.error({message:e,tag:n,context:null!=t?oG(i):void 0}).catch(mU),this.flush()}},{key:"info",value:function(e,t){var r,n,i,o,a,s,u,c;this.infoLogQueue.push("".concat((r=function(e){return e.toString().padStart(2,"0")},n=new Date,i=n.getFullYear().toString().slice(-2),o=r(n.getMonth()+1),a=r(n.getDate()),s=r(n.getHours()),u=r(n.getMinutes()),c=r(n.getSeconds()),"".concat(i,"-").concat(o,"-").concat(a,"T").concat(s,":").concat(u,":").concat(c)),": ").concat(e,": ").concat(oG(t)))}},{key:"flush",value:function(){if(0!==this.infoLogQueue.length){var e=this.infoLogQueue.join("|||");this.infoLogQueue=[],this.logger.info({message:e}).catch(mU)}}}],[{key:"of",value:function(t){var r;return new e(t.logger,null!==(r=t.flushInterval)&&void 0!==r?r:5e3)}}]),e}();function oG(e){try{return JSON.stringify(e)}catch(e){return"Fail to serialize"}}var aG=function(){function e(){o(this,e),u(this,"transactionStartRecord",new Map)}return s(e,[{key:"start",value:function(e){this.transactionStartRecord.set(e,new Date)}},{key:"end",value:function(e){var t=this.transactionStartRecord.get(e);return null==t?0:(new Date).getTime()-t.getTime()}}]),e}(),sG=function(){function e(t,r,n,i,a){o(this,e),this.stage=t,this.version=r,this.uri=n,this.sdkName=i,this.happyLoggerInstance=$q({phase:this.stage}),this.happyLoggerInstance.init({service:"".concat(this.sdkName,"-js-sdk"),deployVersion:this.version,uri:this.uri,globalTraceId:a}),this.sendStrategy=iG.of({logger:this.happyLoggerInstance})}return s(e,[{key:"startTransaction",value:function(e,t,r,n){this.sendStrategy.startTransaction(e,t,r,n)}},{key:"successTransaction",value:function(e,t,r){this.sendStrategy.successTransaction(e,t,r)}},{key:"failureTransaction",value:function(e,t,r){this.sendStrategy.failureTransaction(e,t,r)}},{key:"endTransaction",value:function(e,t,r,n){this.sendStrategy.endTransaction(e,t,r,n)}},{key:"info",value:function(e,t){this.sendStrategy.info(e,t)}},{key:"error",value:function(e,t){this.sendStrategy.error(e,t)}},{key:"setClientKey",value:function(e){this.happyLoggerInstance.updateContext({clientKey:e})}},{key:"setTraceId",value:function(e){this.happyLoggerInstance.updateContext({traceId:e})}},{key:"setGlobalTraceId",value:function(e){this.happyLoggerInstance.updateContext({globalTraceId:e})}},{key:"setCustomerKey",value:function(e){this.happyLoggerInstance.updateContext({customerKey:e})}},{key:"setOrderId",value:function(e){this.happyLoggerInstance.updateContext({orderId:e})}}]),e}(),uG=function(){function e(){o(this,e)}return s(e,[{key:"startTransaction",value:function(e,t,r){}},{key:"successTransaction",value:function(e,t,r){}},{key:"failureTransaction",value:function(e,t,r){}},{key:"endTransaction",value:function(e,t,r){}},{key:"info",value:function(e,t){}},{key:"error",value:function(e,t){}},{key:"setClientKey",value:function(e){}},{key:"setTraceId",value:function(e){}},{key:"setGlobalTraceId",value:function(e){}},{key:"setCustomerKey",value:function(e){}},{key:"setOrderId",value:function(e){}}]),e}(),cG=function(){function e(t,r,n,i,a){o(this,e),u(this,"context",{}),this.stage=t,this.version=r,this.uri=n,this.sdkName=i,this.setGlobalTraceId(a)}return s(e,[{key:"startTransaction",value:function(e,t,r){this.printLog("START TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"successTransaction",value:function(e,t,r){this.printLog("SUCCESS TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"failureTransaction",value:function(e,t,r){this.printLog("FAILURE TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"endTransaction",value:function(e,t,r){this.printLog("END TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"info",value:function(e,t){this.printLog("INFO LOG",e,t)}},{key:"error",value:function(e,t){this.printLog("ERROR LOG",e,t)}},{key:"setClientKey",value:function(e){this.context.clientKey=e}},{key:"setTraceId",value:function(e){this.context.traceId=e}},{key:"setGlobalTraceId",value:function(e){this.context.globalTraceId=e}},{key:"setCustomerKey",value:function(e){this.context.customerKey=e}},{key:"setOrderId",value:function(e){this.context.orderId=e}},{key:"printLog",value:function(e,t,r){console.groupCollapsed("%c[LOG: ".concat(e,"]%c: ").concat(t),"color: white; font-weight: normal; background-color: #47556c; padding: 2px;","color: white; font-weight: normal; background-color: #64ad0d; padding: 2px;"),console.table(r),console.table({stage:this.stage,version:this.version,uri:this.uri,sdkName:this.sdkName}),console.table(this.context),console.groupEnd()}}]),e}();var lG,dG,fG,hG,pG=dF.object({customerKey:dF.string(),redirectUrl:dF.string().nullish(),gtid:dF.string().nullish()}).strict(),vG=dF.object({customerKey:dF.string(),gtid:dF.string().nullish()}).strict(),mG=dF.object({customerKey:dF.string(),brandpay:dF.object({redirectUrl:dF.string().nullish()}).strict().optional().nullable(),gtid:dF.string().nullish()}).strict(),yG="23e335600543dc7e4954d8027a90077acec38fef",gG=yG.slice(0,7);function wG(e){var t,r,n,i,o,a,s,u,c,l=(o="".concat((i=new Date).getFullYear()).substring(2,4),a="".concat(i.getMonth()+1).padStart(2,"0"),s="".concat(i.getDate()).padStart(2,"0"),"".concat("a").concat(o).concat(a).concat(s).concat(JL())),d=function(e){try{return e.isActiveDebugLogger?new sG(e.stage,e.version,e.uri,e.sdkName,e.gtid):new cG(e.stage,e.version,e.uri,e.sdkName,e.gtid)}catch(e){return new uG}}({isActiveDebugLogger:null!==!0,stage:"live",version:yG,userAgent:null===(t=window)||void 0===t||null===(r=t.navigator)||void 0===r?void 0:r.userAgent,uri:null===(n=location)||void 0===n?void 0:n.href,sdkName:"standard",gtid:l}),f=(u={stage:"v2"}.stage,c=["v2","beta"].includes(u)?new dq(u):new cq,new nq(c));d.setClientKey(e);var h=window.__SDK_LOAD_START_TIME__,p=window.__SDK_LOAD_END_TIME__;d.info(JSON.stringify({startTime:h,endTime:p,processingTime:null!=h&&null!=p?p.getTime()-h.getTime():void 0}),{transaction:"SDK Load"});var v=new Date;try{var m=new kG(d,f).create({clientKey:e,activeDebugLog:!0,deployVersion:"23e335600543dc7e4954d8027a90077acec38fef",stage:"v2",sdkName:"standard",debugLoggerTransport:d,domainLoggerTransport:f,compileConfig:{brandpay:{serverOrigin:"https://api.tosspayments.com"},paymentWidget:{serverOrigin:"https://api.tosspayments.com"},paymentGateway:{serverOrigin:"https://apigw.tosspayments.com",sandboxServerOrigin:"https://apigw-sandbox.tosspayments.com"}},gtid:l}),y=new Date;return d.info(JSON.stringify({startTime:v,endTime:y,processingTime:y.getTime()-v.getTime()}),{transaction:"SDK Init Success"}),m}catch(e){var g=new Date;throw d.error(JSON.stringify({startTime:v,endTime:g,processingTime:g.getTime()-v.getTime(),errorName:null==e?void 0:e.name,errorMessage:null==e?void 0:e.message,errorStack:null==e?void 0:e.stack}),{transaction:"SDK Init Fail"}),e}}if(wG.version="v2.".concat(gG),wG.isV2=!0,wG.ANONYMOUS="@@ANONYMOUS",null!=window.TossPayments&&!window.TossPayments.isV2||null!=window.PaymentWidget||null!=window.Brandpay)throw new QL;window.NewTossPayments=window.TossPayments=wG;var kG=function(e){c(r,e);var t=g(r);function r(e,n){var i;return o(this,r),(i=t.call(this)).debugLogger=e,i.activationLogger=n,i}return s(r,[{key:"createSDKInstance",value:function(e,t){return new SG(e,t,this.debugLogger,this.activationLogger)}},{key:"configDependency",value:function(e){return{PaymentGatewayStartCustomerSessionService:e.getDependency("PaymentGatewayStartCustomerSessionService"),PaymentGatewayRequestBillingAuthService:e.getDependency("PaymentGatewayRequestBillingAuthService"),PaymentGatewayRequestPaymentService:e.getDependency("PaymentGatewayRequestPaymentService"),BrandpayRequestPaymentService:e.getDependency("BrandpayRequestPaymentService"),BrandpayAddPaymentMethodService:e.getDependency("BrandpayAddPaymentMethodService"),BrandpayChangePasswordService:e.getDependency("BrandpayChangePasswordService"),BrandpayChangeSettingsService:e.getDependency("BrandpayChangeSettingsService"),BrandpayStartCustomerSessionService:e.getDependency("BrandpayStartCustomerSessionService"),BrandpayChangeOneTouchPaySettingsService:e.getDependency("BrandpayChangeOneTouchPaySettingsService"),BrandpayGetIsOneTouchPayEnabledService:e.getDependency("BrandpayGetIsOneTouchPayEnabledService"),PaymentWidgetStartCustomerSessionService:e.getDependency("PaymentWidgetStartCustomerSessionService"),PaymentWidgetUpdateAmountService:e.getDependency("PaymentWidgetUpdateAmountService"),PaymentWidgetRenderPaymentMethods:e.getDependency("PaymentWidgetRenderPaymentMethods"),PaymentWidgetRequestPaymentService:e.getDependency("PaymentWidgetRequestPaymentService"),PaymentWidgetRenderAgreementService:e.getDependency("PaymentWidgetRenderAgreementService")}}}]),r}(mM),bG={brandpay:!1,widgets:!1,paymentGateway:!1},SG=(lG=nj(pG,sL.Errors.InvalidParametersError),dG=nj(mG,EM.Errors.InvalidParametersError),fG=nj(vG,AL.Errors.InvalidParametersError),hG=function(e){c(n,e);var r=g(n);function n(e,t,i,a){var s;return o(this,n),(s=r.call(this,e,t)).debugLogger=i,s.activationLogger=a,s}return s(n,[{key:"createBrandpaySDKInstance",value:function(e){return this.debugLogger.endTransaction("Brandpay","SDK initialized",{tag:"v2"}),bG.widgets&&this.debugLogger.info("widgets와 brandpay를 같이 사용하고 있습니다."),bG.paymentGateway&&this.debugLogger.info("payment와 brandpay를 같이 사용하고 있습니다."),bG.brandpay&&this.debugLogger.info("brandpay 여러 개를 같이 사용하고 있습니다."),bG.brandpay=!0,new Yj(t(t({},this.constructorParams),e),this.dependencyConfigurations,this.debugLogger,this.activationLogger)}},{key:"createWidgetsSDKInstance",value:function(e){return this.debugLogger.endTransaction("PaymentWidget","SDK initialized",{tag:"v2"}),bG.paymentGateway&&this.debugLogger.info("payment와 widgets를 같이 사용하고 있습니다."),bG.brandpay&&this.debugLogger.info("brandpay와 widgets를 같이 사용하고 있습니다."),bG.widgets&&this.debugLogger.info("widgets 여러 개를 같이 사용하고 있습니다."),bG.widgets=!0,new eq(t(t({},this.constructorParams),e),this.dependencyConfigurations,this.debugLogger,this.activationLogger)}},{key:"createPaymentGatewaySDKInstance",value:function(e){return this.debugLogger.endTransaction("PaymentGateway","SDK initialized",{tag:"v2"}),bG.widgets&&this.debugLogger.info("widgets과 payment를 같이 사용하고 있습니다."),bG.brandpay&&this.debugLogger.info("brandpay와 payment를 같이 사용하고 있습니다."),bG.paymentGateway&&this.debugLogger.info("payment 여러 개를 같이 사용하고 있습니다."),bG.paymentGateway=!0,new $j(t(t({},this.constructorParams),e),this.dependencyConfigurations,this.debugLogger,this.activationLogger)}}]),n}(yM),P(hG.prototype,"createBrandpaySDKInstance",[lG],Object.getOwnPropertyDescriptor(hG.prototype,"createBrandpaySDKInstance"),hG.prototype),P(hG.prototype,"createWidgetsSDKInstance",[dG],Object.getOwnPropertyDescriptor(hG.prototype,"createWidgetsSDKInstance"),hG.prototype),P(hG.prototype,"createPaymentGatewaySDKInstance",[fG],Object.getOwnPropertyDescriptor(hG.prototype,"createPaymentGatewaySDKInstance"),hG.prototype),hG)}(),window.__SDK_LOAD_END_TIME__=new Date;